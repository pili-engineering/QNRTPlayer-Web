!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).QNRTPlayer={})}(this,(function(e){"use strict";var t=function(){return t=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.apply(this,arguments)};function i(e,t,i,n){return new(i||(i=Promise))((function(r,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}c((n=n.apply(e,t||[])).next())}))}function n(e,t){var i,n,r,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function r(e,t,i){if(i||2===arguments.length)for(var n,r=0,a=t.length;r<a;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(e){var t={exports:{}};return e(t,t.exports),t.exports}var s=o((function(e){var t=Object.prototype.hasOwnProperty,i="~";function n(){}function r(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function a(e,t,n,a,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new r(n,a||e,o),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),s.prototype.eventNames=function(){var e,n,r=[];if(0===this._eventsCount)return r;for(n in e=this._events)t.call(e,n)&&r.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},s.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,o=new Array(a);r<a;r++)o[r]=n[r].fn;return o},s.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,r,a,o){var s=i?i+e:e;if(!this._events[s])return!1;var c,d,l=this._events[s],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,a),!0;case 6:return l.fn.call(l.context,t,n,r,a,o),!0}for(d=1,c=new Array(u-1);d<u;d++)c[d-1]=arguments[d];l.fn.apply(l.context,c)}else{var h,p=l.length;for(d=0;d<p;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),u){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,t);break;case 3:l[d].fn.call(l[d].context,t,n);break;case 4:l[d].fn.call(l[d].context,t,n,r);break;default:if(!c)for(h=1,c=new Array(u-1);h<u;h++)c[h-1]=arguments[h];l[d].fn.apply(l[d].context,c)}}return!0},s.prototype.on=function(e,t,i){return a(this,e,t,i,!1)},s.prototype.once=function(e,t,i){return a(this,e,t,i,!0)},s.prototype.removeListener=function(e,t,n,r){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||r&&!s.once||n&&s.context!==n||o(this,a);else{for(var c=0,d=[],l=s.length;c<l;c++)(s[c].fn!==t||r&&!s[c].once||n&&s[c].context!==n)&&d.push(s[c]);d.length?this._events[a]=1===d.length?d[0]:d:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=i,s.EventEmitter=s,e.exports=s}));const c={className:"qn-rtplayer-media",width:"100%",height:"100%",objectFit:"contain",volumn:.6,controls:!1,playsinline:!0,audioOnly:!1,muted:!1,jitterBuffer:null,uid:""},d={lastAudioPacketReceivedTimestamp:0,lastVideoPacketReceivedTimestamp:0,timestamp:0,ip:"",protocol:"",rtt:0,constTime:0,audioFps:0,audioBitrate:0,audioDecoderName:"",audioTotalSamplesReceived:0,audioAvgJitterBufferDelay:0,audioAvgJitterBufferTargetDelay:0,audioAvgPacketProcessingDelay:0,audioPacketDiscarded:0,audioPacketReceived:0,audioPacketLost:0,audioPacketLostRate:0,audioBytesReceived:0,audioAvgInterframeDelay:0,audioLastPacketReceivedTimestamp:0,audioEstimatedPlayoutTimestamp:0,videoFps:0,videoBitrate:0,videoDecoderName:"",videoFrameWidth:0,videoFrameHeight:0,videoAvgJitterBufferDelay:0,videoAvgJitterBufferTargetDelay:0,videoAvgPacketProcessingDelay:0,videoDroppedFrames:0,videoPacketReceived:0,videoPacketLost:0,videoPacketLostRate:0,videoNackCount:0,videoFirCount:0,videoPliCount:0,videoFrameDecoded:0,videoFrameReceived:0,videoDecodeCostMs:0,videoKeyFramesDecoded:0,videoBytesReceived:0,videoTotalFreezesDuration:[],videoFecPacketReceived:0,videoAvgInterframeDelay:0,videoLastPacketReceivedTimestamp:0,videoEstimatedPlayoutTimestamp:0,videoFrameDecodedList:[]};e.PlayerState=void 0,function(e){e[e.STATE_IDLE=0]="STATE_IDLE",e[e.STATE_INIT=1]="STATE_INIT",e[e.STATE_READY=2]="STATE_READY",e[e.STATE_PLAYING=3]="STATE_PLAYING",e[e.STATE_STOP=4]="STATE_STOP",e[e.STATE_ERROR=5]="STATE_ERROR"}(e.PlayerState||(e.PlayerState={}));class l{constructor(e,t){this.dbName=e,this.storeConfigs=t,this.db=void 0}getDB(){return i(this,void 0,void 0,(function*(){return null!=this.db?this.db:new Promise((e=>{const t=indexedDB.open(this.dbName);t.addEventListener("upgradeneeded",(()=>{for(const e of this.storeConfigs){const i=t.result.createObjectStore(e.name);for(const t of e.indexes)i.createIndex(t.name,t.keyPath)}})),e(h(t))}))}))}add(e){console.log(e)}get(e,t){return i(this,void 0,void 0,(function*(){return h((yield this.getDB()).transaction(e,"readonly").objectStore(e).get(t))}))}getAll(e){return i(this,void 0,void 0,(function*(){return h((yield this.getDB()).transaction(e,"readonly").objectStore(e).getAll())}))}count(e){return i(this,void 0,void 0,(function*(){return h((yield this.getDB()).transaction(e,"readonly").objectStore(e).count())}))}set(e,t,n){return i(this,void 0,void 0,(function*(){const i=(yield this.getDB()).transaction(e,"readwrite");return i.objectStore(e).put(n,t),p(i)}))}remove(e,t){return i(this,void 0,void 0,(function*(){const i=(yield this.getDB()).transaction(e,"readwrite");return i.objectStore(e).delete(t),p(i)}))}removeRange(e,t,n){return i(this,void 0,void 0,(function*(){let r=0;const a=(yield this.getDB()).transaction(e,"readwrite").objectStore(e).openCursor(void 0,"next");return new Promise(((e,o)=>{a.addEventListener("error",(()=>o(new u(a.error)))),a.addEventListener("success",(()=>i(this,void 0,void 0,(function*(){const i=a.result;null==i||r>=n?e():(r>=t&&r<n&&(yield h(i.delete())),++r,i.continue())}))))}))}))}clear(){return i(this,void 0,void 0,(function*(){const e=yield this.getDB();yield Promise.all(this.storeConfigs.map((({name:t})=>{const i=e.transaction(t,"readwrite");return i.objectStore(t).clear(),p(i)})))}))}dispose(){this.db&&this.db.close()}}class u extends Error{constructor(e){super(e+""),this.cause=e,this.name="IndexedDBError"}}function h(e){return new Promise(((t,i)=>{e.addEventListener("success",(()=>t(e.result))),e.addEventListener("error",(()=>i(new u(e.error))))}))}function p(e){return new Promise(((t,i)=>{e.addEventListener("complete",(()=>t())),e.addEventListener("error",(()=>i(new u(e.error)))),e.addEventListener("abort",(()=>i(new u(e.error))))}))}const m="/rtc/v1/play",f="miku_log",g=8e3,v="1.2.5";var w="4.6.1";function y(e,t){return new Promise((function(i){return setTimeout(i,e,t)}))}function b(e){return!!e&&"function"==typeof e.then}function _(e,t){try{var i=e();b(i)?i.then((function(e){return t(!0,e)}),(function(e){return t(!1,e)})):t(!0,i)}catch(e){t(!1,e)}}function S(e,t,r){return void 0===r&&(r=16),i(this,void 0,void 0,(function(){var i,a,o,s;return n(this,(function(n){switch(n.label){case 0:i=Array(e.length),a=Date.now(),o=0,n.label=1;case 1:return o<e.length?(i[o]=t(e[o],o),(s=Date.now())>=a+r?(a=s,[4,new Promise((function(e){var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(null)}))]):[3,3]):[3,4];case 2:n.sent(),n.label=3;case 3:return++o,[3,1];case 4:return[2,i]}}))}))}function T(e){return e.then(void 0,(function(){})),e}function k(e){return parseInt(e)}function C(e){return parseFloat(e)}function E(e,t){return"number"==typeof e&&isNaN(e)?t:e}function R(e){return e.reduce((function(e,t){return e+(t?1:0)}),0)}function x(e,t){if(void 0===t&&(t=1),Math.abs(t)>=1)return Math.round(e/t)*t;var i=1/t;return Math.round(e*i)/i}function P(e,t){var i=e[0]>>>16,n=65535&e[0],r=e[1]>>>16,a=65535&e[1],o=t[0]>>>16,s=65535&t[0],c=t[1]>>>16,d=0,l=0,u=0,h=0;u+=(h+=a+(65535&t[1]))>>>16,h&=65535,l+=(u+=r+c)>>>16,u&=65535,d+=(l+=n+s)>>>16,l&=65535,d+=i+o,d&=65535,e[0]=d<<16|l,e[1]=u<<16|h}function A(e,t){var i=e[0]>>>16,n=65535&e[0],r=e[1]>>>16,a=65535&e[1],o=t[0]>>>16,s=65535&t[0],c=t[1]>>>16,d=65535&t[1],l=0,u=0,h=0,p=0;h+=(p+=a*d)>>>16,p&=65535,u+=(h+=r*d)>>>16,h&=65535,u+=(h+=a*c)>>>16,h&=65535,l+=(u+=n*d)>>>16,u&=65535,l+=(u+=r*c)>>>16,u&=65535,l+=(u+=a*s)>>>16,u&=65535,l+=i*d+n*c+r*s+a*o,l&=65535,e[0]=l<<16|u,e[1]=h<<16|p}function I(e,t){var i=e[0];32===(t%=64)?(e[0]=e[1],e[1]=i):t<32?(e[0]=i<<t|e[1]>>>32-t,e[1]=e[1]<<t|i>>>32-t):(t-=32,e[0]=e[1]<<t|i>>>32-t,e[1]=i<<t|e[1]>>>32-t)}function D(e,t){0!==(t%=64)&&(t<32?(e[0]=e[1]>>>32-t,e[1]=e[1]<<t):(e[0]=e[1]<<t-32,e[1]=0))}function L(e,t){e[0]^=t[0],e[1]^=t[1]}var O=[4283543511,3981806797],M=[3301882366,444984403];function B(e){var t=[0,e[0]>>>1];L(e,t),A(e,O),t[1]=e[0]>>>1,L(e,t),A(e,M),t[1]=e[0]>>>1,L(e,t)}var N=[2277735313,289559509],F=[1291169091,658871167],j=[0,5],z=[0,1390208809],V=[0,944331445];function G(e,t){var i=function(e){for(var t=new Uint8Array(e.length),i=0;i<e.length;i++){var n=e.charCodeAt(i);if(n>127)return(new TextEncoder).encode(e);t[i]=n}return t}(e);t=t||0;var n,r=[0,i.length],a=r[1]%16,o=r[1]-a,s=[0,t],c=[0,t],d=[0,0],l=[0,0];for(n=0;n<o;n+=16)d[0]=i[n+4]|i[n+5]<<8|i[n+6]<<16|i[n+7]<<24,d[1]=i[n]|i[n+1]<<8|i[n+2]<<16|i[n+3]<<24,l[0]=i[n+12]|i[n+13]<<8|i[n+14]<<16|i[n+15]<<24,l[1]=i[n+8]|i[n+9]<<8|i[n+10]<<16|i[n+11]<<24,A(d,N),I(d,31),A(d,F),L(s,d),I(s,27),P(s,c),A(s,j),P(s,z),A(l,F),I(l,33),A(l,N),L(c,l),I(c,31),P(c,s),A(c,j),P(c,V);d[0]=0,d[1]=0,l[0]=0,l[1]=0;var u=[0,0];switch(a){case 15:u[1]=i[n+14],D(u,48),L(l,u);case 14:u[1]=i[n+13],D(u,40),L(l,u);case 13:u[1]=i[n+12],D(u,32),L(l,u);case 12:u[1]=i[n+11],D(u,24),L(l,u);case 11:u[1]=i[n+10],D(u,16),L(l,u);case 10:u[1]=i[n+9],D(u,8),L(l,u);case 9:u[1]=i[n+8],L(l,u),A(l,F),I(l,33),A(l,N),L(c,l);case 8:u[1]=i[n+7],D(u,56),L(d,u);case 7:u[1]=i[n+6],D(u,48),L(d,u);case 6:u[1]=i[n+5],D(u,40),L(d,u);case 5:u[1]=i[n+4],D(u,32),L(d,u);case 4:u[1]=i[n+3],D(u,24),L(d,u);case 3:u[1]=i[n+2],D(u,16),L(d,u);case 2:u[1]=i[n+1],D(u,8),L(d,u);case 1:u[1]=i[n],L(d,u),A(d,N),I(d,31),A(d,F),L(s,d)}return L(s,r),L(c,r),P(s,c),P(c,s),B(s),B(c),P(s,c),P(c,s),("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)+("00000000"+(c[0]>>>0).toString(16)).slice(-8)+("00000000"+(c[1]>>>0).toString(16)).slice(-8)}function U(e,t,r,a){var o=Object.keys(e).filter((function(e){return!function(e,t){for(var i=0,n=e.length;i<n;++i)if(e[i]===t)return!0;return!1}(r,e)})),s=T(S(o,(function(i){return function(e,t){var i=T(new Promise((function(i){var n=Date.now();_(e.bind(null,t),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Date.now()-n;if(!e[0])return i((function(){return{error:e[1],duration:r}}));var a=e[1];if(function(e){return"function"!=typeof e}(a))return i((function(){return{value:a,duration:r}}));i((function(){return new Promise((function(e){var t=Date.now();_(a,(function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var a=r+Date.now()-t;if(!i[0])return e({error:i[1],duration:a});e({value:i[1],duration:a})}))}))}))}))})));return function(){return i.then((function(e){return e()}))}}(e[i],t)}),a));return function(){return i(this,void 0,void 0,(function(){var e,t,i,r;return n(this,(function(n){switch(n.label){case 0:return[4,s];case 1:return[4,S(n.sent(),(function(e){return T(e())}),a)];case 2:return e=n.sent(),[4,Promise.all(e)];case 3:for(t=n.sent(),i={},r=0;r<o.length;++r)i[o[r]]=t[r];return[2,i]}}))}))}}function W(){var e=window,t=navigator;return R(["MSCSSMatrix"in e,"msSetImmediate"in e,"msIndexedDB"in e,"msMaxTouchPoints"in t,"msPointerEnabled"in t])>=4}function Z(){var e=window,t=navigator;return R(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,0===(t.vendor||"").indexOf("Google"),"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5}function H(){var e=window;return R(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,0===navigator.vendor.indexOf("Apple"),"RGBColor"in e,"WebKitMediaKeys"in e])>=4}function X(){var e=window,t=e.HTMLElement,i=e.Document;return R(["safari"in e,!("ongestureend"in e),!("TouchEvent"in e),!("orientation"in e),t&&!("autocapitalize"in t.prototype),i&&"pointerLockElement"in i.prototype])>=4}function Y(){var e,t=window;return e=t.print,/^function\s.*?\{\s*\[native code]\s*}$/.test(String(e))&&"[object WebPageNamespace]"===String(t.browser)}function J(){var e,t,i=window;return R(["buildID"in navigator,"MozAppearance"in(null!==(t=null===(e=document.documentElement)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),"onmozfullscreenchange"in i,"mozInnerScreenX"in i,"CSSMozDocumentRule"in i,"CanvasCaptureMediaStream"in i])>=4}function K(){var e=window,t=navigator,i=e.CSS,n=e.HTMLButtonElement;return R([!("getStorageUpdates"in t),n&&"popover"in n.prototype,"CSSCounterStyleRule"in e,i.supports("font-size-adjust: ex-height 0.5"),i.supports("text-transform: full-width")])>=4}function $(){var e=document;return(e.exitFullscreen||e.msExitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen).call(e)}function q(){var e=Z(),t=J(),i=window,n=navigator,r="connection";return e?R([!("SharedWorker"in i),n[r]&&"ontypechange"in n[r],!("sinkId"in new Audio)])>=2:!!t&&R(["onorientationchange"in i,"orientation"in i,/android/i.test(n.appVersion)])>=2}function Q(e){var t=new Error(e);return t.name=e,t}function ee(e,t,r){var a,o,s;return void 0===r&&(r=50),i(this,void 0,void 0,(function(){var i,c;return n(this,(function(n){switch(n.label){case 0:i=document,n.label=1;case 1:return i.body?[3,3]:[4,y(r)];case 2:return n.sent(),[3,1];case 3:c=i.createElement("iframe"),n.label=4;case 4:return n.trys.push([4,,10,11]),[4,new Promise((function(e,n){var r=!1,a=function(){r=!0,e()};c.onload=a,c.onerror=function(e){r=!0,n(e)};var o=c.style;o.setProperty("display","block","important"),o.position="absolute",o.top="0",o.left="0",o.visibility="hidden",t&&"srcdoc"in c?c.srcdoc=t:c.src="about:blank",i.body.appendChild(c);var s=function(){var e,t;r||("complete"===(null===(t=null===(e=c.contentWindow)||void 0===e?void 0:e.document)||void 0===t?void 0:t.readyState)?a():setTimeout(s,10))};s()}))];case 5:n.sent(),n.label=6;case 6:return(null===(o=null===(a=c.contentWindow)||void 0===a?void 0:a.document)||void 0===o?void 0:o.body)?[3,8]:[4,y(r)];case 7:return n.sent(),[3,6];case 8:return[4,e(c,c.contentWindow)];case 9:return[2,n.sent()];case 10:return null===(s=c.parentNode)||void 0===s||s.removeChild(c),[7];case 11:return[2]}}))}))}function te(e){for(var t=function(e){for(var t,i,n="Unexpected syntax '".concat(e,"'"),r=/^\s*([a-z-]*)(.*)$/i.exec(e),a=r[1]||void 0,o={},s=/([.:#][\w-]+|\[.+?\])/gi,c=function(e,t){o[e]=o[e]||[],o[e].push(t)};;){var d=s.exec(r[2]);if(!d)break;var l=d[0];switch(l[0]){case".":c("class",l.slice(1));break;case"#":c("id",l.slice(1));break;case"[":var u=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(l);if(!u)throw new Error(n);c(u[1],null!==(i=null!==(t=u[4])&&void 0!==t?t:u[5])&&void 0!==i?i:"");break;default:throw new Error(n)}}return[a,o]}(e),i=t[0],n=t[1],r=document.createElement(null!=i?i:"div"),a=0,o=Object.keys(n);a<o.length;a++){var s=o[a],c=n[s].join(" ");"style"===s?ie(r.style,c):r.setAttribute(s,c)}return r}function ie(e,t){for(var i=0,n=t.split(";");i<n.length;i++){var r=n[i],a=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(r);if(a){var o=a[1],s=a[2],c=a[4];e.setProperty(o,s,c||"")}}}var ne=["monospace","sans-serif","serif"],re=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function ae(e){return e.toDataURL()}var oe,se;function ce(){var e=this;return function(){if(void 0===se){var e=function(){var t=de();le(t)?se=setTimeout(e,2500):(oe=t,se=void 0)};e()}}(),function(){return i(e,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return le(e=de())?oe?[2,r([],oe,!0)]:(i=document).fullscreenElement||i.msFullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement?[4,$()]:[3,2]:[3,2];case 1:t.sent(),e=de(),t.label=2;case 2:return le(e)||(oe=e),[2,e]}var i}))}))}}function de(){var e=screen;return[E(C(e.availTop),null),E(C(e.width)-C(e.availWidth)-E(C(e.availLeft),0),null),E(C(e.height)-C(e.availHeight)-E(C(e.availTop),0),null),E(C(e.availLeft),null)]}function le(e){for(var t=0;t<4;++t)if(e[t])return!1;return!0}function ue(e){var t;return i(this,void 0,void 0,(function(){var i,r,a,o,s,c,d;return n(this,(function(n){switch(n.label){case 0:for(i=document,r=i.createElement("div"),a=new Array(e.length),o={},he(r),d=0;d<e.length;++d)"DIALOG"===(s=te(e[d])).tagName&&s.show(),he(c=i.createElement("div")),c.appendChild(s),r.appendChild(c),a[d]=s;n.label=1;case 1:return i.body?[3,3]:[4,y(50)];case 2:return n.sent(),[3,1];case 3:i.body.appendChild(r);try{for(d=0;d<e.length;++d)a[d].offsetParent||(o[e[d]]=!0)}finally{null===(t=r.parentNode)||void 0===t||t.removeChild(r)}return[2,o]}}))}))}function he(e){e.style.setProperty("visibility","hidden","important"),e.style.setProperty("display","block","important")}function pe(e){return matchMedia("(inverted-colors: ".concat(e,")")).matches}function me(e){return matchMedia("(forced-colors: ".concat(e,")")).matches}function fe(e){return matchMedia("(prefers-contrast: ".concat(e,")")).matches}function ge(e){return matchMedia("(prefers-reduced-motion: ".concat(e,")")).matches}function ve(e){return matchMedia("(prefers-reduced-transparency: ".concat(e,")")).matches}function we(e){return matchMedia("(dynamic-range: ".concat(e,")")).matches}var ye=Math,be=function(){return 0};var _e={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};var Se=function(){for(var e=window;;){var t=e.parent;if(!t||t===e)return!1;try{if(t.location.origin!==e.location.origin)return!0}catch(e){if(e instanceof Error&&"SecurityError"===e.name)return!0;throw e}e=t}};var Te=new Set([10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938]),ke=new Set([34047,35723,36063,34852,34853,34854,34229,36392,36795,38449]),Ce=["FRAGMENT_SHADER","VERTEX_SHADER"],Ee=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"],Re="WEBGL_debug_renderer_info";function xe(e){if(e.webgl)return e.webgl.context;var t,i=document.createElement("canvas");i.addEventListener("webglCreateContextError",(function(){return t=void 0}));for(var n=0,r=["webgl","experimental-webgl"];n<r.length;n++){var a=r[n];try{t=i.getContext(a)}catch(e){}if(t)break}return e.webgl={context:t},t}function Pe(e,t,i){var n=e.getShaderPrecisionFormat(e[t],e[i]);return n?[n.rangeMin,n.rangeMax,n.precision]:[]}function Ae(e){return Object.keys(e.__proto__).filter(Ie)}function Ie(e){return"string"==typeof e&&!e.match(/[^A-Z0-9_x]/)}function De(){return J()}function Le(e){return"function"==typeof e.getParameter}var Oe={fonts:function(){var e=this;return ee((function(t,r){var a=r.document;return i(e,void 0,void 0,(function(){var e,t,i,r,o,s,c,d,l,u,h;return n(this,(function(n){for((e=a.body).style.fontSize="48px",(t=a.createElement("div")).style.setProperty("visibility","hidden","important"),i={},r={},o=function(e){var i=a.createElement("span"),n=i.style;return n.position="absolute",n.top="0",n.left="0",n.fontFamily=e,i.textContent="mmMwWLliI0O&1",t.appendChild(i),i},s=function(e,t){return o("'".concat(e,"',").concat(t))},c=function(){for(var e={},t=function(t){e[t]=ne.map((function(e){return s(t,e)}))},i=0,n=re;i<n.length;i++){t(n[i])}return e},d=function(e){return ne.some((function(t,n){return e[n].offsetWidth!==i[t]||e[n].offsetHeight!==r[t]}))},l=function(){return ne.map(o)}(),u=c(),e.appendChild(t),h=0;h<ne.length;h++)i[ne[h]]=l[h].offsetWidth,r[ne[h]]=l[h].offsetHeight;return[2,re.filter((function(e){return d(u[e])}))]}))}))}))},domBlockers:function(e){var t=(void 0===e?{}:e).debug;return i(this,void 0,void 0,(function(){var e,i,r,a,o;return n(this,(function(n){switch(n.label){case 0:return H()||q()?(s=atob,e={abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',s("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",s("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",s("LnNwb25zb3JpdA=="),".ylamainos",s("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",s("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",s("LmhlYWRlci1ibG9ja2VkLWFk"),s("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",s("I2FkXzMwMFgyNTA="),s("I2Jhbm5lcmZsb2F0MjI="),s("I2NhbXBhaWduLWJhbm5lcg=="),s("I0FkLUNvbnRlbnQ=")],adGuardChinese:[s("LlppX2FkX2FfSA=="),s("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",s("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),s("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",s("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",s("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",s("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),s("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),s("LmFkZ29vZ2xl"),s("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[s("YW1wLWF1dG8tYWRz"),s("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",s("I2FkX2ludmlld19hcmVh")],adGuardRussian:[s("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),s("LnJlY2xhbWE="),'div[id^="smi2adblock"]',s("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[s("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),s("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",s("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),s("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),s("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",s("I3Jla2xhbWk="),s("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),s("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),s("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[s("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",s("LndpZGdldF9wb19hZHNfd2lkZ2V0"),s("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",s("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[s("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),s("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",s("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",s("I3Jla2xhbW5pLWJveA=="),s("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",s("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[s("I2FkdmVydGVudGll"),s("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",s("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",s("LnNwb25zb3JsaW5rZ3J1ZW4="),s("I3dlcmJ1bmdza3k="),s("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),s("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[s("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",s("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[s("LnJla2xhbW9zX3RhcnBhcw=="),s("LnJla2xhbW9zX251b3JvZG9z"),s("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),s("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),s("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[s("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[s("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),s("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",s("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[s("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),s("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),s("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",s("LmFkX19tYWlu"),s("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[s("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[s("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),s("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[s("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),s("I2xpdmVyZUFkV3JhcHBlcg=="),s("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),s("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[s("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",s("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),s("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),s("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[s("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),s("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),s("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",s("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),s("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),s("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),s("ZGl2I3NrYXBpZWNfYWQ=")],ro:[s("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),s("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),s("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[s("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),s("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),s("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",s("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),s("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",s("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]},i=Object.keys(e),[4,ue((o=[]).concat.apply(o,i.map((function(t){return e[t]}))))]):[2,void 0];case 1:return r=n.sent(),t&&function(e,t){for(var i="DOM blockers debug:\n```",n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];i+="\n".concat(a,":");for(var o=0,s=e[a];o<s.length;o++){var c=s[o];i+="\n  ".concat(t[c]?"🚫":"➡️"," ").concat(c)}}console.log("".concat(i,"\n```"))}(e,r),(a=i.filter((function(t){var i=e[t];return R(i.map((function(e){return r[e]})))>.6*i.length}))).sort(),[2,a]}var s}))}))},fontPreferences:function(){return function(e,t){void 0===t&&(t=4e3);return ee((function(i,n){var a=n.document,o=a.body,s=o.style;s.width="".concat(t,"px"),s.webkitTextSizeAdjust=s.textSizeAdjust="none",Z()?o.style.zoom="".concat(1/n.devicePixelRatio):H()&&(o.style.zoom="reset");var c=a.createElement("div");return c.textContent=r([],Array(t/20|0),!0).map((function(){return"word"})).join(" "),o.appendChild(c),e(a,o)}),'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}((function(e,t){for(var i={},n={},r=0,a=Object.keys(_e);r<a.length;r++){var o=a[r],s=_e[o],c=s[0],d=void 0===c?{}:c,l=s[1],u=void 0===l?"mmMwWLliI0fiflO&1":l,h=e.createElement("span");h.textContent=u,h.style.whiteSpace="nowrap";for(var p=0,m=Object.keys(d);p<m.length;p++){var f=m[p],g=d[f];void 0!==g&&(h.style[f]=g)}i[o]=h,t.append(e.createElement("br"),h)}for(var v=0,w=Object.keys(_e);v<w.length;v++){n[o=w[v]]=i[o].getBoundingClientRect().width}return n}))},audio:function(){return H()&&K()&&Y()||Z()&&(e=navigator,t=window,i=Audio.prototype,n=t.visualViewport,R(["srLatency"in i,"srChannelCount"in i,"devicePosture"in e,n&&"segments"in n,"getTextInformation"in Image.prototype])>=3)&&function(){var e=window,t=e.URLPattern;return R(["union"in Set.prototype,"Iterator"in e,t&&"hasRegExpGroups"in t.prototype,"RGB8"in WebGLRenderingContext.prototype])>=3}()?-4:function(){var e=window,t=e.OfflineAudioContext||e.webkitOfflineAudioContext;if(!t)return-2;if(H()&&!X()&&!function(){var e=window;return R(["DOMRectList"in e,"RTCPeerConnectionIceEvent"in e,"SVGGeometryElement"in e,"ontransitioncancel"in e])>=3}())return-1;var i=4500,n=new t(1,5e3,44100),r=n.createOscillator();r.type="triangle",r.frequency.value=1e4;var a=n.createDynamicsCompressor();a.threshold.value=-50,a.knee.value=40,a.ratio.value=12,a.attack.value=0,a.release.value=.25,r.connect(a),a.connect(n.destination),r.start(0);var o=function(e){var t=3,i=500,n=500,r=5e3,a=function(){},o=new Promise((function(o,s){var c=!1,d=0,l=0;e.oncomplete=function(e){return o(e.renderedBuffer)};var u=function(){setTimeout((function(){return s(Q("timeout"))}),Math.min(n,l+r-Date.now()))},h=function(){try{var n=e.startRendering();switch(b(n)&&T(n),e.state){case"running":l=Date.now(),c&&u();break;case"suspended":document.hidden||d++,c&&d>=t?s(Q("suspended")):setTimeout(h,i)}}catch(e){s(e)}};h(),a=function(){c||(c=!0,l>0&&u())}}));return[o,a]}(n),s=o[0],c=o[1],d=T(s.then((function(e){return function(e){for(var t=0,i=0;i<e.length;++i)t+=Math.abs(e[i]);return t}(e.getChannelData(0).subarray(i))}),(function(e){if("timeout"===e.name||"suspended"===e.name)return-3;throw e})));return function(){return c(),d}}();var e,t,i,n},screenFrame:function(){var e=this;if(H()&&K()&&Y())return function(){return Promise.resolve(void 0)};var t=ce();return function(){return i(e,void 0,void 0,(function(){var e,i;return n(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return e=n.sent(),[2,[(i=function(e){return null===e?null:x(e,10)})(e[0]),i(e[1]),i(e[2]),i(e[3])]]}}))}))}},canvas:function(){return function(e){var t,i,n,r=!1,a=function(){var e=document.createElement("canvas");return e.width=1,e.height=1,[e,e.getContext("2d")]}(),o=a[0],s=a[1];!function(e,t){return!(!t||!e.toDataURL)}(o,s)?i=n="unsupported":(r=function(e){return e.rect(0,0,10,10),e.rect(2,2,6,6),!e.isPointInPath(5,5,"evenodd")}(s),e?i=n="skipped":(t=function(e,t){!function(e,t){e.width=240,e.height=60,t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(100,1,62,20),t.fillStyle="#069",t.font='11pt "Times New Roman"';var i="Cwm fjordbank gly ".concat(String.fromCharCode(55357,56835));t.fillText(i,2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText(i,4,45)}(e,t);var i=ae(e),n=ae(e);if(i!==n)return["unstable","unstable"];!function(e,t){e.width=122,e.height=110,t.globalCompositeOperation="multiply";for(var i=0,n=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];i<n.length;i++){var r=n[i],a=r[0],o=r[1],s=r[2];t.fillStyle=a,t.beginPath(),t.arc(o,s,40,0,2*Math.PI,!0),t.closePath(),t.fill()}t.fillStyle="#f9c",t.arc(60,60,60,0,2*Math.PI,!0),t.arc(60,60,20,0,2*Math.PI,!0),t.fill("evenodd")}(e,t);var r=ae(e);return[r,i]}(o,s),i=t[0],n=t[1]));return{winding:r,geometry:i,text:n}}(H()&&K()&&Y())},osCpu:function(){return navigator.oscpu},languages:function(){var e,t=navigator,i=[],n=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(void 0!==n&&i.push([n]),Array.isArray(t.languages))Z()&&R([!("MediaSettingsRange"in(e=window)),"RTCEncodedAudioFrame"in e,""+e.Intl=="[object Intl]",""+e.Reflect=="[object Reflect]"])>=3||i.push(t.languages);else if("string"==typeof t.languages){var r=t.languages;r&&i.push(r.split(","))}return i},colorDepth:function(){return window.screen.colorDepth},deviceMemory:function(){return E(C(navigator.deviceMemory),void 0)},screenResolution:function(){var e,t,i;if(!(H()&&K()&&Y()))return e=screen,(i=[(t=function(e){return E(k(e),null)})(e.width),t(e.height)]).sort().reverse(),i},hardwareConcurrency:function(){return E(k(navigator.hardwareConcurrency),void 0)},timezone:function(){var e,t=null===(e=window.Intl)||void 0===e?void 0:e.DateTimeFormat;if(t){var i=(new t).resolvedOptions().timeZone;if(i)return i}var n,r=(n=(new Date).getFullYear(),-Math.max(C(new Date(n,0,1).getTimezoneOffset()),C(new Date(n,6,1).getTimezoneOffset())));return"UTC".concat(r>=0?"+":"").concat(r)},sessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},localStorage:function(){try{return!!window.localStorage}catch(e){return!0}},indexedDB:function(){var e,t;if(!(W()||(e=window,t=navigator,R(["msWriteProfilerMark"in e,"MSStream"in e,"msLaunchUri"in t,"msSaveBlob"in t])>=3&&!W())))try{return!!window.indexedDB}catch(e){return!0}},openDatabase:function(){return!!window.openDatabase},cpuClass:function(){return navigator.cpuClass},platform:function(){var e=navigator.platform;return"MacIntel"===e&&H()&&!X()?function(){if("iPad"===navigator.platform)return!0;var e=screen,t=e.width/e.height;return R(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,t>.65&&t<1.53])>=2}()?"iPad":"iPhone":e},plugins:function(){var e=navigator.plugins;if(e){for(var t=[],i=0;i<e.length;++i){var n=e[i];if(n){for(var r=[],a=0;a<n.length;++a){var o=n[a];r.push({type:o.type,suffixes:o.suffixes})}t.push({name:n.name,description:n.description,mimeTypes:r})}}return t}},touchSupport:function(){var e,t=navigator,i=0;void 0!==t.maxTouchPoints?i=k(t.maxTouchPoints):void 0!==t.msMaxTouchPoints&&(i=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(t){e=!1}return{maxTouchPoints:i,touchEvent:e,touchStart:"ontouchstart"in window}},vendor:function(){return navigator.vendor||""},vendorFlavors:function(){for(var e=[],t=0,i=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];t<i.length;t++){var n=i[t],r=window[n];r&&"object"==typeof r&&e.push(n)}return e.sort()},cookiesEnabled:function(){var e=document;try{e.cookie="cookietest=1; SameSite=Strict;";var t=-1!==e.cookie.indexOf("cookietest=");return e.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch(e){return!1}},colorGamut:function(){for(var e=0,t=["rec2020","p3","srgb"];e<t.length;e++){var i=t[e];if(matchMedia("(color-gamut: ".concat(i,")")).matches)return i}},invertedColors:function(){return!!pe("inverted")||!pe("none")&&void 0},forcedColors:function(){return!!me("active")||!me("none")&&void 0},monochrome:function(){if(matchMedia("(min-monochrome: 0)").matches){for(var e=0;e<=100;++e)if(matchMedia("(max-monochrome: ".concat(e,")")).matches)return e;throw new Error("Too high value")}},contrast:function(){return fe("no-preference")?0:fe("high")||fe("more")?1:fe("low")||fe("less")?-1:fe("forced")?10:void 0},reducedMotion:function(){return!!ge("reduce")||!ge("no-preference")&&void 0},reducedTransparency:function(){return!!ve("reduce")||!ve("no-preference")&&void 0},hdr:function(){return!!we("high")||!we("standard")&&void 0},math:function(){var e,t=ye.acos||be,i=ye.acosh||be,n=ye.asin||be,r=ye.asinh||be,a=ye.atanh||be,o=ye.atan||be,s=ye.sin||be,c=ye.sinh||be,d=ye.cos||be,l=ye.cosh||be,u=ye.tan||be,h=ye.tanh||be,p=ye.exp||be,m=ye.expm1||be,f=ye.log1p||be;return{acos:t(.12312423423423424),acosh:i(1e308),acoshPf:(e=1e154,ye.log(e+ye.sqrt(e*e-1))),asin:n(.12312423423423424),asinh:r(1),asinhPf:function(e){return ye.log(e+ye.sqrt(e*e+1))}(1),atanh:a(.5),atanhPf:function(e){return ye.log((1+e)/(1-e))/2}(.5),atan:o(.5),sin:s(-1e300),sinh:c(1),sinhPf:function(e){return ye.exp(e)-1/ye.exp(e)/2}(1),cos:d(10.000000000123),cosh:l(1),coshPf:function(e){return(ye.exp(e)+1/ye.exp(e))/2}(1),tan:u(-1e300),tanh:h(1),tanhPf:function(e){return(ye.exp(2*e)-1)/(ye.exp(2*e)+1)}(1),exp:p(1),expm1:m(1),expm1Pf:function(e){return ye.exp(e)-1}(1),log1p:f(10),log1pPf:function(e){return ye.log(1+e)}(10),powPI:function(e){return ye.pow(ye.PI,e)}(-100)}},pdfViewerEnabled:function(){return navigator.pdfViewerEnabled},architecture:function(){var e=new Float32Array(1),t=new Uint8Array(e.buffer);return e[0]=1/0,e[0]=e[0]-e[0],t[3]},applePay:function(){var e=window.ApplePaySession;if("function"!=typeof(null==e?void 0:e.canMakePayments))return-1;if(Se())return-3;try{return e.canMakePayments()?1:0}catch(e){return function(e){if(e instanceof Error&&"InvalidAccessError"===e.name&&/\bfrom\b.*\binsecure\b/i.test(e.message))return-2;throw e}(e)}},privateClickMeasurement:function(){var e,t=document.createElement("a"),i=null!==(e=t.attributionSourceId)&&void 0!==e?e:t.attributionsourceid;return void 0===i?void 0:String(i)},audioBaseLatency:function(){var e;return q()||H()?window.AudioContext&&null!==(e=(new AudioContext).baseLatency)&&void 0!==e?e:-1:-2},dateTimeLocale:function(){if(!window.Intl)return-1;var e=window.Intl.DateTimeFormat;if(!e)return-2;var t=e().resolvedOptions().locale;return t||""===t?t:-3},webGlBasics:function(e){var t,i,n,r,a,o,s=xe(e.cache);if(!s)return-1;if(!Le(s))return-2;var c=De()?null:s.getExtension(Re);return{version:(null===(t=s.getParameter(s.VERSION))||void 0===t?void 0:t.toString())||"",vendor:(null===(i=s.getParameter(s.VENDOR))||void 0===i?void 0:i.toString())||"",vendorUnmasked:c?null===(n=s.getParameter(c.UNMASKED_VENDOR_WEBGL))||void 0===n?void 0:n.toString():"",renderer:(null===(r=s.getParameter(s.RENDERER))||void 0===r?void 0:r.toString())||"",rendererUnmasked:c?null===(a=s.getParameter(c.UNMASKED_RENDERER_WEBGL))||void 0===a?void 0:a.toString():"",shadingLanguageVersion:(null===(o=s.getParameter(s.SHADING_LANGUAGE_VERSION))||void 0===o?void 0:o.toString())||""}},webGlExtensions:function(e){var t=xe(e.cache);if(!t)return-1;if(!Le(t))return-2;var i=t.getSupportedExtensions(),n=t.getContextAttributes(),r=[],a=[],o=[],s=[],c=[];if(n)for(var d=0,l=Object.keys(n);d<l.length;d++){var u=l[d];a.push("".concat(u,"=").concat(n[u]))}for(var h=0,p=Ae(t);h<p.length;h++){var m=t[_=p[h]];o.push("".concat(_,"=").concat(m).concat(Te.has(m)?"=".concat(t.getParameter(m)):""))}if(i)for(var f=0,g=i;f<g.length;f++){var v=g[f];if(!(v===Re&&De()||"WEBGL_polygon_mode"===v&&(Z()||H()))){var w=t.getExtension(v);if(w)for(var y=0,b=Ae(w);y<b.length;y++){var _;m=w[_=b[y]];s.push("".concat(_,"=").concat(m).concat(ke.has(m)?"=".concat(t.getParameter(m)):""))}else r.push(v)}}for(var S=0,T=Ce;S<T.length;S++)for(var k=T[S],C=0,E=Ee;C<E.length;C++){var R=E[C],x=Pe(t,k,R);c.push("".concat(k,".").concat(R,"=").concat(x.join(",")))}return s.sort(),o.sort(),{contextAttributes:a,parameters:o,shaderPrecisions:c,extensions:i,extensionParameters:s,unsupportedExtensions:r}}};function Me(e){var t=function(e){if(q())return.4;if(H())return!X()||K()&&Y()?.3:.5;var t="value"in e.platform?e.platform.value:"";if(/^Win/.test(t))return.6;if(/^Mac/.test(t))return.5;return.7}(e),i=function(e){return x(.99+.01*e,1e-4)}(t);return{score:t,comment:"$ if upgrade to Pro: https://fpjs.dev/pro".replace(/\$/g,"".concat(i))}}function Be(e){return JSON.stringify(e,(function(e,i){return i instanceof Error?t({name:(n=i).name,message:n.message,stack:null===(r=n.stack)||void 0===r?void 0:r.split("\n")},n):i;var n,r}),2)}function Ne(e){return G(function(e){for(var t="",i=0,n=Object.keys(e).sort();i<n.length;i++){var r=n[i],a=e[r],o="error"in a?"error":JSON.stringify(a.value);t+="".concat(t?"|":"").concat(r.replace(/([:|\\])/g,"\\$1"),":").concat(o)}return t}(e))}function Fe(e){return void 0===e&&(e=50),function(e,t){void 0===t&&(t=1/0);var i=window.requestIdleCallback;return i?new Promise((function(e){return i.call(window,(function(){return e()}),{timeout:t})})):y(Math.min(e,t))}(e,2*e)}function je(e,t){var r=Date.now();return{get:function(a){return i(this,void 0,void 0,(function(){var i,o,s;return n(this,(function(n){switch(n.label){case 0:return i=Date.now(),[4,e()];case 1:return o=n.sent(),s=function(e){var t,i=Me(e);return{get visitorId(){return void 0===t&&(t=Ne(this.components)),t},set visitorId(e){t=e},confidence:i,components:e,version:w}}(o),(t||(null==a?void 0:a.debug))&&console.log("Copy the text below to get the debug data:\n\n```\nversion: ".concat(s.version,"\nuserAgent: ").concat(navigator.userAgent,"\ntimeBetweenLoadAndGet: ").concat(i-r,"\nvisitorId: ").concat(s.visitorId,"\ncomponents: ").concat(Be(o),"\n```")),[2,s]}}))}))}}}var ze={load:function(e){var t;return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var i,r,a;return n(this,(function(n){switch(n.label){case 0:return(null===(t=e.monitoring)||void 0===t||t)&&function(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var e=new XMLHttpRequest;e.open("get","https://m1.openfpcdn.io/fingerprintjs/v".concat(w,"/npm-monitoring"),!0),e.send()}catch(e){console.error(e)}}(),i=e.delayFallback,r=e.debug,[4,Fe(i)];case 1:return n.sent(),a=function(e){return U(Oe,e,[])}({cache:{},debug:r}),[2,je(a,r)]}}))}))},hashComponents:Ne,componentsToDebugString:Be};class Ve{constructor(){this.base64Chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}encode(e){let t="";for(let i=0;i<e.length;i+=3){let n=e.charCodeAt(i),r=i+1<e.length?e.charCodeAt(i+1):0,a=i+2<e.length?e.charCodeAt(i+2):0,o=n>>2,s=(3&n)<<4|r>>4,c=(15&r)<<2|a>>6,d=63&a;t+=this.base64Chars[o]+this.base64Chars[s]+(i+1<e.length?this.base64Chars[c]:"=")+(i+2<e.length?this.base64Chars[d]:"=")}return t}decode(e){let t="",i=0;for(;i<e.length;){let n=this.base64Chars.indexOf(e.charAt(i++)),r=this.base64Chars.indexOf(e.charAt(i++)),a=this.base64Chars.indexOf(e.charAt(i++)),o=this.base64Chars.indexOf(e.charAt(i++)),s=n<<2|r>>4,c=(15&r)<<4|a>>2,d=(3&a)<<6|o;t+=String.fromCharCode(s),64!=a&&(t+=String.fromCharCode(c)),64!=o&&(t+=String.fromCharCode(d))}return t}}const Ge=function(e){return e.replace(/\//g,"_").replace(/\+/g,"-")},Ue=(e,t)=>i(void 0,void 0,void 0,(function*(){const i=new TextEncoder,n=i.encode(t),r=i.encode(e),a=yield window.crypto.subtle.importKey("raw",n,{name:"HMAC",hash:"SHA-1"},!1,["sign"]);return function(e){let t="";const i=new Uint8Array(e),n=i.byteLength;for(let e=0;e<n;e++)t+=String.fromCharCode(i[e]);return window.btoa(t)}(yield window.crypto.subtle.sign("HMAC",a,r))}));class We{constructor(e,t=3600){this.scope=e,this.expires=t}token(){return i(this,void 0,void 0,(function*(){let e=this.getFlags(),t=function(e){let t=(new Ve).encode(e);return Ge(t)}(JSON.stringify(e)),i=yield Ue(t,"i69H2bnVyY0cP2t2kywaUKy2v9sxXgaT");return"3x03N060VKZYT8fKvbRP7Do1m1ifop07:"+Ge(i)+":"+t}))}getFlags(){let e={};return e.scope=this.scope,e.deadline=this.expires+Math.floor(Date.now()/1e3),e}}const Ze=e=>i(void 0,void 0,void 0,(function*(){const t=`${e.name}.${e.format}`,n=yield function(e){return i(this,void 0,void 0,(function*(){let t=new We("rtplayer-sdk-log:"+e);return yield t.token()}))}(t),r=new FormData;r.append("action",e.action),r.append("key",t),r.append("token",n),r.append("file",e.file);return yield fetch("https://upload.qiniup.com",{method:"POST",body:r})})),He={disable:0,error:1,fatal:1,warning:2,log:3,debug:4},Xe={name:f,indexes:[]};function Ye(){const e=new Date;function t(e){const t=e.toString();return t.length<2?"0"+t:t}return`[${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}.${e.getMilliseconds()}]`}const Je=new class{constructor(e){this.url="",this.mikuFingerprint="",this.canUploadLog=!1,this.level=e,this.db=new l("qn_rtplayer-web/dc/v1",[Xe])}setLevel(e){this.level=e}initUpload(e){return i(this,void 0,void 0,(function*(){this.url=e;let t=localStorage.getItem("mikuFingerprint");t||(t=yield this.getMikuFingerprint(),localStorage.setItem("mikuFingerprint",t)),this.mikuFingerprint=t;const i=new URL(e);return i.searchParams.set("mClientId",t),this.canUploadLog&&this.checkErrorNUpload(),this.checkErrorNUpload(),i.toString()}))}insertDBLog(e,t,n){return i(this,void 0,void 0,(function*(){if(!this.canUploadLog)return;(yield this.db.count(f))>=200&&(yield this.db.removeRange(f,0,1)),yield this.db.set(f,Date.now().toString(),`${t} [${e}] url: ${this.url} ${n}`),"fatal"===e&&this.uploadDBLog(!0)}))}uploadDBLog(){return i(this,arguments,void 0,(function*(e=!1){if(this.canUploadLog)try{const t=(yield this.db.getAll(f)).map((e=>e+"\n")),i=[];let n=0;const r=10485760;for(let e=t.length-1;e>=0&&n+t[e].length<=r;e--)n+=t[e].length,i.unshift(t[e]);const a=new Blob(i,{type:"text/plain;charset=utf-8"}),o=new File([a],"log.text",{type:"text/plain"}),s=`QNLog_Miku_${Ye()}_${this.mikuFingerprint}`;console.debug(`miku upload log path: ${s}.txt`);200===(yield Ze({action:"https://up-z0.qiniup.com",name:s,format:"txt",file:o})).status?yield this.db.clear():e&&this.uploadDBLog(!1)}catch(t){console.log("upload log error",t),e&&this.uploadDBLog(!1)}}))}checkErrorNUpload(){return i(this,void 0,void 0,(function*(){let e=yield this.db.getAll(f);const t=/fatal/;for(let i=e.length-1;i>=e.length-10&&i>=0;i--){const n=e[i].toString();if(t.test(n)){yield this.uploadDBLog(!1);break}}yield this.db.clear()}))}getMikuFingerprint(){return i(this,void 0,void 0,(function*(){const e=yield ze.load();return(yield e.get()).visitorId}))}isDisabled(e){return He[this.level]<He[e]}log(e,t){if(this.isDisabled("log"))return;const i=Ye(),n=`${i} %cLOG-QNRTPLAYER`;console.log(n,"color: #66ccff; font-weight: bold;",e),this.insertDBLog("log",i,e),lt(i,"log",e,t)}debug(e,t){if(this.isDisabled("debug"))return;const i=Ye(),n=`${i} %cDEBUG-QNRTPLAYER`;console.debug(n,"color: #A28148; font-weight: bold;",e),lt(i,"debug",e,t)}warning(e,t){if(this.isDisabled("warning"))return;const i=Ye(),n=`${i} %cWARNING-QNRTPLAYER`;console.warn(n,"color: #E44F44; font-weight: bold;",e),this.insertDBLog("warning",i,e),lt(i,"warning",e,t)}error(e,t){if(this.isDisabled("error"))return;const i=Ye(),n=`${i} %cERROR-QNRTPLAYER`;console.error(n,"color: #EF4149; font-weight: bold;",e),this.insertDBLog("error",i,e),lt(i,"error",e,t)}fatal(e,t){if(this.isDisabled("error"))return;const i=Ye(),n=`${i} %cERROR-QNRTPLAYER`;console.error(n,"color: #EF4149; font-weight: bold;",e),this.insertDBLog("fatal",i,e),lt(i,"error",e,t)}}("log");function Ke(e){return("0"+e.toString(16)).substr(-2)}function $e(e=5){const t=new Uint8Array((e||40)/2);return window.crypto.getRandomValues(t),Array.from(t,Ke).join("")}function qe(e,t,i=!1){try{return i?JSON.stringify(e,null,2):JSON.stringify(e)}catch(e){return Je.warning(`json stringify error: ${qe(e,t)}`,t),"stringify error"}}function Qe(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}class et extends Error{constructor(){super(...arguments),this.name="TimeoutError"}}function tt(e,t){return new Promise(((i,n)=>{setTimeout((()=>n(new et(t+" timeout"))),e)}))}function it(){}function nt(e){var t;const i=[],n=/\b(?:\d{1,3}\.){3}\d{1,3}\b/g,r=e.split("\n").filter((e=>e.startsWith("a=candidate")));for(let e of r){const r=e.match(n)||[];i.push(null!==(t=r[0])&&void 0!==t?t:"")}return i}function rt(e){return"number"!=typeof e||isNaN(e)?-1:e}function at(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function ot(){let e=it,t=it;return{promise:new Promise(((i,n)=>{e=i,t=n})),resolve:e,reject:t}}new s;const st={},ct=()=>{var e;const t=$e(30);return(null===(e=Object.keys(st||{}))||void 0===e?void 0:e.some((e=>e===t)))?ct():t},dt=(e,t,i)=>{st[i].emit(e,t)},lt=(e,t,i,n)=>{const r={time:e,level:t,msg:i,id:$e(8)};dt("log",r,n)},ut=(e,t)=>{dt("error",e,t)},ht=(e,t)=>{dt("freezeing",e,t)};class pt extends Error{constructor(){super(...arguments),this.name="QNRTPlayerError"}}const mt=(e,t)=>{ut({code:20001,errorType:"networkError",msg:e},t),Je.fatal(e,t)},ft=(e,t)=>{ut({code:20003,errorType:"playStreamNotExist",msg:e},t),Je.fatal(e,t)},gt=(e,t)=>{ut({code:20004,errorType:"playRequestFailed",msg:e},t),Je.fatal(e,t)},vt=(e,t)=>{ut({code:20005,errorType:"descriptionError",msg:e},t),Je.fatal(e,t)},wt=(e,t)=>{ut({code:20006,errorType:"connectFailed",msg:e},t),Je.fatal(e,t)},yt=(e,t)=>{ut({code:30001,errorType:"rtcNotSupport",msg:e},t),Je.warning(e,t)};let bt=!0,_t=!0;function St(e,t,i){const n=e.match(t);return n&&n.length>=i&&parseInt(n[i],10)}function Tt(e,t,i){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,r=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return r.apply(this,arguments);const a=e=>{const t=i(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,a),r.apply(this,[e,a])};const a=n.removeEventListener;n.removeEventListener=function(e,i){if(e!==t||!this._eventMap||!this._eventMap[t])return a.apply(this,arguments);if(!this._eventMap[t].has(i))return a.apply(this,arguments);const n=this._eventMap[t].get(i);return this._eventMap[t].delete(i),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,a.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function kt(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(bt=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Ct(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(_t=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Et(){if("object"==typeof window){if(bt)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Rt(e,t){_t&&console.warn(e+" is deprecated, please use "+t+" instead.")}function xt(e){return"[object Object]"===Object.prototype.toString.call(e)}function Pt(e){return xt(e)?Object.keys(e).reduce((function(t,i){const n=xt(e[i]),r=n?Pt(e[i]):e[i],a=n&&!Object.keys(r).length;return void 0===r||a?t:Object.assign(t,{[i]:r})}),{}):e}function At(e,t,i){t&&!i.has(t.id)&&(i.set(t.id,t),Object.keys(t).forEach((n=>{n.endsWith("Id")?At(e,e.get(t[n]),i):n.endsWith("Ids")&&t[n].forEach((t=>{At(e,e.get(t),i)}))})))}function It(e,t,i){const n=i?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;const a=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&a.push(e)})),a.forEach((t=>{e.forEach((i=>{i.type===n&&i.trackId===t.id&&At(e,i,r)}))})),r}const Dt=Et;function Lt(e,t){const i=e&&e.navigator;if(!i.mediaDevices)return;const n=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((i=>{if("require"===i||"advanced"===i||"mediaSource"===i)return;const n="object"==typeof e[i]?e[i]:{ideal:e[i]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);const r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];let e={};"number"==typeof n.ideal?(e[r("min",i)]=n.ideal,t.optional.push(e),e={},e[r("max",i)]=n.ideal,t.optional.push(e)):(e[r("",i)]=n.ideal,t.optional.push(e))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",i)]=n.exact):["min","max"].forEach((e=>{void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,i)]=n[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},r=function(e,r){if(t.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"==typeof e.video){let a=e.video.facingMode;a=a&&("object"==typeof a?a:{ideal:a});const o=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||o)){let t;if(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?t=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(t=["front"]),t)return i.mediaDevices.enumerateDevices().then((i=>{let o=(i=i.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!o&&i.length&&t.includes("back")&&(o=i[i.length-1]),o&&(e.video.deviceId=a.exact?{exact:o.deviceId}:{ideal:o.deviceId}),e.video=n(e.video),Dt("chrome: "+JSON.stringify(e)),r(e)}))}e.video=n(e.video)}return Dt("chrome: "+JSON.stringify(e)),r(e)},a=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(i.getUserMedia=function(e,t,n){r(e,(e=>{i.webkitGetUserMedia(e,t,(e=>{n&&n(a(e))}))}))}.bind(i),i.mediaDevices.getUserMedia){const e=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(t){return r(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(a(e))))))}}}function Ot(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Mt(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(i=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===i.track.id)):{track:i.track};const r=new Event("track");r.track=i.track,r.receiver=n,r.transceiver={receiver:n},r.streams=[t.stream],this.dispatchEvent(r)})),t.stream.getTracks().forEach((i=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===i.id)):{track:i};const r=new Event("track");r.track=i,r.receiver=n,r.transceiver={receiver:n},r.streams=[t.stream],this.dispatchEvent(r)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Tt(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function Bt(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){let r=i.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Nt(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,n]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const r=function(e){const t={};return e.result().forEach((e=>{const i={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{i[t]=e.stat(t)})),t[i.id]=i})),t},a=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const n=function(e){i(a(r(e)))};return t.apply(this,[n,e])}return new Promise(((e,i)=>{t.apply(this,[function(t){e(a(r(t)))},i])})).then(i,n)}}function Ft(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>It(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Tt(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>It(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,i,n;return this.getSenders().forEach((i=>{i.track===e&&(t?n=!0:t=i)})),this.getReceivers().forEach((t=>(t.track===e&&(i?n=!0:i=t),t.track===e))),n||t&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function jt(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){if(!i)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const n=t.apply(this,arguments);return this._shimmedLocalStreams[i.id]?-1===this._shimmedLocalStreams[i.id].indexOf(n)&&this._shimmedLocalStreams[i.id].push(n):this._shimmedLocalStreams[i.id]=[i,n],n};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();i.apply(this,arguments);const n=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(n)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const i=this._shimmedLocalStreams[t].indexOf(e);-1!==i&&this._shimmedLocalStreams[t].splice(i,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),r.apply(this,arguments)}}function zt(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return jt(e);const i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=i.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}n.apply(this,[t])};const r=e.RTCPeerConnection.prototype.removeStream;function a(e,t){let i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(r.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:i})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,i){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const r=this._streams[i.id];if(r)r.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const n=new e.MediaStream([t]);this._streams[i.id]=n,this._reverseStreams[n.id]=i,this.addStream(n)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?i.apply(this,[t=>{const i=a(this,t);e[0].apply(null,[i])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):i.apply(this,arguments).then((e=>a(this,e)))}};e.RTCPeerConnection.prototype[t]=n[t]}));const o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(n.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:i})}(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};const s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=s.get.apply(this);return""===e.type?e:a(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((i=>{this._streams[i].getTracks().find((t=>e.track===t))&&(t=this._streams[i])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Vt(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}))}function Gt(e,t){Tt(e,"negotiationneeded",(e=>{const i=e.target;if(!(t.version<72||i.getConfiguration&&"plan-b"===i.getConfiguration().sdpSemantics)||"stable"===i.signalingState)return e}))}var Ut=Object.freeze({__proto__:null,shimMediaStream:Ot,shimOnTrack:Mt,shimGetSendersWithDtmf:Bt,shimGetStats:Nt,shimSenderReceiverGetStats:Ft,shimAddTrackRemoveTrackWithNative:jt,shimAddTrackRemoveTrack:zt,shimPeerConnection:Vt,fixNegotiationNeeded:Gt,shimGetUserMedia:Lt,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(i){return t(i).then((t=>{const n=i.video&&i.video.width,r=i.video&&i.video.height,a=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:a||3}},n&&(i.video.mandatory.maxWidth=n),r&&(i.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(i)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});var Wt=o((function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var i=t.splitSections(e);return i&&i[0]},t.getMediaSections=function(e){var i=t.splitSections(e);return i.shift(),i},t.matchPrefix=function(e,i){return t.splitLines(e).filter((function(e){return 0===e.indexOf(i)}))},t.parseCandidate=function(e){for(var t,i={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":i.relatedAddress=t[n+1];break;case"rport":i.relatedPort=parseInt(t[n+1],10);break;case"tcptype":i.tcpType=t[n+1];break;case"ufrag":i.ufrag=t[n+1],i.usernameFragment=t[n+1];break;default:i[t[n]]=t[n+1]}return i},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),i={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.channels=3===t.length?parseInt(t[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var i=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==i?"/"+i:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,i={},n=e.substr(e.indexOf(" ")+1).split(";"),r=0;r<n.length;r++)i[(t=n[r].trim().split("="))[0].trim()]=t[1];return i},t.writeFmtp=function(e){var t="",i=e.payloadType;if(void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)})),t+="a=fmtp:"+i+" "+n.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+i+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),i={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(i.attribute=e.substr(t+1,n-t-1),i.value=e.substr(n+1)):i.attribute=e.substr(t+1),i},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var i=t.matchPrefix(e,"a=mid:")[0];if(i)return i.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,i){return{role:"auto",fingerprints:t.matchPrefix(e+i,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var i="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){i+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),i},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,i){return t.matchPrefix(e+i,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,i){var n=t.matchPrefix(e+i,"a=ice-ufrag:")[0],r=t.matchPrefix(e+i,"a=ice-pwd:")[0];return n&&r?{usernameFragment:n.substr(12),password:r.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=t.splitLines(e)[0].split(" "),r=3;r<n.length;r++){var a=n[r],o=t.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(o){var s=t.parseRtpMap(o),c=t.matchPrefix(e,"a=fmtp:"+a+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(t.parseRtcpFb),i.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){i.headerExtensions.push(t.parseExtmap(e))})),i},t.writeRtpDescription=function(e,i){var n="";n+="m="+e+" ",n+=i.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=i.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",i.codecs.forEach((function(e){n+=t.writeRtpMap(e),n+=t.writeFmtp(e),n+=t.writeRtcpFb(e)}));var r=0;return i.codecs.forEach((function(e){e.maxptime>r&&(r=e.maxptime)})),r>0&&(n+="a=maxptime:"+r+"\r\n"),n+="a=rtcp-mux\r\n",i.headerExtensions&&i.headerExtensions.forEach((function(e){n+=t.writeExtmap(e)})),n},t.parseRtpEncodingParameters=function(e){var i,n=[],r=t.parseRtpParameters(e),a=-1!==r.fecMechanisms.indexOf("RED"),o=-1!==r.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,d=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));d.length>0&&d[0].length>1&&d[0][0]===c&&(i=d[0][1]),r.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&i&&(t.rtx={ssrc:i}),n.push(t),a&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&c&&n.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=l}))),n},t.parseRtcpParameters=function(e){var i={},n=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(i.cname=n.value,i.ssrc=n.ssrc);var r=t.matchPrefix(e,"a=rtcp-rsize");i.reducedSize=r.length>0,i.compound=0===r.length;var a=t.matchPrefix(e,"a=rtcp-mux");return i.mux=a.length>0,i},t.parseMsid=function(e){var i,n=t.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(i=n[0].substr(7).split(" "))[0],track:i[1]};var r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return r.length>0?{stream:(i=r[0].value.split(" "))[0],track:i[1]}:void 0},t.parseSctpDescription=function(e){var i,n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");r.length>0&&(i=parseInt(r[0].substr(19),10)),isNaN(i)&&(i=65536);var a=t.matchPrefix(e,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substr(12),10),protocol:n.fmt,maxMessageSize:i};if(t.matchPrefix(e,"a=sctpmap:").length>0){var o=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(o[0],10),protocol:o[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){var i=[];return i="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&i.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,i,n){var r=void 0!==i?i:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+r+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,i,n,r){var a=t.writeRtpDescription(e.kind,i);if(a+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),a+="a=mid:"+e.mid+"\r\n",e.direction?a+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var o="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n";a+="a="+o,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),a},t.getDirection=function(e,i){for(var n=t.splitLines(e),r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substr(2)}return i?t.getDirection(i):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var i=t.splitLines(e)[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(e){var i=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var i=t.splitLines(e),n=0;n<i.length;n++)if(i[n].length<2||"="!==i[n].charAt(1))return!1;return!0},e.exports=t}));function Zt(e,t,i,n,r){var a=Wt.writeRtpDescription(e.kind,t);if(a+=Wt.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=Wt.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":r||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var o=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=o;var s="msid:"+(n?n.id:"-")+" "+o+"\r\n";a+="a="+s,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+Wt.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+Wt.localCName+"\r\n"),a}function Ht(e,t){var i={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var i=0;i<t.length;i++)if(t[i].payloadType===e||t[i].preferredPayloadType===e)return t[i]},r=function(e,t,i,r){var a=n(e.parameters.apt,i),o=n(t.parameters.apt,r);return a&&o&&a.name.toLowerCase()===o.name.toLowerCase()};return e.codecs.forEach((function(n){for(var a=0;a<t.codecs.length;a++){var o=t.codecs[a];if(n.name.toLowerCase()===o.name.toLowerCase()&&n.clockRate===o.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&o.parameters.apt&&!r(n,o,e.codecs,t.codecs))continue;(o=JSON.parse(JSON.stringify(o))).numChannels=Math.min(n.numChannels,o.numChannels),i.codecs.push(o),o.rtcpFeedback=o.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var r=t.headerExtensions[n];if(e.uri===r.uri){i.headerExtensions.push(r);break}}})),i}function Xt(e,t,i){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(i)}function Yt(e,t){var i=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return i||e.addRemoteCandidate(t),!i}function Jt(e,t){var i=new Error(t);return i.name=e,i.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],i}var Kt=function(e,t){function i(t,i){i.addTrack(t),i.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function n(t,i,n,r){var a=new Event("track");a.track=i,a.receiver=n,a.transceiver={receiver:n},a.streams=r,e.setTimeout((function(){t._dispatchEvent("track",a)}))}var r=function(i){var n=this,r=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){n[e]=r[e].bind(r)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",i=JSON.parse(JSON.stringify(i||{})),this.usingBundle="max-bundle"===i.bundlePolicy,"negotiate"===i.rtcpMuxPolicy)throw Jt("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(i.rtcpMuxPolicy||(i.rtcpMuxPolicy="require"),i.iceTransportPolicy){case"all":case"relay":break;default:i.iceTransportPolicy="all"}switch(i.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:i.bundlePolicy="balanced"}if(i.iceServers=function(e,t){var i=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var r="string"==typeof n;return r&&(n=[n]),n=n.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||i?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(i=!0,!0)})),delete e.url,e.urls=r?n[0]:n,!!n.length}}))}(i.iceServers||[],t),this._iceGatherers=[],i.iceCandidatePoolSize)for(var a=i.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:i.iceServers,gatherPolicy:i.iceTransportPolicy}));else i.iceCandidatePoolSize=0;this._config=i,this.transceivers=[],this._sdpSessionId=Wt.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(r.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(r.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),r.prototype.onicecandidate=null,r.prototype.onaddstream=null,r.prototype.ontrack=null,r.prototype.onremovestream=null,r.prototype.onsignalingstatechange=null,r.prototype.oniceconnectionstatechange=null,r.prototype.onconnectionstatechange=null,r.prototype.onicegatheringstatechange=null,r.prototype.onnegotiationneeded=null,r.prototype.ondatachannel=null,r.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},r.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},r.prototype.getConfiguration=function(){return this._config},r.prototype.getLocalStreams=function(){return this.localStreams},r.prototype.getRemoteStreams=function(){return this.remoteStreams},r.prototype._createTransceiver=function(e,t){var i=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&i)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var r=this._createIceAndDtlsTransports();n.iceTransport=r.iceTransport,n.dtlsTransport=r.dtlsTransport}return t||this.transceivers.push(n),n},r.prototype.addTrack=function(t,i){if(this._isClosed)throw Jt("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find((function(e){return e.track===t})))throw Jt("InvalidAccessError","Track already exists.");for(var r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==t.kind||(n=this.transceivers[r]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(i)&&this.localStreams.push(i),n.track=t,n.stream=i,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},r.prototype.addStream=function(e){var i=this;if(t>=15025)e.getTracks().forEach((function(t){i.addTrack(t,e)}));else{var n=e.clone();e.getTracks().forEach((function(e,t){var i=n.getTracks()[t];e.addEventListener("enabled",(function(e){i.enabled=e.enabled}))})),n.getTracks().forEach((function(e){i.addTrack(e,n)}))}},r.prototype.removeTrack=function(t){if(this._isClosed)throw Jt("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var i=this.transceivers.find((function(e){return e.rtpSender===t}));if(!i)throw Jt("InvalidAccessError","Sender was not created by this connection.");var n=i.stream;i.rtpSender.stop(),i.rtpSender=null,i.track=null,i.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},r.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var i=t.getSenders().find((function(t){return t.track===e}));i&&t.removeTrack(i)}))},r.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},r.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},r.prototype._createIceGatherer=function(t,i){var n=this;if(i&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var r=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(r,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var i=!e.candidate||0===Object.keys(e.candidate).length;r.state=i?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},r.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),r},r.prototype._gather=function(t,i){var n=this,r=this.transceivers[i].iceGatherer;if(!r.onlocalcandidate){var a=this.transceivers[i].bufferedCandidateEvents;this.transceivers[i].bufferedCandidateEvents=null,r.removeEventListener("localcandidate",this.transceivers[i].bufferCandidates),r.onlocalcandidate=function(e){if(!(n.usingBundle&&i>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:i};var o=e.candidate,s=!o||0===Object.keys(o).length;if(s)"new"!==r.state&&"gathering"!==r.state||(r.state="completed");else{"new"===r.state&&(r.state="gathering"),o.component=1,o.ufrag=r.getLocalParameters().usernameFragment;var c=Wt.writeCandidate(o);a.candidate=Object.assign(a.candidate,Wt.parseCandidate(c)),a.candidate.candidate=c,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var d=Wt.getMediaSections(n._localDescription.sdp);d[a.candidate.sdpMLineIndex]+=s?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",n._localDescription.sdp=Wt.getDescription(n._localDescription.sdp)+d.join("");var l=n.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),s||n._dispatchEvent("icecandidate",a),l&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},e.setTimeout((function(){a.forEach((function(e){r.onlocalcandidate(e)}))}),0)}},r.prototype._createIceAndDtlsTransports=function(){var t=this,i=new e.RTCIceTransport(null);i.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(i);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:i,dtlsTransport:n}},r.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var i=this.transceivers[e].iceTransport;i&&(delete i.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},r.prototype._transceive=function(e,i,n){var r=Ht(e.localCapabilities,e.remoteCapabilities);i&&e.rtpSender&&(r.encodings=e.sendEncodingParameters,r.rtcp={cname:Wt.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(r.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(r)),n&&e.rtpReceiver&&r.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?r.encodings=e.recvEncodingParameters:r.encodings=[{}],r.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(r.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(r.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(r))},r.prototype.setLocalDescription=function(e){var t,i,n=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(Jt("TypeError",'Unsupported type "'+e.type+'"'));if(!Xt("setLocalDescription",e.type,n.signalingState)||n._isClosed)return Promise.reject(Jt("InvalidStateError","Can not set local "+e.type+" in state "+n.signalingState));if("offer"===e.type)t=Wt.splitSections(e.sdp),i=t.shift(),t.forEach((function(e,t){var i=Wt.parseRtpParameters(e);n.transceivers[t].localCapabilities=i})),n.transceivers.forEach((function(e,t){n._gather(e.mid,t)}));else if("answer"===e.type){t=Wt.splitSections(n._remoteDescription.sdp),i=t.shift();var r=Wt.matchPrefix(i,"a=ice-lite").length>0;t.forEach((function(e,t){var a=n.transceivers[t],o=a.iceGatherer,s=a.iceTransport,c=a.dtlsTransport,d=a.localCapabilities,l=a.remoteCapabilities;if(!(Wt.isRejected(e)&&0===Wt.matchPrefix(e,"a=bundle-only").length)&&!a.rejected){var u=Wt.getIceParameters(e,i),h=Wt.getDtlsParameters(e,i);r&&(h.role="server"),n.usingBundle&&0!==t||(n._gather(a.mid,t),"new"===s.state&&s.start(o,u,r?"controlling":"controlled"),"new"===c.state&&c.start(h));var p=Ht(d,l);n._transceive(a,p.codecs.length>0,!1)}}))}return n._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?n._updateSignalingState("have-local-offer"):n._updateSignalingState("stable"),Promise.resolve()},r.prototype.setRemoteDescription=function(r){var a=this;if(-1===["offer","answer"].indexOf(r.type))return Promise.reject(Jt("TypeError",'Unsupported type "'+r.type+'"'));if(!Xt("setRemoteDescription",r.type,a.signalingState)||a._isClosed)return Promise.reject(Jt("InvalidStateError","Can not set remote "+r.type+" in state "+a.signalingState));var o={};a.remoteStreams.forEach((function(e){o[e.id]=e}));var s=[],c=Wt.splitSections(r.sdp),d=c.shift(),l=Wt.matchPrefix(d,"a=ice-lite").length>0,u=Wt.matchPrefix(d,"a=group:BUNDLE ").length>0;a.usingBundle=u;var h=Wt.matchPrefix(d,"a=ice-options:")[0];return a.canTrickleIceCandidates=!!h&&h.substr(14).split(" ").indexOf("trickle")>=0,c.forEach((function(n,c){var h=Wt.splitLines(n),p=Wt.getKind(n),m=Wt.isRejected(n)&&0===Wt.matchPrefix(n,"a=bundle-only").length,f=h[0].substr(2).split(" ")[2],g=Wt.getDirection(n,d),v=Wt.parseMsid(n),w=Wt.getMid(n)||Wt.generateIdentifier();if(m||"application"===p&&("DTLS/SCTP"===f||"UDP/DTLS/SCTP"===f))a.transceivers[c]={mid:w,kind:p,protocol:f,rejected:!0};else{var y,b,_,S,T,k,C,E,R;!m&&a.transceivers[c]&&a.transceivers[c].rejected&&(a.transceivers[c]=a._createTransceiver(p,!0));var x,P,A=Wt.parseRtpParameters(n);m||(x=Wt.getIceParameters(n,d),(P=Wt.getDtlsParameters(n,d)).role="client"),C=Wt.parseRtpEncodingParameters(n);var I=Wt.parseRtcpParameters(n),D=Wt.matchPrefix(n,"a=end-of-candidates",d).length>0,L=Wt.matchPrefix(n,"a=candidate:").map((function(e){return Wt.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===r.type||"answer"===r.type)&&!m&&u&&c>0&&a.transceivers[c]&&(a._disposeIceAndDtlsTransports(c),a.transceivers[c].iceGatherer=a.transceivers[0].iceGatherer,a.transceivers[c].iceTransport=a.transceivers[0].iceTransport,a.transceivers[c].dtlsTransport=a.transceivers[0].dtlsTransport,a.transceivers[c].rtpSender&&a.transceivers[c].rtpSender.setTransport(a.transceivers[0].dtlsTransport),a.transceivers[c].rtpReceiver&&a.transceivers[c].rtpReceiver.setTransport(a.transceivers[0].dtlsTransport)),"offer"!==r.type||m){if("answer"===r.type&&!m){b=(y=a.transceivers[c]).iceGatherer,_=y.iceTransport,S=y.dtlsTransport,T=y.rtpReceiver,k=y.sendEncodingParameters,E=y.localCapabilities,a.transceivers[c].recvEncodingParameters=C,a.transceivers[c].remoteCapabilities=A,a.transceivers[c].rtcpParameters=I,L.length&&"new"===_.state&&(!l&&!D||u&&0!==c?L.forEach((function(e){Yt(y.iceTransport,e)})):_.setRemoteCandidates(L)),u&&0!==c||("new"===_.state&&_.start(b,x,"controlling"),"new"===S.state&&S.start(P)),!Ht(y.localCapabilities,y.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&y.sendEncodingParameters[0].rtx&&delete y.sendEncodingParameters[0].rtx,a._transceive(y,"sendrecv"===g||"recvonly"===g,"sendrecv"===g||"sendonly"===g),!T||"sendrecv"!==g&&"sendonly"!==g?delete y.rtpReceiver:(R=T.track,v?(o[v.stream]||(o[v.stream]=new e.MediaStream),i(R,o[v.stream]),s.push([R,T,o[v.stream]])):(o.default||(o.default=new e.MediaStream),i(R,o.default),s.push([R,T,o.default])))}}else{(y=a.transceivers[c]||a._createTransceiver(p)).mid=w,y.iceGatherer||(y.iceGatherer=a._createIceGatherer(c,u)),L.length&&"new"===y.iceTransport.state&&(!D||u&&0!==c?L.forEach((function(e){Yt(y.iceTransport,e)})):y.iceTransport.setRemoteCandidates(L)),E=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(E.codecs=E.codecs.filter((function(e){return"rtx"!==e.name}))),k=y.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var O,M=!1;if("sendrecv"===g||"sendonly"===g){if(M=!y.rtpReceiver,T=y.rtpReceiver||new e.RTCRtpReceiver(y.dtlsTransport,p),M)R=T.track,v&&"-"===v.stream||(v?(o[v.stream]||(o[v.stream]=new e.MediaStream,Object.defineProperty(o[v.stream],"id",{get:function(){return v.stream}})),Object.defineProperty(R,"id",{get:function(){return v.track}}),O=o[v.stream]):(o.default||(o.default=new e.MediaStream),O=o.default)),O&&(i(R,O),y.associatedRemoteMediaStreams.push(O)),s.push([R,T,O])}else y.rtpReceiver&&y.rtpReceiver.track&&(y.associatedRemoteMediaStreams.forEach((function(t){var i=t.getTracks().find((function(e){return e.id===y.rtpReceiver.track.id}));i&&function(t,i){i.removeTrack(t),i.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(i,t)})),y.associatedRemoteMediaStreams=[]);y.localCapabilities=E,y.remoteCapabilities=A,y.rtpReceiver=T,y.rtcpParameters=I,y.sendEncodingParameters=k,y.recvEncodingParameters=C,a._transceive(a.transceivers[c],!1,M)}}})),void 0===a._dtlsRole&&(a._dtlsRole="offer"===r.type?"active":"passive"),a._remoteDescription={type:r.type,sdp:r.sdp},"offer"===r.type?a._updateSignalingState("have-remote-offer"):a._updateSignalingState("stable"),Object.keys(o).forEach((function(t){var i=o[t];if(i.getTracks().length){if(-1===a.remoteStreams.indexOf(i)){a.remoteStreams.push(i);var r=new Event("addstream");r.stream=i,e.setTimeout((function(){a._dispatchEvent("addstream",r)}))}s.forEach((function(e){var t=e[0],r=e[1];i.id===e[2].id&&n(a,t,r,[i])}))}})),s.forEach((function(e){e[2]||n(a,e[0],e[1],[])})),e.setTimeout((function(){a&&a.transceivers&&a.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},r.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},r.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},r.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},r.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var i=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",i)}},r.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var i=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",i)}},r.prototype.createOffer=function(){var i=this;if(i._isClosed)return Promise.reject(Jt("InvalidStateError","Can not call createOffer after close"));var n=i.transceivers.filter((function(e){return"audio"===e.kind})).length,r=i.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(n=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(r=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(i.transceivers.forEach((function(e){"audio"===e.kind?--n<0&&(e.wantReceive=!1):"video"===e.kind&&--r<0&&(e.wantReceive=!1)}));n>0||r>0;)n>0&&(i._createTransceiver("audio"),n--),r>0&&(i._createTransceiver("video"),r--);var o=Wt.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.transceivers.forEach((function(n,r){var a=n.track,o=n.kind,s=n.mid||Wt.generateIdentifier();n.mid=s,n.iceGatherer||(n.iceGatherer=i._createIceGatherer(r,i.usingBundle));var c=e.RTCRtpSender.getCapabilities(o);t<15019&&(c.codecs=c.codecs.filter((function(e){return"rtx"!==e.name}))),c.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),n.remoteCapabilities&&n.remoteCapabilities.codecs&&n.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),c.headerExtensions.forEach((function(e){(n.remoteCapabilities&&n.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var d=n.sendEncodingParameters||[{ssrc:1001*(2*r+1)}];a&&t>=15019&&"video"===o&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),n.wantReceive&&(n.rtpReceiver=new e.RTCRtpReceiver(n.dtlsTransport,o)),n.localCapabilities=c,n.sendEncodingParameters=d})),"max-compat"!==i._config.bundlePolicy&&(o+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),o+="a=ice-options:trickle\r\n",i.transceivers.forEach((function(e,t){o+=Zt(e,e.localCapabilities,"offer",e.stream,i._dtlsRole),o+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===i.iceGatheringState||0!==t&&i.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,o+="a="+Wt.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(o+="a=end-of-candidates\r\n"))}));var s=new e.RTCSessionDescription({type:"offer",sdp:o});return Promise.resolve(s)},r.prototype.createAnswer=function(){var i=this;if(i._isClosed)return Promise.reject(Jt("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==i.signalingState&&"have-local-pranswer"!==i.signalingState)return Promise.reject(Jt("InvalidStateError","Can not call createAnswer in signalingState "+i.signalingState));var n=Wt.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.usingBundle&&(n+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),n+="a=ice-options:trickle\r\n";var r=Wt.getMediaSections(i._remoteDescription.sdp).length;i.transceivers.forEach((function(e,a){if(!(a+1>r)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?n+="m=application 0 DTLS/SCTP 5000\r\n":n+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?n+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(n+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(n+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var o;if(e.stream)"audio"===e.kind?o=e.stream.getAudioTracks()[0]:"video"===e.kind&&(o=e.stream.getVideoTracks()[0]),o&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var s=Ht(e.localCapabilities,e.remoteCapabilities);!s.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,n+=Zt(e,s,"answer",e.stream,i._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(n+="a=rtcp-rsize\r\n")}}));var a=new e.RTCSessionDescription({type:"answer",sdp:n});return Promise.resolve(a)},r.prototype.addIceCandidate=function(e){var t,i=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(n,r){if(!i._remoteDescription)return r(Jt("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var o=0;o<i.transceivers.length;o++)if(i.transceivers[o].mid===e.sdpMid){a=o;break}var s=i.transceivers[a];if(!s)return r(Jt("OperationError","Can not add ICE candidate"));if(s.rejected)return n();var c=Object.keys(e.candidate).length>0?Wt.parseCandidate(e.candidate):{};if("tcp"===c.protocol&&(0===c.port||9===c.port))return n();if(c.component&&1!==c.component)return n();if((0===a||a>0&&s.iceTransport!==i.transceivers[0].iceTransport)&&!Yt(s.iceTransport,c))return r(Jt("OperationError","Can not add ICE candidate"));var d=e.candidate.trim();0===d.indexOf("a=")&&(d=d.substr(2)),(t=Wt.getMediaSections(i._remoteDescription.sdp))[a]+="a="+(c.type?d:"end-of-candidates")+"\r\n",i._remoteDescription.sdp=Wt.getDescription(i._remoteDescription.sdp)+t.join("")}else for(var l=0;l<i.transceivers.length&&(i.transceivers[l].rejected||(i.transceivers[l].iceTransport.addRemoteCandidate({}),(t=Wt.getMediaSections(i._remoteDescription.sdp))[l]+="a=end-of-candidates\r\n",i._remoteDescription.sdp=Wt.getDescription(i._remoteDescription.sdp)+t.join(""),!i.usingBundle));l++);n()}))},r.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var i=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?i=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(i=e.rtpReceiver)})),!i)throw Jt("InvalidAccessError","Invalid selector.");return i.getStats()}var n=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&n.push(e[t].getStats())}))})),Promise.all(n).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var i=e[t];if(i&&i.prototype&&i.prototype.getStats){var n=i.prototype.getStats;i.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(i){var n;e[i].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[i]).type]||n.type,t.set(i,e[i])})),t}))}}}));var a=["createOffer","createAnswer"];return a.forEach((function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(a=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),r};function $t(e){const t=e&&e.navigator,i=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return i(e).catch((e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e))))}}function qt(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function Qt(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const i=new Event("enabled");i.enabled=e,this.dispatchEvent(i)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const i=Kt(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e){let t=!1;return(e=JSON.parse(JSON.stringify(e))).filter((e=>{if(e&&(e.urls||e.url)){let i=e.urls||e.url;e.url&&!e.urls&&Rt("RTCIceServer.url","RTCIceServer.urls");const n="string"==typeof i;return n&&(i=[i]),i=i.filter((e=>{if(0===e.indexOf("stun:"))return!1;const i=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return i&&!t?(t=!0,!0):i&&!t})),delete e.url,e.urls=n?i[0]:i,!!i.length}}))}(e.iceServers,t.version),Et("ICE servers after filtering:",e.iceServers)),new i(e)},e.RTCPeerConnection.prototype=i.prototype}function ei(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var ti=Object.freeze({__proto__:null,shimPeerConnection:Qt,shimReplaceTrack:ei,shimGetUserMedia:$t,shimGetDisplayMedia:qt});function ii(e,t){const i=e&&e.navigator,n=e&&e.MediaStreamTrack;if(i.getUserMedia=function(e,t,n){Rt("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const e=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])},t=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(i){return"object"==typeof i&&"object"==typeof i.audio&&(i=JSON.parse(JSON.stringify(i)),e(i.audio,"autoGainControl","mozAutoGainControl"),e(i.audio,"noiseSuppression","mozNoiseSuppression")),t(i)},n&&n.prototype.getSettings){const t=n.prototype.getSettings;n.prototype.getSettings=function(){const i=t.apply(this,arguments);return e(i,"mozAutoGainControl","autoGainControl"),e(i,"mozNoiseSuppression","noiseSuppression"),i}}if(n&&n.prototype.applyConstraints){const t=n.prototype.applyConstraints;n.prototype.applyConstraints=function(i){return"audio"===this.kind&&"object"==typeof i&&(i=JSON.parse(JSON.stringify(i)),e(i,"autoGainControl","mozAutoGainControl"),e(i,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[i])}}}}function ni(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ri(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}));const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,a]=arguments;return n.apply(this,[e||null]).then((e=>{if(t.version<53&&!r)try{e.forEach((e=>{e.type=i[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,n)=>{e.set(n,Object.assign({},t,{type:i[t.type]||t.type}))}))}return e})).then(r,a)}}function ai(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function oi(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Tt(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function si(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){Rt("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function ci(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function di(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],i=e&&"sendEncodings"in e;i&&e.sendEncodings.forEach((e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const n=t.apply(this,arguments);if(i){const{sender:t}=n,i=t.getParameters();(!("encodings"in i)||1===i.encodings.length&&0===Object.keys(i.encodings[0]).length)&&(i.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(i).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return n})}function li(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function ui(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function hi(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var pi=Object.freeze({__proto__:null,shimOnTrack:ni,shimPeerConnection:ri,shimSenderGetStats:ai,shimReceiverGetStats:oi,shimRemoveStream:si,shimRTCDataChannel:ci,shimAddTransceiver:di,shimGetParameters:li,shimCreateOffer:ui,shimCreateAnswer:hi,shimGetUserMedia:ii,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===i.video?i.video={mediaSource:t}:i.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(i)})}});function mi(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((i=>t.call(this,i,e))),e.getVideoTracks().forEach((i=>t.call(this,i,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,...i){return i&&i.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const i=e.getTracks();this.getSenders().forEach((e=>{i.includes(e.track)&&this.removeTrack(e)}))})}}function fi(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const i=new Event("addstream");i.stream=t,e.dispatchEvent(i)}))}),t.apply(e,arguments)}}}function gi(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,i=t.createOffer,n=t.createAnswer,r=t.setLocalDescription,a=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r};let s=function(e,t,i){const n=r.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n};t.setLocalDescription=s,s=function(e,t,i){const n=a.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.setRemoteDescription=s,s=function(e,t,i){const n=o.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.addIceCandidate=s}function vi(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,i=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>i(wi(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,i,n){t.mediaDevices.getUserMedia(e).then(i,n)}.bind(t))}function wi(e){return e&&void 0!==e.video?Object.assign({},e,{video:Pt(e.video)}):e}function yi(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,i){if(e&&e.iceServers){const t=[];for(let i=0;i<e.iceServers.length;i++){let n=e.iceServers[i];!n.hasOwnProperty("urls")&&n.hasOwnProperty("url")?(Rt("RTCIceServer.url","RTCIceServer.urls"),n=JSON.parse(JSON.stringify(n)),n.urls=n.url,delete n.url,t.push(n)):t.push(e.iceServers[i])}e.iceServers=t}return new t(e,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function bi(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function _i(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const i=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveVideo||i||this.addTransceiver("video")}return t.apply(this,arguments)}}function Si(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Ti=Object.freeze({__proto__:null,shimLocalStreamsAPI:mi,shimRemoteStreamsAPI:fi,shimCallbacksAPI:gi,shimGetUserMedia:vi,shimConstraints:wi,shimRTCIceServerUrls:yi,shimTrackEventTransceiver:bi,shimCreateOfferLegacy:_i,shimAudioContext:Si});function ki(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const i=new t(e),n=Wt.parseCandidate(e.candidate),r=Object.assign(i,n);return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Tt(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function Ci(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=Wt.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=Wt.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const i=parseInt(t[1],10);return i!=i?-1:i}(arguments[0]),i=function(e){let i=65536;return"firefox"===t.browser&&(i=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),i}(e),n=function(e,i){let n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);const r=Wt.matchPrefix(e.sdp,"a=max-message-size:");return r.length>0?n=parseInt(r[0].substr(19),10):"firefox"===t.browser&&-1!==i&&(n=2147483637),n}(arguments[0],e);let r;r=0===i&&0===n?Number.POSITIVE_INFINITY:0===i||0===n?Math.max(i,n):Math.min(i,n);const a={};Object.defineProperty(a,"maxMessageSize",{get:()=>r}),this._sctp=a}return i.apply(this,arguments)}}function Ei(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const i=e.send;e.send=function(){const n=arguments[0],r=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return i.apply(e,arguments)}}const i=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=i.apply(this,arguments);return t(e,this),e},Tt(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function Ri(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const i=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const i=new Event("connectionstatechange",e);t.dispatchEvent(i)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}}))}function xi(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const i=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:i}):t.sdp=i}return i.apply(this,arguments)}}function Pi(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype.addIceCandidate;i&&0!==i.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var Ai=Object.freeze({__proto__:null,shimRTCIceCandidate:ki,shimMaxMessageSize:Ci,shimSendThrowTypeError:Ei,shimConnectionState:Ri,removeExtmapAllowMixed:xi,shimAddIceCandidateNullOrEmpty:Pi});const Ii=function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const i=Et,n=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:i}=e;if(i.mozGetUserMedia)t.browser="firefox",t.version=St(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=St(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(i.mediaDevices&&i.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=St(i.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=St(i.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),r={browserDetails:n,commonShim:Ai,extractVersion:St,disableLog:kt,disableWarnings:Ct};switch(n.browser){case"chrome":if(!Ut||!Vt||!t.shimChrome)return i("Chrome shim is not included in this adapter release."),r;if(null===n.version)return i("Chrome shim can not determine version, not shimming."),r;i("adapter.js shimming chrome."),r.browserShim=Ut,Pi(e,n),Lt(e,n),Ot(e),Vt(e,n),Mt(e),zt(e,n),Bt(e),Nt(e),Ft(e),Gt(e,n),ki(e),Ri(e),Ci(e,n),Ei(e),xi(e,n);break;case"firefox":if(!pi||!ri||!t.shimFirefox)return i("Firefox shim is not included in this adapter release."),r;i("adapter.js shimming firefox."),r.browserShim=pi,Pi(e,n),ii(e,n),ri(e,n),ni(e),si(e),ai(e),oi(e),ci(e),di(e),li(e),ui(e),hi(e),ki(e),Ri(e),Ci(e,n),Ei(e);break;case"edge":if(!ti||!Qt||!t.shimEdge)return i("MS edge shim is not included in this adapter release."),r;i("adapter.js shimming edge."),r.browserShim=ti,$t(e),qt(e),Qt(e,n),ei(e),Ci(e,n),Ei(e);break;case"safari":if(!Ti||!t.shimSafari)return i("Safari shim is not included in this adapter release."),r;i("adapter.js shimming safari."),r.browserShim=Ti,Pi(e,n),yi(e),_i(e),gi(e),mi(e),fi(e),bi(e),vi(e),Si(e),ki(e),Ci(e,n),Ei(e),xi(e,n);break;default:i("Unsupported browser!")}return r}({window:"undefined"==typeof window?void 0:window}),Di={browser:Ii.browserDetails.browser,version:Ii.browserDetails.version,supportsUnifiedPlan:Ii.browserDetails.supportsUnifiedPlan};function Li(e){return i(this,void 0,void 0,(function*(){const t=yield e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});return!!t.sdp&&-1!==t.sdp.toLowerCase().indexOf("h264")}))}function Oi(){return i(this,void 0,void 0,(function*(){console.debug(JSON.stringify(Di));const e=!!window.RTCPeerConnection;if(!e)return{peerConnection:!1,H264:!1,getStats:!1,jitterBufferTarget:!1};const t=new RTCPeerConnection,i=yield Li(t),n=!!t.getStats;const r=function(e){const t=e.addTransceiver("video",{direction:"recvonly"}),i=void 0!==t.receiver.jitterBufferTarget;return t.stop(),i}(t);t.close();const a=new RTCPeerConnection,o=yield Li(a);return a.close(),{peerConnection:e,H264:i||o,getStats:n,jitterBufferTarget:r}}))}var Mi=o((function(e,t){!function(i,n){var r="function",a="undefined",o="object",s="string",c="major",d="model",l="name",u="type",h="vendor",p="version",m="architecture",f="console",g="mobile",v="tablet",w="smarttv",y="wearable",b="embedded",_="Amazon",S="Apple",T="ASUS",k="BlackBerry",C="Browser",E="Chrome",R="Firefox",x="Google",P="Huawei",A="LG",I="Microsoft",D="Motorola",L="Opera",O="Samsung",M="Sharp",B="Sony",N="Xiaomi",F="Zebra",j="Facebook",z="Chromium OS",V="Mac OS",G=" Browser",U=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t},W=function(e,t){return typeof e===s&&-1!==Z(t).indexOf(Z(e))},Z=function(e){return e.toLowerCase()},H=function(e,t){if(typeof e===s)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,500)},X=function(e,t){for(var i,a,s,c,d,l,u=0;u<t.length&&!d;){var h=t[u],p=t[u+1];for(i=a=0;i<h.length&&!d&&h[i];)if(d=h[i++].exec(e))for(s=0;s<p.length;s++)l=d[++a],typeof(c=p[s])===o&&c.length>0?2===c.length?typeof c[1]==r?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==r||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):n:this[c[0]]=l?c[1].call(this,l,c[2]):n:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):n):this[c]=l||n;u+=2}},Y=function(e,t){for(var i in t)if(typeof t[i]===o&&t[i].length>0){for(var r=0;r<t[i].length;r++)if(W(t[i][r],e))return"?"===i?n:i}else if(W(t[i],e))return"?"===i?n:i;return t.hasOwnProperty("*")?t["*"]:e},J={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},K={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,p],[/opios[\/ ]+([\w\.]+)/i],[p,[l,L+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[p,[l,L+" GX"]],[/\bopr\/([\w\.]+)/i],[p,[l,L]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[l,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[p,[l,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,p],[/quark(?:pc)?\/([-\w\.]+)/i],[p,[l,"Quark"]],[/\bddg\/([\w\.]+)/i],[p,[l,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[l,"UC"+C]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[l,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[l,"Smart Lenovo "+C]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+C],p],[/\bfocus\/([\w\.]+)/i],[p,[l,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[l,L+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[l,L+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[l,"MIUI"+G]],[/fxios\/([\w\.-]+)/i],[p,[l,R]],[/\bqihoobrowser\/?([\w\.]*)/i],[p,[l,"360"]],[/\b(qq)\/([\w\.]+)/i],[[l,/(.+)/,"$1Browser"],p],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1"+G],p],[/samsungbrowser\/([\w\.]+)/i],[p,[l,O+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[p,[l,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[l,"Sogou Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[l,p],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[l],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[p,l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,j],p],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[l,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[l,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,E+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[l,"Android "+C]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[p,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],p],[/(wolvic|librewolf)\/([\w\.]+)/i],[l,p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[l,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[l,[p,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[l,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,Z]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,"",Z]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,Z]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[h,O],[u,v]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[d,[h,O],[u,g]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[h,S],[u,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[h,S],[u,v]],[/(macintosh);/i],[d,[h,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[h,M],[u,g]],[/(?:honor)([-\w ]+)[;\)]/i],[d,[h,"Honor"],[u,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[h,P],[u,v]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[h,P],[u,g]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[d,/_/g," "],[h,N],[u,g]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[h,N],[u,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[h,"OPPO"],[u,g]],[/\b(opd2\d{3}a?) bui/i],[d,[h,"OPPO"],[u,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[h,"Vivo"],[u,g]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[h,"Realme"],[u,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[h,D],[u,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[h,D],[u,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[h,A],[u,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[h,A],[u,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[h,"Lenovo"],[u,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[h,"Nokia"],[u,g]],[/(pixel c)\b/i],[d,[h,x],[u,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[h,x],[u,g]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[h,B],[u,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[h,B],[u,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[h,"OnePlus"],[u,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[h,_],[u,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[h,_],[u,g]],[/(playbook);[-\w\),; ]+(rim)/i],[d,h,[u,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[h,k],[u,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[h,T],[u,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[h,T],[u,g]],[/(nexus 9)/i],[d,[h,"HTC"],[u,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[d,/_/g," "],[u,g]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[d,[h,"TCL"],[u,v]],[/(itel) ((\w+))/i],[[h,Z],d,[u,Y,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[h,"Acer"],[u,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[h,"Meizu"],[u,g]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[h,"Ulefone"],[u,g]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[d,[h,"Energizer"],[u,g]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[d,[h,"Cat"],[u,g]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[d,[h,"Smartfren"],[u,g]],[/droid.+; (a(?:015|06[35]|142p?))/i],[d,[h,"Nothing"],[u,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,d,[u,g]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,d,[u,v]],[/(surface duo)/i],[d,[h,I],[u,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[h,"Fairphone"],[u,g]],[/(u304aa)/i],[d,[h,"AT&T"],[u,g]],[/\bsie-(\w*)/i],[d,[h,"Siemens"],[u,g]],[/\b(rct\w+) b/i],[d,[h,"RCA"],[u,v]],[/\b(venue[\d ]{2,7}) b/i],[d,[h,"Dell"],[u,v]],[/\b(q(?:mv|ta)\w+) b/i],[d,[h,"Verizon"],[u,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[h,"Barnes & Noble"],[u,v]],[/\b(tm\d{3}\w+) b/i],[d,[h,"NuVision"],[u,v]],[/\b(k88) b/i],[d,[h,"ZTE"],[u,v]],[/\b(nx\d{3}j) b/i],[d,[h,"ZTE"],[u,g]],[/\b(gen\d{3}) b.+49h/i],[d,[h,"Swiss"],[u,g]],[/\b(zur\d{3}) b/i],[d,[h,"Swiss"],[u,v]],[/\b((zeki)?tb.*\b) b/i],[d,[h,"Zeki"],[u,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],d,[u,v]],[/\b(ns-?\w{0,9}) b/i],[d,[h,"Insignia"],[u,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[h,"NextBook"],[u,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],d,[u,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],d,[u,g]],[/\b(ph-1) /i],[d,[h,"Essential"],[u,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[h,"Envizen"],[u,v]],[/\b(trio[-\w\. ]+) b/i],[d,[h,"MachSpeed"],[u,v]],[/\btu_(1491) b/i],[d,[h,"Rotor"],[u,v]],[/(shield[\w ]+) b/i],[d,[h,"Nvidia"],[u,v]],[/(sprint) (\w+)/i],[h,d,[u,g]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[h,I],[u,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[h,F],[u,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[h,F],[u,g]],[/smart-tv.+(samsung)/i],[h,[u,w]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[h,O],[u,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,A],[u,w]],[/(apple) ?tv/i],[h,[d,S+" TV"],[u,w]],[/crkey/i],[[d,E+"cast"],[h,x],[u,w]],[/droid.+aft(\w+)( bui|\))/i],[d,[h,_],[u,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[h,M],[u,w]],[/(bravia[\w ]+)( bui|\))/i],[d,[h,B],[u,w]],[/(mitv-\w{5}) bui/i],[d,[h,N],[u,w]],[/Hbbtv.*(technisat) (.*);/i],[h,d,[u,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,H],[d,H],[u,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,d,[u,f]],[/droid.+; (shield) bui/i],[d,[h,"Nvidia"],[u,f]],[/(playstation [345portablevi]+)/i],[d,[h,B],[u,f]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[h,I],[u,f]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[d,[h,O],[u,y]],[/((pebble))app/i],[h,d,[u,y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[h,S],[u,y]],[/droid.+; (glass) \d/i],[d,[h,x],[u,y]],[/droid.+; (wt63?0{2,3})\)/i],[d,[h,F],[u,y]],[/droid.+; (glass) \d/i],[d,[h,x],[u,y]],[/(pico) (4|neo3(?: link|pro)?)/i],[h,d,[u,y]],[/; (quest( \d| pro)?)/i],[d,[h,j],[u,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[u,b]],[/(aeobc)\b/i],[d,[h,_],[u,b]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[u,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[u,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[u,g]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[l,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[l,p],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,p],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[l,[p,Y,J]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,Y,J],[l,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,V],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,p],[/\(bb(10);/i],[p,[l,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[l,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[l,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,z],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,p],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,p]]},$=function(e,t){if(typeof e===o&&(t=e,e=n),!(this instanceof $))return new $(e,t).getResult();var f=typeof i!==a&&i.navigator?i.navigator:n,w=e||(f&&f.userAgent?f.userAgent:""),y=f&&f.userAgentData?f.userAgentData:n,b=t?function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i}(K,t):K,_=f&&f.userAgent==w;return this.getBrowser=function(){var e={};return e[l]=n,e[p]=n,X.call(e,w,b.browser),e[c]=function(e){return typeof e===s?e.replace(/[^\d\.]/g,"").split(".")[0]:n}(e[p]),_&&f&&f.brave&&typeof f.brave.isBrave==r&&(e[l]="Brave"),e},this.getCPU=function(){var e={};return e[m]=n,X.call(e,w,b.cpu),e},this.getDevice=function(){var e={};return e[h]=n,e[d]=n,e[u]=n,X.call(e,w,b.device),_&&!e[u]&&y&&y.mobile&&(e[u]=g),_&&"Macintosh"==e[d]&&f&&typeof f.standalone!==a&&f.maxTouchPoints&&f.maxTouchPoints>2&&(e[d]="iPad",e[u]=v),e},this.getEngine=function(){var e={};return e[l]=n,e[p]=n,X.call(e,w,b.engine),e},this.getOS=function(){var e={};return e[l]=n,e[p]=n,X.call(e,w,b.os),_&&!e[l]&&y&&y.platform&&"Unknown"!=y.platform&&(e[l]=y.platform.replace(/chrome os/i,z).replace(/macos/i,V)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return w},this.setUA=function(e){return w=typeof e===s&&e.length>500?H(e,500):e,this},this.setUA(w),this};$.VERSION="1.0.40",$.BROWSER=U([l,p,c]),$.CPU=U([m]),$.DEVICE=U([d,h,u,f,g,w,v,y,b]),$.ENGINE=$.OS=U([l,p]),e.exports&&(t=e.exports=$),t.UAParser=$;var q=typeof i!==a&&(i.jQuery||i.Zepto);if(q&&!q.ua){var Q=new $;q.ua=Q.getResult(),q.ua.get=function(){return Q.getUA()},q.ua.set=function(e){Q.setUA(e);var t=Q.getResult();for(var i in t)q.ua[i]=t[i]}}}("object"==typeof window?window:a)}));const Bi=(new Mi.UAParser).getResult(),Ni={osName:Bi.os.name||"",osVersion:Bi.os.version||"",browserName:Bi.browser.name||"",browserVersion:Bi.browser.version||""},Fi="WeChat"===Bi.browser.name;const ji=(e,t,i,n)=>{const r=t-e,a=n-i;if(r<=0||a<=0)return 0;const o=r/a;return o>1?100:100*o};class zi{constructor(e,t){this.pc=e,this.emitterId=t,this.intervalTimer=null}startReportStats(){this.intervalTimer=setInterval((()=>{let e,t,i=Object.assign({},d);i.videoFrameDecodedList=[],i.videoTotalFreezesDuration=[],this.pc.getStats().then((t=>{e=t})).then((()=>this.calcFreezeing(e,i,500))).then((e=>this.calcFreezeing(e,i,500))).then((e=>this.calcFreezeing(e,i,500))).then((e=>this.calcFreezeing(e,i,500))).then((n=>{t=n;const r=this.calcStatReport(e,t,i);var a,o;a=r,o=this.emitterId,dt("stats",a,o);const s=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(r,["videoPacketLostRate","videoTotalFreezesDuration","videoFrameDecodedList","videoAvgPacketProcessingDelay","videoAvgJitterBufferTargetDelay","videoAvgJitterBufferDelay","videoAvgInterframeDelay","audioAvgInterframeDelay","audioAvgJitterBufferDelay","audioAvgJitterBufferTargetDelay","audioAvgPacketProcessingDelay"]);Je.log(`stats: ${qe(s,this.emitterId)}`,this.emitterId)})).catch((e=>{Je.warning(`pc.getStats error: ${e.toString()}`,this.emitterId)}))}),2e3)}stopReportStats(){this.intervalTimer&&clearInterval(this.intervalTimer)}calcFreezeing(e,t,n){return i(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,n)));const i=yield this.pc.getStats();return i.forEach((i=>{if(!0!==i.isRemote&&"inbound-rtp"===i.type&&("video"===i.kind||"video"===i.mediaType||i.id.toLocaleLowerCase().includes("video"))){const n=e.get(i.id);if(!n)return;t.videoFrameDecodedList.push(i.framesDecoded-n.framesDecoded);const r=i.totalFreezesDuration-n.totalFreezesDuration;t.videoTotalFreezesDuration.push(rt(r))}})),i}))}getRtt(e){if(e)return e.roundTripTime?1e3*e.roundTripTime:e.googRtt?e.googRtt:e.mozRtt?e.mozRtt:void 0}calcStatReport(e,t,i){return t.forEach((n=>{if(!0!==n.isRemote&&("candidate-pair"===n.type&&"succeeded"===n.state&&(t.forEach((e=>{"remote-candidate"===e.type&&e.id===n.remoteCandidateId&&(i.ip=e.ip,i.protocol=e.protocol)})),i.rtt=1e3*n.currentRoundTripTime),"codec"===n.type&&(/^audio\//.test(n.mimeType)?i.audioDecoderName=n.mimeType:/^video\//.test(n.mimeType)&&(i.videoDecoderName=n.mimeType)),"inbound-rtp"===n.type)){if("audio"===n.kind||"audio"===n.mediaType||n.id.toLocaleLowerCase().includes("audio")){const r=e.get(n.id);if(!r)return;const a=n.timestamp-r.timestamp,o=(n.jitterBufferEmittedCount-r.jitterBufferEmittedCount)/a,s=(n.jitterBufferDelay-r.jitterBufferDelay)/a,c=(n.jitterBufferTargetDelay-r.jitterBufferTargetDelay)/a,d=n.totalProcessingDelay?(n.totalProcessingDelay-r.totalProcessingDelay)/a:-1,l=ji(r.packetsLost,n.packetsLost,r.packetsReceived+r.packetsLost,n.packetsReceived+n.packetsLost);i.audioAvgJitterBufferDelay=o?1e3*s/o:-1,i.audioAvgJitterBufferTargetDelay=o?1e3*c/o:-1,i.audioAvgPacketProcessingDelay=-1!==d&&o?1e3*d/o:-1,i.audioPacketReceived=n.packetsReceived-r.packetsReceived,i.audioPacketLostRate=l,i.audioTotalSamplesReceived=n.totalSamplesReceived,i.audioPacketDiscarded=n.packetsDiscarded-r.packetsDiscarded,i.audioPacketLost=n.packetsLost-r.packetsLost,i.audioBytesReceived=n.bytesReceived-r.bytesReceived,i.audioEstimatedPlayoutTimestamp=n.estimatedPlayoutTimestamp,i.audioLastPacketReceivedTimestamp=n.lastPacketReceivedTimestamp,i.audioAvgInterframeDelay=-1,i.audioFps=-1,t.forEach((e=>{if("codec"===e.type&&/^audio\//.test(e.mimeType)){const t=e.clockRate;if(e.sdpFmtpLine){const r=e.sdpFmtpLine.match(/minptime=(\d+)/),a=r?parseInt(r[1]):null;if(i.audioDecoderName=e.mimeType,a)i.audioAvgInterframeDelay=1e3*n.totalSamplesDuration/(n.totalSamplesReceived/(20*t*.001)),i.audioFps=1e3/i.audioAvgInterframeDelay;else if(e.mimeType&&/opus/.test(e.mimeType)){const e=20;i.audioAvgInterframeDelay=1e3*n.totalSamplesDuration/(n.totalSamplesReceived/(t*e*.001)),i.audioFps=1e3/i.audioAvgInterframeDelay}}}})),i.audioBitrate=1e6*Qe(8*(n.bytesReceived-r.bytesReceived)/1e3/a,2),i.lastAudioPacketReceivedTimestamp=n.lastPacketReceivedTimestamp,i.timestamp=n.timestamp}if("video"===n.kind||"video"===n.mediaType||n.id.toLocaleLowerCase().includes("video")){const t=e.get(n.id);if(!t)return;const r=n.timestamp-t.timestamp,a=(n.jitterBufferEmittedCount-t.jitterBufferEmittedCount)/r,o=(n.jitterBufferDelay-t.jitterBufferDelay)/r,s=(n.jitterBufferTargetDelay-t.jitterBufferTargetDelay)/r,c=(n.totalProcessingDelay-t.totalProcessingDelay)/r,d=ji(t.packetsLost,n.packetsLost,t.packetsReceived+t.packetsLost,n.packetsReceived+n.packetsLost);if(i.videoAvgJitterBufferDelay=a?1e3*o/a:-1,i.videoAvgJitterBufferTargetDelay=a?1e3*s/a:-1,i.videoAvgPacketProcessingDelay=a?1e3*c/a:-1,i.videoDroppedFrames=1e3*(n.framesDropped-t.framesDropped)/r,i.videoPacketReceived=n.packetsReceived-t.packetsReceived,i.videoPacketLost=n.packetsLost-t.packetsLost,i.videoPacketLostRate=d,i.videoNackCount=n.nackCount-t.nackCount,i.videoFirCount=n.firCount-t.firCount,i.videoPliCount=n.pliCount-t.pliCount,i.videoFrameDecoded=1e3*(n.framesDecoded-t.framesDecoded)/r,i.videoFrameReceived=1e3*(n.framesReceived-t.framesReceived)/r,i.videoDecodeCostMs=1e3*(n.totalDecodeTime-t.totalDecodeTime)/i.videoFrameDecoded,i.videoKeyFramesDecoded=1e3*(n.keyFramesDecoded-t.keyFramesDecoded)/r,i.videoBytesReceived=n.bytesReceived-t.bytesReceived,i.videoFecPacketReceived=n.fecPacketsReceived-t.fecPacketsReceived,i.videoAvgInterframeDelay=n.framesReceived?1e3*n.totalInterFrameDelay/n.framesReceived:-1,i.videoEstimatedPlayoutTimestamp=n.estimatedPlayoutTimestamp,i.videoLastPacketReceivedTimestamp=n.lastPacketReceivedTimestamp,i.videoBitrate=1e6*Qe(8*(n.bytesReceived-t.bytesReceived)/1e3/r,2),i.lastVideoPacketReceivedTimestamp=n.lastPacketReceivedTimestamp,i.timestamp=n.timestamp,i.constTime=n.timestamp-t.timestamp,n.frameWidth?(i.videoFrameWidth=n.frameWidth,i.videoFrameHeight=n.frameHeight):this.pc.getReceivers().forEach((e=>{"video"===e.track.kind&&(i.videoFrameWidth=e.track.getSettings().width||0,i.videoFrameHeight=e.track.getSettings().height||0)})),n.framesPerSecond)i.videoFps=n.framesPerSecond;else if(n.framesDecoded&&t.framesDecoded){const e=n.framesDecoded-t.framesDecoded,r=(n.timestamp-t.timestamp)/1e3;i.videoFps=Math.floor(e/r)}}}})),i}}function Vi(e,t,i){var n=void 0===t?null:t,r=function(e,t){var i=atob(e);if(t){for(var n=new Uint8Array(i.length),r=0,a=i.length;r<a;++r)n[r]=i.charCodeAt(r);return new TextDecoder("utf-16le").decode(new Uint16Array(n.buffer))}return i}(e,void 0!==i&&i),a=r.indexOf("\n",10)+1,o=r.substring(a)+(n?"//# sourceMappingURL="+n:""),s=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(s)}function Gi(e,t,i){var n;return function(r){return n=n||Vi(e,t,i),new Worker(n,r)}}var Ui=Gi("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIG49ZnVuY3Rpb24obix0LGUscil7cmV0dXJuIG5ldyhlfHwoZT1Qcm9taXNlKSkoKGZ1bmN0aW9uKG8sYSl7ZnVuY3Rpb24gaShuKXt0cnl7YyhyLm5leHQobikpfWNhdGNoKG4pe2Eobil9fWZ1bmN0aW9uIHMobil7dHJ5e2Moci50aHJvdyhuKSl9Y2F0Y2gobil7YShuKX19ZnVuY3Rpb24gYyhuKXt2YXIgdDtuLmRvbmU/byhuLnZhbHVlKToodD1uLnZhbHVlLHQgaW5zdGFuY2VvZiBlP3Q6bmV3IGUoKGZ1bmN0aW9uKG4pe24odCl9KSkpLnRoZW4oaSxzKX1jKChyPXIuYXBwbHkobix0fHxbXSkpLm5leHQoKSl9KSl9O2xldCB0PURhdGUubm93KCk7YWRkRXZlbnRMaXN0ZW5lcigicnRjdHJhbnNmb3JtIiwoZT0+e2NvbnN0IHI9bmV3IFRyYW5zZm9ybVN0cmVhbSh7c3RhcnQoKXt9LGZsdXNoKCl7fSx0cmFuc2Zvcm0oZSxyKXtyZXR1cm4gbih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2UgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSYmKERhdGUubm93KCktdD49MTAwJiZzZWxmLnBvc3RNZXNzYWdlKERhdGUubm93KCktdCksdD1EYXRlLm5vdygpKSxyLmVucXVldWUoZSl9KSl9fSk7ZS50cmFuc2Zvcm1lci5yZWFkYWJsZS5waXBlVGhyb3VnaChyKS5waXBlVG8oZS50cmFuc2Zvcm1lci53cml0YWJsZSl9KSl9KCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXdvcmtlci5qcy5tYXAKCg==","data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyLmpzIiwic291cmNlcyI6W10sInNvdXJjZXNDb250ZW50IjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiJ9",!1);class Wi{static isValid(e){try{return new URL(e),!0}catch(e){return!1}}constructor(e,t,i){this.url=e,this.emitterId=t,this.jitterBuffer=i,this.disposers=[],this.timer=null,this.controller=null,this.pc=this.initPc()}listen(e,t){this.pc.addEventListener(e,t),this.addDisposer((()=>this.pc.removeEventListener(e,t)))}addDisposer(e){this.disposers.push(e)}dispose(){var e,t,i;this.disposers.forEach((e=>e())),this.disposers=[],null===(e=this.videoTrack)||void 0===e||e.stop(),null===(t=this.audioTrack)||void 0===t||t.stop(),this.timer&&clearTimeout(this.timer),null===(i=this.controller)||void 0===i||i.terminate(),this.pc.close()}processReceivedTrack(e){let t=new MediaStream,n=this;return this.listen("track",(r=>i(this,void 0,void 0,(function*(){if("video"===r.track.kind&&!e||"audio"===r.track.kind){switch(r.track.kind){case"video":const e=new MediaStreamTrackProcessor({track:r.track}),i=new MediaStreamTrackGenerator({kind:"video"});let a=Date.now();const o=new TransformStream({transform(e,t){n.controller=t,Date.now()-a>=100&&ht(Date.now()-a,n.emitterId),a=Date.now(),t.enqueue(e)}});e.readable.pipeThrough(o).pipeTo(i.writable).catch((e=>{})),this.videoTrack=i.track,t.addTrack(i);break;case"audio":this.audioTrack=r.track,t.addTrack(r.track)}Je.log(`media stream added ${r.track.kind} track, id: ${r.track.id}`,this.emitterId)}})))),t}transformReceivedTrack(e){const t=this;let n=new MediaStream;return this.listen("track",(r=>i(this,void 0,void 0,(function*(){if("video"===r.track.kind&&!e||"audio"===r.track.kind){switch(r.track.kind){case"video":const e=new Ui;e.onmessage=e=>{ht(e.data,t.emitterId)},this.videoTrack=r.track,r.receiver.transform=new RTCRtpScriptTransform(e,{name:"receiverTransform"});break;case"audio":this.audioTrack=r.track}n.addTrack(r.track),Je.log(`media stream added ${r.track.kind} track, id: ${r.track.id}`,this.emitterId)}})))),n}normalReceivedTrack(e){const t=new MediaStream;return this.listen("track",(i=>{if("video"===i.track.kind&&!e||"audio"===i.track.kind){switch(i.track.kind){case"video":this.videoTrack=i.track;break;case"audio":this.audioTrack=i.track}t.addTrack(i.track),Je.log(`media stream added ${i.track.kind} track, id: ${i.track.id}`,this.emitterId)}})),t}connect(e){return i(this,void 0,void 0,(function*(){this.logEvents();let t=new MediaStream;t="RTCRtpScriptTransform"in window?this.transformReceivedTrack(e):"MediaStreamTrackGenerator"in window?this.processReceivedTrack(e):this.normalReceivedTrack(e),yield Promise.all([this.waitPcConnected(),this.negotiate()]);const i=this.pc.getReceivers();for(let e of i)void 0!==e.jitterBufferTarget&&(e.jitterBufferTarget=this.jitterBuffer);const n=new zi(this.pc,this.emitterId);return n.startReportStats(),this.addDisposer((()=>n.stopReportStats())),t}))}logEvents(){this.listen("negotiationneeded",(()=>{Je.debug("pc.onnegotiationneeded",this.emitterId)})),this.listen("icecandidate",(e=>{Je.debug("pc.onicecandidate: "+qe(e.candidate,this.emitterId),this.emitterId)})),this.listen("iceconnectionstatechange",(()=>{Je.debug("pc.oniceconnectionstatechange: "+this.pc.iceConnectionState,this.emitterId)})),this.listen("icegatheringstatechange",(()=>{Je.debug("pc.onicegatheringstatechange : "+this.pc.iceGatheringState,this.emitterId)})),this.listen("signalingstatechange",(()=>{Je.debug("pc.onsignalingstatechange: "+this.pc.signalingState,this.emitterId)})),this.listen("connectionstatechange",(()=>{Je.debug("pc.onconnectionstatechange: "+this.pc.connectionState,this.emitterId)})),this.listen("track",(e=>{Je.debug(`pc.ontrack: ${e.track.kind}, id: ${e.track.id}`,this.emitterId)}))}waitPcConnected(){const e="connectionState"in this.pc,t=e?"connectionstatechange":"iceconnectionstatechange",i=e?"peer connection":"peer connection ice";return new Promise(((n,r)=>{this.listen(t,(()=>{this.timer&&clearTimeout(this.timer);let t=e?this.pc.connectionState:this.pc.iceConnectionState;"connected"===t?(Je.log(`${i} is connected.`,this.emitterId),n()):"disconnected"===t?(Je.warning(`${i} reconnecting`,this.emitterId),this.timer=setTimeout((()=>{"disconnected"===(e?this.pc.connectionState:this.pc.iceConnectionState)&&(Je.warning(`${i} reconnect timeout`,this.emitterId),wt(`${i} reconnect timeout`,this.emitterId),r(new pt(`${i} reconnect timeout`)))}),5e3)):"failed"===t?(Je.warning(`${i} failed`,this.emitterId),wt(`${i} state error: `+t,this.emitterId),r(new pt(`${i} state error: `+t))):"closed"===t&&(Je.error(`${i} closed.`,this.emitterId),r(new pt(`${i} closed.`)))}))}))}}class Zi extends Wi{constructor(){super(...arguments),this.protocol="WHEP",this.sessionId=void 0,this.ips=[]}static isValid(e){const t=new URL(e);t.search="",t.hash="";const i=t.toString();return/(whep\/)$/.test(i)||/(.whep)$/.test(i)}getSessionId(){return this.sessionId}getIps(){return this.ips}initPc(){const e=new RTCPeerConnection({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",iceTransportPolicy:"all"});return e.addTransceiver("video",{direction:"recvonly"}),e.addTransceiver("audio",{direction:"recvonly"}),e}negotiate(){return i(this,void 0,void 0,(function*(){const e=yield this.pc.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});Je.debug(`whep client offer sdp:\n${e.sdp}`,this.emitterId);try{yield this.pc.setLocalDescription(e)}catch(t){const i="set local sdp error: \n"+e.sdp+"\n"+qe(t,this.emitterId);throw vt(i,this.emitterId),new pt(i)}Je.log("peer connection set local sdp ok.",this.emitterId);const{answer:t,location:n,sessionId:r,ips:a}=yield function(e,t,n){return i(this,void 0,void 0,(function*(){const i={method:"POST",mode:"cors",credentials:"omit",headers:{"Content-Type":"application/sdp"},body:t};let r=null;"AbortController"in window&&(r=new AbortController,i.signal=r.signal);let a=Promise.race([fetch(e,i),tt(g,"fetchSdpAnswer")]).catch((e=>{let t;throw e instanceof et?(null==r||r.abort(),t="fetchSdpAnswer timeout: 8s"):t=`fetchSdpAnswer error: ${e.message}`,mt(t,n),new pt(t)}));const o=yield a;if(201===o.status){const e=yield o.text(),t=o.headers.get("Location");return{answer:e,location:t,sessionId:new URLSearchParams(t).get("whep-session"),ips:nt(e)}}const s=yield o.text();if(500===o.status){const e=s||"Stream not exist or not online";throw ft(e,n),new pt(e)}const c=`Unexpected response code: ${o.status}, msg: ${s}`;throw gt(c,n),new pt(c)}))}(this.url,e.sdp,this.emitterId);this.sessionId=null!=r?r:void 0,this.ips=a,Je.debug(`whep client answer sdp:\n${t}`,this.emitterId),Je.debug(`whep client answer location:\n${n}`,this.emitterId);try{yield this.pc.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:t}))}catch(e){const i="set remote sdp error: \n"+t+"\n"+qe(e,this.emitterId);throw vt(i,this.emitterId),new pt(i)}Je.log("peer connection set remote sdp ok.",this.emitterId);const o=n||this.url;this.addDisposer((()=>{!function(e,t){i(this,void 0,void 0,(function*(){try{const i=yield fetch(e,{method:"DELETE",mode:"cors",credentials:"omit"});i.status>=200&&i.status<300?Je.log("Disconnect stream succeed, endpoint: "+e,t):Je.warning("Disconnect stream failed with status code "+i.status,t)}catch(e){e instanceof Error&&Je.warning("Disconnect stream failed: "+e.message,t)}}))}(o,this.emitterId)}))}))}}const Hi=/[a-zA-Z0-9]{3,7}:\/\/([^/]+)\//;class Xi extends Wi{constructor(){super(...arguments),this.protocol="PiliSRT",this.sessionId=void 0,this.ips=[]}static isValid(e){return Hi.test(e)}initPc(){return new RTCPeerConnection}getSessionId(){return this.sessionId}getIps(){return this.ips}negotiate(){return i(this,void 0,void 0,(function*(){let e;try{e=function(e){const t=Hi.exec(e);if(!t)throw new Error("streamUrl invalid");const i=t[1];let n=location.protocol;"https:"!==n&&"http:"!==n&&(n="http:");return`${n}//${i}${m}`}(this.url)}catch(e){throw Je.error(`stream url is invalid: ${this.url}`,this.emitterId),new pt("stream url is invalid")}let t=yield this.pc.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});Je.debug(`local offer: \n${t.sdp}`,this.emitterId),t=this.mungSDP(t);try{yield this.pc.setLocalDescription(t)}catch(e){const i="set local sdp error: \n"+t.sdp+"\n"+qe(e,this.emitterId);throw vt(i,this.emitterId),new pt(i)}Je.log("peer connection set local sdp ok.",this.emitterId);const n=yield function(e,t,n,r){return i(this,void 0,void 0,(function*(){const i={streamurl:t,clientip:JSON.stringify(Object.assign(Object.assign({},Ni),{SDK_VERSION:v})),sdp:n},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)};let o=null;"AbortController"in window&&(o=new AbortController,a.signal=o.signal);let s=Promise.race([fetch(e,a),tt(g,"pullStreamRequest")]).catch((e=>{let t;throw e instanceof et?(null==o||o.abort(),t="pullStreamRequest timeout: 8s"):t=`pullStreamRequest error: ${e.message}`,mt(t,r),new pt(t)}));const c=yield s;if(200!==c.status){const e=`pullStreamRequest, statusCode error: statusCode: ${c.status}, statusText: ${c.statusText}`;throw mt(e,r),new pt(e)}let d;try{d=yield c.json()}catch(e){const t=`parse response as json error: ${c.text()}`;throw gt(t,r),new pt(t)}if([400,500].includes(d.code))throw gt(d.msg,r),new pt(d.msg);if(403===d.code)throw((e,t)=>{ut({code:20002,errorType:"authFailed",msg:e},t),Je.fatal(e,t)})(d.msg,r),new pt(d.msg);if(404===d.code)throw ft(d.msg,r),new pt(d.msg);if(![0,200].includes(d.code)){const e=`unexpected code: ${d.code}, msg: ${d.msg}`;throw gt(e,r),new pt(e)}return d}))}(e,this.url,t.sdp,this.emitterId);Je.debug(`remote answer, \n${n.sdp}`,this.emitterId);const r=new RTCSessionDescription({type:"answer",sdp:n.sdp});try{yield this.pc.setRemoteDescription(r)}catch(e){const t="set remote sdp error: \n"+r.sdp+"\n"+qe(e,this.emitterId);throw vt(t,this.emitterId),new pt(t)}Je.log("peer connection set remote sdp ok.",this.emitterId),this.sessionId=n.sessionid,this.ips=nt(n.sdp)}))}mungSDP(e){return e}}let Yi=0;class Ji{constructor(e=""){this.playerEmitterId=e,this.connectTask=null,this.JitterBuffer=null}getSessionId(){return this.connectTask instanceof Xi||this.connectTask instanceof Zi?this.connectTask.getSessionId():void 0}getIps(){return this.connectTask instanceof Xi||this.connectTask instanceof Zi?this.connectTask.getIps():void 0}recycleClosedPC(){if(Yi<100)return;Yi=0;let e=document.createElement("img");e.src=window.URL.createObjectURL(new Blob([new ArrayBuffer(1e8)])),e.onerror=function(){window.URL.revokeObjectURL(this.src),e=null}}release(){var e;null===(e=this.connectTask)||void 0===e||e.dispose(),this.connectTask=null,this.recycleClosedPC()}setJitterBuffer(e){this.JitterBuffer=e}pullStream(e,t){if(this.release(),this.connectTask=function(e,t,i){return Zi.isValid(e)?new Zi(e,t,i):Xi.isValid(e)?new Xi(e,t,i):null}(e,this.playerEmitterId,this.JitterBuffer),!this.connectTask)throw Je.error(`stream url is invalid: ${e}`,this.playerEmitterId),new pt("stream url invalid");return Yi++,this.connectTask.connect(t)}}var Ki,$i;!function(e){e.Config="Config",e.PlayerStateChanged="PlayerStateChanged",e.Error="Error",e.VideoStatistics="VideoStatistics",e.AudioStatistics="AudioStatistics"}(Ki||(Ki={})),function(e){e.idle="idle",e.init="init",e.ready="ready",e.playing="playing",e.stop="stop",e.error="error"}($i||($i={}));var qi=o((function(e){var t,i;t=a,i=function(){void 0===Array.isArray&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var e=function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var i=[0,0,0,0];return i[3]+=e[3]+t[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=e[2]+t[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=e[1]+t[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=e[0]+t[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]},t=function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var i=[0,0,0,0];return i[3]+=e[3]*t[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=e[2]*t[3],i[1]+=i[2]>>>16,i[2]&=65535,i[2]+=e[3]*t[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=e[1]*t[3],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=e[2]*t[2],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=e[3]*t[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]},i=function(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])},n=function(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]},r=function(e,t){return[e[0]^t[0],e[1]^t[1]]},a=function(e){return e=r(e,[0,e[0]>>>1]),e=t(e,[4283543511,3981806797]),e=r(e,[0,e[0]>>>1]),e=t(e,[3301882366,444984403]),e=r(e,[0,e[0]>>>1])},o=function(o,s){s=s||0;for(var c=(o=o||"").length%16,d=o.length-c,l=[0,s],u=[0,s],h=[0,0],p=[0,0],m=[2277735313,289559509],f=[1291169091,658871167],g=0;g<d;g+=16)h=[255&o.charCodeAt(g+4)|(255&o.charCodeAt(g+5))<<8|(255&o.charCodeAt(g+6))<<16|(255&o.charCodeAt(g+7))<<24,255&o.charCodeAt(g)|(255&o.charCodeAt(g+1))<<8|(255&o.charCodeAt(g+2))<<16|(255&o.charCodeAt(g+3))<<24],p=[255&o.charCodeAt(g+12)|(255&o.charCodeAt(g+13))<<8|(255&o.charCodeAt(g+14))<<16|(255&o.charCodeAt(g+15))<<24,255&o.charCodeAt(g+8)|(255&o.charCodeAt(g+9))<<8|(255&o.charCodeAt(g+10))<<16|(255&o.charCodeAt(g+11))<<24],h=t(h,m),h=i(h,31),h=t(h,f),l=r(l,h),l=i(l,27),l=e(l,u),l=e(t(l,[0,5]),[0,1390208809]),p=t(p,f),p=i(p,33),p=t(p,m),u=r(u,p),u=i(u,31),u=e(u,l),u=e(t(u,[0,5]),[0,944331445]);switch(h=[0,0],p=[0,0],c){case 15:p=r(p,n([0,o.charCodeAt(g+14)],48));case 14:p=r(p,n([0,o.charCodeAt(g+13)],40));case 13:p=r(p,n([0,o.charCodeAt(g+12)],32));case 12:p=r(p,n([0,o.charCodeAt(g+11)],24));case 11:p=r(p,n([0,o.charCodeAt(g+10)],16));case 10:p=r(p,n([0,o.charCodeAt(g+9)],8));case 9:p=r(p,[0,o.charCodeAt(g+8)]),p=t(p,f),p=i(p,33),p=t(p,m),u=r(u,p);case 8:h=r(h,n([0,o.charCodeAt(g+7)],56));case 7:h=r(h,n([0,o.charCodeAt(g+6)],48));case 6:h=r(h,n([0,o.charCodeAt(g+5)],40));case 5:h=r(h,n([0,o.charCodeAt(g+4)],32));case 4:h=r(h,n([0,o.charCodeAt(g+3)],24));case 3:h=r(h,n([0,o.charCodeAt(g+2)],16));case 2:h=r(h,n([0,o.charCodeAt(g+1)],8));case 1:h=r(h,[0,o.charCodeAt(g)]),h=t(h,m),h=i(h,31),h=t(h,f),l=r(l,h)}return l=r(l,[0,o.length]),u=r(u,[0,o.length]),l=e(l,u),u=e(u,l),l=a(l),u=a(u),l=e(l,u),u=e(u,l),("00000000"+(l[0]>>>0).toString(16)).slice(-8)+("00000000"+(l[1]>>>0).toString(16)).slice(-8)+("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)},s={preprocessor:null,audio:{timeout:1e3,excludeIOS11:!0},fonts:{swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",userDefinedFonts:[],extendedJsFonts:!1},screen:{detectScreenOrientation:!0},plugins:{sortPluginsFor:[/palemoon/i],excludeIE:!1},extraComponents:[],excludes:{enumerateDevices:!0,pixelRatio:!0,doNotTrack:!0,fontsFlash:!0,adBlock:!0},NOT_AVAILABLE:"not available",ERROR:"error",EXCLUDED:"excluded"},c=function(e,t){if(Array.prototype.forEach&&e.forEach===Array.prototype.forEach)e.forEach(t);else if(e.length===+e.length)for(var i=0,n=e.length;i<n;i++)t(e[i],i,e);else for(var r in e)e.hasOwnProperty(r)&&t(e[r],r,e)},d=function(e,t){var i=[];return null==e?i:Array.prototype.map&&e.map===Array.prototype.map?e.map(t):(c(e,(function(e,n,r){i.push(t(e,n,r))})),i)},l=function(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices},u=function(e){var t=[window.screen.width,window.screen.height];return e.screen.detectScreenOrientation&&t.sort().reverse(),t},h=function(e){if(window.screen.availWidth&&window.screen.availHeight){var t=[window.screen.availHeight,window.screen.availWidth];return e.screen.detectScreenOrientation&&t.sort().reverse(),t}return e.NOT_AVAILABLE},p=function(e){if(null==navigator.plugins)return e.NOT_AVAILABLE;for(var t=[],i=0,n=navigator.plugins.length;i<n;i++)navigator.plugins[i]&&t.push(navigator.plugins[i]);return f(e)&&(t=t.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}))),d(t,(function(e){var t=d(e,(function(e){return[e.type,e.suffixes]}));return[e.name,e.description,t]}))},m=function(e){var t=[];return Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window?t=d(["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"],(function(t){try{return new window.ActiveXObject(t),t}catch(t){return e.ERROR}})):t.push(e.NOT_AVAILABLE),navigator.plugins&&(t=t.concat(p(e))),t},f=function(e){for(var t=!1,i=0,n=e.plugins.sortPluginsFor.length;i<n;i++){var r=e.plugins.sortPluginsFor[i];if(navigator.userAgent.match(r)){t=!0;break}}return t},g=function(e){try{return!!window.sessionStorage}catch(t){return e.ERROR}},v=function(e){try{return!!window.localStorage}catch(t){return e.ERROR}},w=function(e){if(M())return e.EXCLUDED;try{return!!window.indexedDB}catch(t){return e.ERROR}},y=function(e){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:e.NOT_AVAILABLE},b=function(e){return navigator.cpuClass||e.NOT_AVAILABLE},_=function(e){return navigator.platform?navigator.platform:e.NOT_AVAILABLE},S=function(e){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:e.NOT_AVAILABLE},T=function(){var e,t=0;void 0!==navigator.maxTouchPoints?t=navigator.maxTouchPoints:void 0!==navigator.msMaxTouchPoints&&(t=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(t){e=!1}return[t,e,"ontouchstart"in window]},k=function(e){var t=[],i=document.createElement("canvas");i.width=2e3,i.height=200,i.style.display="inline";var n=i.getContext("2d");return n.rect(0,0,10,10),n.rect(2,2,6,6),t.push("canvas winding:"+(!1===n.isPointInPath(5,5,"evenodd")?"yes":"no")),n.textBaseline="alphabetic",n.fillStyle="#f60",n.fillRect(125,1,62,20),n.fillStyle="#069",e.dontUseFakeFontInCanvas?n.font="11pt Arial":n.font="11pt no-real-font-123",n.fillText("Cwm fjordbank glyphs vext quiz, 😃",2,15),n.fillStyle="rgba(102, 204, 0, 0.2)",n.font="18pt Arial",n.fillText("Cwm fjordbank glyphs vext quiz, 😃",4,45),n.globalCompositeOperation="multiply",n.fillStyle="rgb(255,0,255)",n.beginPath(),n.arc(50,50,50,0,2*Math.PI,!0),n.closePath(),n.fill(),n.fillStyle="rgb(0,255,255)",n.beginPath(),n.arc(100,50,50,0,2*Math.PI,!0),n.closePath(),n.fill(),n.fillStyle="rgb(255,255,0)",n.beginPath(),n.arc(75,100,50,0,2*Math.PI,!0),n.closePath(),n.fill(),n.fillStyle="rgb(255,0,255)",n.arc(75,75,75,0,2*Math.PI,!0),n.arc(75,75,25,0,2*Math.PI,!0),n.fill("evenodd"),i.toDataURL&&t.push("canvas fp:"+i.toDataURL()),t},C=function(){var e,t=function(t){return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),"["+t[0]+", "+t[1]+"]"};if(!(e=j()))return null;var i=[],n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n);var r=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),n.itemSize=3,n.numItems=3;var a=e.createProgram(),o=e.createShader(e.VERTEX_SHADER);e.shaderSource(o,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),e.compileShader(o);var s=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(s,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),e.compileShader(s),e.attachShader(a,o),e.attachShader(a,s),e.linkProgram(a),e.useProgram(a),a.vertexPosAttrib=e.getAttribLocation(a,"attrVertex"),a.offsetUniform=e.getUniformLocation(a,"uniformOffset"),e.enableVertexAttribArray(a.vertexPosArray),e.vertexAttribPointer(a.vertexPosAttrib,n.itemSize,e.FLOAT,!1,0,0),e.uniform2f(a.offsetUniform,1,1),e.drawArrays(e.TRIANGLE_STRIP,0,n.numItems);try{i.push(e.canvas.toDataURL())}catch(e){}i.push("extensions:"+(e.getSupportedExtensions()||[]).join(";")),i.push("webgl aliased line width range:"+t(e.getParameter(e.ALIASED_LINE_WIDTH_RANGE))),i.push("webgl aliased point size range:"+t(e.getParameter(e.ALIASED_POINT_SIZE_RANGE))),i.push("webgl alpha bits:"+e.getParameter(e.ALPHA_BITS)),i.push("webgl antialiasing:"+(e.getContextAttributes().antialias?"yes":"no")),i.push("webgl blue bits:"+e.getParameter(e.BLUE_BITS)),i.push("webgl depth bits:"+e.getParameter(e.DEPTH_BITS)),i.push("webgl green bits:"+e.getParameter(e.GREEN_BITS)),i.push("webgl max anisotropy:"+function(e){var t=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic");if(t){var i=e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT);return 0===i&&(i=2),i}return null}(e)),i.push("webgl max combined texture image units:"+e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),i.push("webgl max cube map texture size:"+e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE)),i.push("webgl max fragment uniform vectors:"+e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS)),i.push("webgl max render buffer size:"+e.getParameter(e.MAX_RENDERBUFFER_SIZE)),i.push("webgl max texture image units:"+e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),i.push("webgl max texture size:"+e.getParameter(e.MAX_TEXTURE_SIZE)),i.push("webgl max varying vectors:"+e.getParameter(e.MAX_VARYING_VECTORS)),i.push("webgl max vertex attribs:"+e.getParameter(e.MAX_VERTEX_ATTRIBS)),i.push("webgl max vertex texture image units:"+e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),i.push("webgl max vertex uniform vectors:"+e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS)),i.push("webgl max viewport dims:"+t(e.getParameter(e.MAX_VIEWPORT_DIMS))),i.push("webgl red bits:"+e.getParameter(e.RED_BITS)),i.push("webgl renderer:"+e.getParameter(e.RENDERER)),i.push("webgl shading language version:"+e.getParameter(e.SHADING_LANGUAGE_VERSION)),i.push("webgl stencil bits:"+e.getParameter(e.STENCIL_BITS)),i.push("webgl vendor:"+e.getParameter(e.VENDOR)),i.push("webgl version:"+e.getParameter(e.VERSION));try{var d=e.getExtension("WEBGL_debug_renderer_info");d&&(i.push("webgl unmasked vendor:"+e.getParameter(d.UNMASKED_VENDOR_WEBGL)),i.push("webgl unmasked renderer:"+e.getParameter(d.UNMASKED_RENDERER_WEBGL)))}catch(e){}return e.getShaderPrecisionFormat?(c(["FLOAT","INT"],(function(t){c(["VERTEX","FRAGMENT"],(function(n){c(["HIGH","MEDIUM","LOW"],(function(r){c(["precision","rangeMin","rangeMax"],(function(a){var o=e.getShaderPrecisionFormat(e[n+"_SHADER"],e[r+"_"+t])[a];"precision"!==a&&(a="precision "+a);var s=["webgl ",n.toLowerCase()," shader ",r.toLowerCase()," ",t.toLowerCase()," ",a,":",o].join("");i.push(s)}))}))}))})),z(e),i):(z(e),i)},E=function(){try{var e=j(),t=e.getExtension("WEBGL_debug_renderer_info"),i=e.getParameter(t.UNMASKED_VENDOR_WEBGL)+"~"+e.getParameter(t.UNMASKED_RENDERER_WEBGL);return z(e),i}catch(e){return null}},R=function(){var e=document.createElement("div");e.innerHTML="&nbsp;",e.className="adsbox";var t=!1;try{document.body.appendChild(e),t=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(e)}catch(e){t=!1}return t},x=function(){if(void 0!==navigator.languages)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch(e){return!0}return!1},P=function(){return window.screen.width<window.screen.availWidth||window.screen.height<window.screen.availHeight},A=function(){var e,t=navigator.userAgent.toLowerCase(),i=navigator.oscpu,n=navigator.platform.toLowerCase();if(e=t.indexOf("windows phone")>=0?"Windows Phone":t.indexOf("windows")>=0||t.indexOf("win16")>=0||t.indexOf("win32")>=0||t.indexOf("win64")>=0||t.indexOf("win95")>=0||t.indexOf("win98")>=0||t.indexOf("winnt")>=0||t.indexOf("wow64")>=0?"Windows":t.indexOf("android")>=0?"Android":t.indexOf("linux")>=0||t.indexOf("cros")>=0||t.indexOf("x11")>=0?"Linux":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0||t.indexOf("ipod")>=0||t.indexOf("crios")>=0||t.indexOf("fxios")>=0?"iOS":t.indexOf("macintosh")>=0||t.indexOf("mac_powerpc)")>=0?"Mac":"Other",("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&"Windows"!==e&&"Windows Phone"!==e&&"Android"!==e&&"iOS"!==e&&"Other"!==e&&-1===t.indexOf("cros"))return!0;if(void 0!==i){if((i=i.toLowerCase()).indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e)return!0;if(i.indexOf("linux")>=0&&"Linux"!==e&&"Android"!==e)return!0;if(i.indexOf("mac")>=0&&"Mac"!==e&&"iOS"!==e)return!0;if((-1===i.indexOf("win")&&-1===i.indexOf("linux")&&-1===i.indexOf("mac"))!=("Other"===e))return!0}return n.indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e||(n.indexOf("linux")>=0||n.indexOf("android")>=0||n.indexOf("pike")>=0)&&"Linux"!==e&&"Android"!==e||(n.indexOf("mac")>=0||n.indexOf("ipad")>=0||n.indexOf("ipod")>=0||n.indexOf("iphone")>=0)&&"Mac"!==e&&"iOS"!==e||!(n.indexOf("arm")>=0&&"Windows Phone"===e)&&!(n.indexOf("pike")>=0&&t.indexOf("opera mini")>=0)&&((n.indexOf("win")<0&&n.indexOf("linux")<0&&n.indexOf("mac")<0&&n.indexOf("iphone")<0&&n.indexOf("ipad")<0&&n.indexOf("ipod")<0)!=("Other"===e)||void 0===navigator.plugins&&"Windows"!==e&&"Windows Phone"!==e)},I=function(){var e,t=navigator.userAgent.toLowerCase(),i=navigator.productSub;if(t.indexOf("edge/")>=0||t.indexOf("iemobile/")>=0)return!1;if(t.indexOf("opera mini")>=0)return!1;if(("Chrome"==(e=t.indexOf("firefox/")>=0?"Firefox":t.indexOf("opera/")>=0||t.indexOf(" opr/")>=0?"Opera":t.indexOf("chrome/")>=0?"Chrome":t.indexOf("safari/")>=0?t.indexOf("android 1.")>=0||t.indexOf("android 2.")>=0||t.indexOf("android 3.")>=0||t.indexOf("android 4.")>=0?"AOSP":"Safari":t.indexOf("trident/")>=0?"Internet Explorer":"Other")||"Safari"===e||"Opera"===e)&&"20030107"!==i)return!0;var n,r=eval.toString().length;if(37===r&&"Safari"!==e&&"Firefox"!==e&&"Other"!==e)return!0;if(39===r&&"Internet Explorer"!==e&&"Other"!==e)return!0;if(33===r&&"Chrome"!==e&&"AOSP"!==e&&"Opera"!==e&&"Other"!==e)return!0;try{throw"a"}catch(e){try{e.toSource(),n=!0}catch(e){n=!1}}return n&&"Firefox"!==e&&"Other"!==e},D=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},L=function(){if(!D())return!1;var e=j(),t=!!window.WebGLRenderingContext&&!!e;return z(e),t},O=function(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},M=function(){return("msWriteProfilerMark"in window)+("msLaunchUri"in navigator)+("msSaveBlob"in navigator)>=2},B=function(){return void 0!==window.swfobject},N=function(){return window.swfobject.hasFlashPlayerVersion("9.0.0")},F=function(e,t){var i="___fp_swf_loaded";window[i]=function(t){e(t)};var n=t.fonts.swfContainerId;!function(e){var t=document.createElement("div");t.setAttribute("id",e.fonts.swfContainerId),document.body.appendChild(t)}();var r={onReady:i};window.swfobject.embedSWF(t.fonts.swfPath,n,"1","1","9.0.0",!1,r,{allowScriptAccess:"always",menu:"false"},{})},j=function(){var e=document.createElement("canvas"),t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return t||(t=null),t},z=function(e){var t=e.getExtension("WEBGL_lose_context");null!=t&&t.loseContext()},V=[{key:"userAgent",getData:function(e){e(navigator.userAgent)}},{key:"webdriver",getData:function(e,t){e(null==navigator.webdriver?t.NOT_AVAILABLE:navigator.webdriver)}},{key:"language",getData:function(e,t){e(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||t.NOT_AVAILABLE)}},{key:"colorDepth",getData:function(e,t){e(window.screen.colorDepth||t.NOT_AVAILABLE)}},{key:"deviceMemory",getData:function(e,t){e(navigator.deviceMemory||t.NOT_AVAILABLE)}},{key:"pixelRatio",getData:function(e,t){e(window.devicePixelRatio||t.NOT_AVAILABLE)}},{key:"hardwareConcurrency",getData:function(e,t){e(y(t))}},{key:"screenResolution",getData:function(e,t){e(u(t))}},{key:"availableScreenResolution",getData:function(e,t){e(h(t))}},{key:"timezoneOffset",getData:function(e){e((new Date).getTimezoneOffset())}},{key:"timezone",getData:function(e,t){window.Intl&&window.Intl.DateTimeFormat?e((new window.Intl.DateTimeFormat).resolvedOptions().timeZone||t.NOT_AVAILABLE):e(t.NOT_AVAILABLE)}},{key:"sessionStorage",getData:function(e,t){e(g(t))}},{key:"localStorage",getData:function(e,t){e(v(t))}},{key:"indexedDb",getData:function(e,t){e(w(t))}},{key:"addBehavior",getData:function(e){e(!!window.HTMLElement.prototype.addBehavior)}},{key:"openDatabase",getData:function(e){e(!!window.openDatabase)}},{key:"cpuClass",getData:function(e,t){e(b(t))}},{key:"platform",getData:function(e,t){e(_(t))}},{key:"doNotTrack",getData:function(e,t){e(S(t))}},{key:"plugins",getData:function(e,t){O()?t.plugins.excludeIE?e(t.EXCLUDED):e(m(t)):e(p(t))}},{key:"canvas",getData:function(e,t){D()?e(k(t)):e(t.NOT_AVAILABLE)}},{key:"webgl",getData:function(e,t){L()?e(C()):e(t.NOT_AVAILABLE)}},{key:"webglVendorAndRenderer",getData:function(e){L()?e(E()):e()}},{key:"adBlock",getData:function(e){e(R())}},{key:"hasLiedLanguages",getData:function(e){e(x())}},{key:"hasLiedResolution",getData:function(e){e(P())}},{key:"hasLiedOs",getData:function(e){e(A())}},{key:"hasLiedBrowser",getData:function(e){e(I())}},{key:"touchSupport",getData:function(e){e(T())}},{key:"fonts",getData:function(e,t){var i=["monospace","sans-serif","serif"],n=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"];t.fonts.extendedJsFonts&&(n=n.concat(["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"])),n=(n=n.concat(t.fonts.userDefinedFonts)).filter((function(e,t){return n.indexOf(e)===t}));var r=document.getElementsByTagName("body")[0],a=document.createElement("div"),o=document.createElement("div"),s={},c={},d=function(){var e=document.createElement("span");return e.style.position="absolute",e.style.left="-9999px",e.style.fontSize="72px",e.style.fontStyle="normal",e.style.fontWeight="normal",e.style.letterSpacing="normal",e.style.lineBreak="auto",e.style.lineHeight="normal",e.style.textTransform="none",e.style.textAlign="left",e.style.textDecoration="none",e.style.textShadow="none",e.style.whiteSpace="normal",e.style.wordBreak="normal",e.style.wordSpacing="normal",e.innerHTML="mmmmmmmmmmlli",e},l=function(e,t){var i=d();return i.style.fontFamily="'"+e+"',"+t,i},u=function(e){for(var t=!1,n=0;n<i.length;n++)if(t=e[n].offsetWidth!==s[i[n]]||e[n].offsetHeight!==c[i[n]])return t;return t},h=function(){for(var e=[],t=0,n=i.length;t<n;t++){var r=d();r.style.fontFamily=i[t],a.appendChild(r),e.push(r)}return e}();r.appendChild(a);for(var p=0,m=i.length;p<m;p++)s[i[p]]=h[p].offsetWidth,c[i[p]]=h[p].offsetHeight;var f=function(){for(var e={},t=0,r=n.length;t<r;t++){for(var a=[],s=0,c=i.length;s<c;s++){var d=l(n[t],i[s]);o.appendChild(d),a.push(d)}e[n[t]]=a}return e}();r.appendChild(o);for(var g=[],v=0,w=n.length;v<w;v++)u(f[n[v]])&&g.push(n[v]);r.removeChild(o),r.removeChild(a),e(g)},pauseBefore:!0},{key:"fontsFlash",getData:function(e,t){return B()?N()?t.fonts.swfPath?void F((function(t){e(t)}),t):e("missing options.fonts.swfPath"):e("flash not installed"):e("swf object not loaded")},pauseBefore:!0},{key:"audio",getData:function(e,t){var i=t.audio;if(i.excludeIOS11&&navigator.userAgent.match(/OS 11.+Version\/11.+Safari/))return e(t.EXCLUDED);var n=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(null==n)return e(t.NOT_AVAILABLE);var r=new n(1,44100,44100),a=r.createOscillator();a.type="triangle",a.frequency.setValueAtTime(1e4,r.currentTime);var o=r.createDynamicsCompressor();c([["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]],(function(e){void 0!==o[e[0]]&&"function"==typeof o[e[0]].setValueAtTime&&o[e[0]].setValueAtTime(e[1],r.currentTime)})),a.connect(o),o.connect(r.destination),a.start(0),r.startRendering();var s=setTimeout((function(){return console.warn('Audio fingerprint timed out. Please report bug at https://github.com/fingerprintjs/fingerprintjs with your user agent: "'+navigator.userAgent+'".'),r.oncomplete=function(){},r=null,e("audioTimeout")}),i.timeout);r.oncomplete=function(t){var i;try{clearTimeout(s),i=t.renderedBuffer.getChannelData(0).slice(4500,5e3).reduce((function(e,t){return e+Math.abs(t)}),0).toString(),a.disconnect(),o.disconnect()}catch(t){return void e(t)}e(i)}}},{key:"enumerateDevices",getData:function(e,t){if(!l())return e(t.NOT_AVAILABLE);navigator.mediaDevices.enumerateDevices().then((function(t){e(t.map((function(e){return"id="+e.deviceId+";gid="+e.groupId+";"+e.kind+";"+e.label})))})).catch((function(t){e(t)}))}}],G=function(e){throw new Error("'new Fingerprint()' is deprecated, see https://github.com/fingerprintjs/fingerprintjs#upgrade-guide-from-182-to-200")};return G.get=function(e,t){t?e||(e={}):(t=e,e={}),function(e,t){if(null==t)return e;var i,n;for(n in t)null==(i=t[n])||Object.prototype.hasOwnProperty.call(e,n)||(e[n]=i)}(e,s),e.components=e.extraComponents.concat(V);var i={data:[],addPreprocessedComponent:function(t,n){"function"==typeof e.preprocessor&&(n=e.preprocessor(t,n)),i.data.push({key:t,value:n})}},n=-1,r=function(a){if((n+=1)>=e.components.length)t(i.data);else{var o=e.components[n];if(e.excludes[o.key])r(!1);else{if(!a&&o.pauseBefore)return n-=1,void setTimeout((function(){r(!0)}),1);try{o.getData((function(e){i.addPreprocessedComponent(o.key,e),r(!1)}),e)}catch(e){i.addPreprocessedComponent(o.key,String(e)),r(!1)}}}};r(!1)},G.getPromise=function(e){return new Promise((function(t,i){G.get(e,t)}))},G.getV18=function(e,t){return null==t&&(t=e,e={}),G.get(e,(function(i){for(var n=[],r=0;r<i.length;r++){var a=i[r];if(a.value===(e.NOT_AVAILABLE||"not available"))n.push({key:a.key,value:"unknown"});else if("plugins"===a.key)n.push({key:"plugins",value:d(a.value,(function(e){var t=d(e[2],(function(e){return e.join?e.join("~"):e})).join(",");return[e[0],e[1],t].join("::")}))});else if(-1!==["canvas","webgl"].indexOf(a.key)&&Array.isArray(a.value))n.push({key:a.key,value:a.value.join("~")});else if(-1!==["sessionStorage","localStorage","indexedDb","addBehavior","openDatabase"].indexOf(a.key)){if(!a.value)continue;n.push({key:a.key,value:1})}else a.value?n.push(a.value.join?{key:a.key,value:a.value.join(";")}:a):n.push({key:a.key,value:a.value})}var s=o(d(n,(function(e){return e.value})).join("~~~"),31);t(s,n)}))},G.x64hash128=o,G.VERSION="2.1.4",G},e.exports?e.exports=i():t.exports?t.exports=i():t.Fingerprint2=i()})),Qi=o((function(e){!function(t){function i(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function n(e,t,n,r,a,o){return i((s=i(i(t,e),i(r,o)))<<(c=a)|s>>>32-c,n);var s,c}function r(e,t,i,r,a,o,s){return n(t&i|~t&r,e,t,a,o,s)}function a(e,t,i,r,a,o,s){return n(t&r|i&~r,e,t,a,o,s)}function o(e,t,i,r,a,o,s){return n(t^i^r,e,t,a,o,s)}function s(e,t,i,r,a,o,s){return n(i^(t|~r),e,t,a,o,s)}function c(e,t){var n,c,d,l,u;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var h=1732584193,p=-271733879,m=-1732584194,f=271733878;for(n=0;n<e.length;n+=16)c=h,d=p,l=m,u=f,h=r(h,p,m,f,e[n],7,-680876936),f=r(f,h,p,m,e[n+1],12,-389564586),m=r(m,f,h,p,e[n+2],17,606105819),p=r(p,m,f,h,e[n+3],22,-1044525330),h=r(h,p,m,f,e[n+4],7,-176418897),f=r(f,h,p,m,e[n+5],12,1200080426),m=r(m,f,h,p,e[n+6],17,-1473231341),p=r(p,m,f,h,e[n+7],22,-45705983),h=r(h,p,m,f,e[n+8],7,1770035416),f=r(f,h,p,m,e[n+9],12,-1958414417),m=r(m,f,h,p,e[n+10],17,-42063),p=r(p,m,f,h,e[n+11],22,-1990404162),h=r(h,p,m,f,e[n+12],7,1804603682),f=r(f,h,p,m,e[n+13],12,-40341101),m=r(m,f,h,p,e[n+14],17,-1502002290),h=a(h,p=r(p,m,f,h,e[n+15],22,1236535329),m,f,e[n+1],5,-165796510),f=a(f,h,p,m,e[n+6],9,-1069501632),m=a(m,f,h,p,e[n+11],14,643717713),p=a(p,m,f,h,e[n],20,-373897302),h=a(h,p,m,f,e[n+5],5,-701558691),f=a(f,h,p,m,e[n+10],9,38016083),m=a(m,f,h,p,e[n+15],14,-660478335),p=a(p,m,f,h,e[n+4],20,-405537848),h=a(h,p,m,f,e[n+9],5,568446438),f=a(f,h,p,m,e[n+14],9,-1019803690),m=a(m,f,h,p,e[n+3],14,-187363961),p=a(p,m,f,h,e[n+8],20,1163531501),h=a(h,p,m,f,e[n+13],5,-1444681467),f=a(f,h,p,m,e[n+2],9,-51403784),m=a(m,f,h,p,e[n+7],14,1735328473),h=o(h,p=a(p,m,f,h,e[n+12],20,-1926607734),m,f,e[n+5],4,-378558),f=o(f,h,p,m,e[n+8],11,-2022574463),m=o(m,f,h,p,e[n+11],16,1839030562),p=o(p,m,f,h,e[n+14],23,-35309556),h=o(h,p,m,f,e[n+1],4,-1530992060),f=o(f,h,p,m,e[n+4],11,1272893353),m=o(m,f,h,p,e[n+7],16,-155497632),p=o(p,m,f,h,e[n+10],23,-1094730640),h=o(h,p,m,f,e[n+13],4,681279174),f=o(f,h,p,m,e[n],11,-358537222),m=o(m,f,h,p,e[n+3],16,-722521979),p=o(p,m,f,h,e[n+6],23,76029189),h=o(h,p,m,f,e[n+9],4,-640364487),f=o(f,h,p,m,e[n+12],11,-421815835),m=o(m,f,h,p,e[n+15],16,530742520),h=s(h,p=o(p,m,f,h,e[n+2],23,-995338651),m,f,e[n],6,-198630844),f=s(f,h,p,m,e[n+7],10,1126891415),m=s(m,f,h,p,e[n+14],15,-1416354905),p=s(p,m,f,h,e[n+5],21,-57434055),h=s(h,p,m,f,e[n+12],6,1700485571),f=s(f,h,p,m,e[n+3],10,-1894986606),m=s(m,f,h,p,e[n+10],15,-1051523),p=s(p,m,f,h,e[n+1],21,-2054922799),h=s(h,p,m,f,e[n+8],6,1873313359),f=s(f,h,p,m,e[n+15],10,-30611744),m=s(m,f,h,p,e[n+6],15,-1560198380),p=s(p,m,f,h,e[n+13],21,1309151649),h=s(h,p,m,f,e[n+4],6,-145523070),f=s(f,h,p,m,e[n+11],10,-1120210379),m=s(m,f,h,p,e[n+2],15,718787259),p=s(p,m,f,h,e[n+9],21,-343485551),h=i(h,c),p=i(p,d),m=i(m,l),f=i(f,u);return[h,p,m,f]}function d(e){var t,i="",n=32*e.length;for(t=0;t<n;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function l(e){var t,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function u(e){var t,i,n="0123456789abcdef",r="";for(i=0;i<e.length;i+=1)t=e.charCodeAt(i),r+=n.charAt(t>>>4&15)+n.charAt(15&t);return r}function h(e){return unescape(encodeURIComponent(e))}function p(e){return function(e){return d(c(l(e),8*e.length))}(h(e))}function m(e,t){return function(e,t){var i,n,r=l(e),a=[],o=[];for(a[15]=o[15]=void 0,r.length>16&&(r=c(r,8*e.length)),i=0;i<16;i+=1)a[i]=909522486^r[i],o[i]=1549556828^r[i];return n=c(a.concat(l(t)),512+8*t.length),d(c(o.concat(n),640))}(h(e),h(t))}function f(e,t,i){return t?i?m(t,e):u(m(t,e)):i?p(e):u(p(e))}e.exports?e.exports=f:t.md5=f}(a)}));class en extends s{constructor(e="TaskQueue"){super(),this.name=e,this._closed=!1,this._busy=!1,this._queue=[]}close(){this._closed=!0}push(e,t){return new Promise(((i,n)=>{this._queue.push({method:e,data:t,resolve:i,reject:n}),this._handlePendingCommands()}))}_handlePendingCommands(){if(this._busy)return;const e=this._queue,t=e[0];t&&(this._busy=!0,this._handleCommand(t).then((()=>{this._busy=!1,e.shift(),this._handlePendingCommands()})))}_handleCommand(e){if(this._closed)return e.reject(new pt(`${this.name} taskQueue closed`)),Promise.resolve();const t={promise:null};return this.emit("exec",e,t),Promise.resolve().then((()=>t.promise)).then((t=>{this._closed?e.reject(new pt(`${this.name} taskQueue closed`)):e.resolve(t)})).catch((t=>{e.reject(t)}))}}
/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function tn(e){let t=e.length;for(;--t>=0;)e[t]=0}const nn=256,rn=286,an=30,on=15,sn=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),cn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),dn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ln=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),un=new Array(576);tn(un);const hn=new Array(60);tn(hn);const pn=new Array(512);tn(pn);const mn=new Array(256);tn(mn);const fn=new Array(29);tn(fn);const gn=new Array(an);function vn(e,t,i,n,r){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=e&&e.length}let wn,yn,bn;function _n(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}tn(gn);const Sn=e=>e<256?pn[e]:pn[256+(e>>>7)],Tn=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},kn=(e,t,i)=>{e.bi_valid>16-i?(e.bi_buf|=t<<e.bi_valid&65535,Tn(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=i-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)},Cn=(e,t,i)=>{kn(e,i[2*t],i[2*t+1])},En=(e,t)=>{let i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1},Rn=(e,t,i)=>{const n=new Array(16);let r,a,o=0;for(r=1;r<=on;r++)o=o+i[r-1]<<1,n[r]=o;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=En(n[t]++,t))}},xn=e=>{let t;for(t=0;t<rn;t++)e.dyn_ltree[2*t]=0;for(t=0;t<an;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Pn=e=>{e.bi_valid>8?Tn(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},An=(e,t,i,n)=>{const r=2*t,a=2*i;return e[r]<e[a]||e[r]===e[a]&&n[t]<=n[i]},In=(e,t,i)=>{const n=e.heap[i];let r=i<<1;for(;r<=e.heap_len&&(r<e.heap_len&&An(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!An(t,n,e.heap[r],e.depth));)e.heap[i]=e.heap[r],i=r,r<<=1;e.heap[i]=n},Dn=(e,t,i)=>{let n,r,a,o,s=0;if(0!==e.sym_next)do{n=255&e.pending_buf[e.sym_buf+s++],n+=(255&e.pending_buf[e.sym_buf+s++])<<8,r=e.pending_buf[e.sym_buf+s++],0===n?Cn(e,r,t):(a=mn[r],Cn(e,a+nn+1,t),o=sn[a],0!==o&&(r-=fn[a],kn(e,r,o)),n--,a=Sn(n),Cn(e,a,i),o=cn[a],0!==o&&(n-=gn[a],kn(e,n,o)))}while(s<e.sym_next);Cn(e,256,t)},Ln=(e,t)=>{const i=t.dyn_tree,n=t.stat_desc.static_tree,r=t.stat_desc.has_stree,a=t.stat_desc.elems;let o,s,c,d=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<a;o++)0!==i[2*o]?(e.heap[++e.heap_len]=d=o,e.depth[o]=0):i[2*o+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=d<2?++d:0,i[2*c]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=n[2*c+1]);for(t.max_code=d,o=e.heap_len>>1;o>=1;o--)In(e,i,o);c=a;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],In(e,i,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,i[2*c]=i[2*o]+i[2*s],e.depth[c]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,i[2*o+1]=i[2*s+1]=c,e.heap[1]=c++,In(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const i=t.dyn_tree,n=t.max_code,r=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,c=t.stat_desc.max_length;let d,l,u,h,p,m,f=0;for(h=0;h<=on;h++)e.bl_count[h]=0;for(i[2*e.heap[e.heap_max]+1]=0,d=e.heap_max+1;d<573;d++)l=e.heap[d],h=i[2*i[2*l+1]+1]+1,h>c&&(h=c,f++),i[2*l+1]=h,l>n||(e.bl_count[h]++,p=0,l>=s&&(p=o[l-s]),m=i[2*l],e.opt_len+=m*(h+p),a&&(e.static_len+=m*(r[2*l+1]+p)));if(0!==f){do{for(h=c-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,f-=2}while(f>0);for(h=c;0!==h;h--)for(l=e.bl_count[h];0!==l;)u=e.heap[--d],u>n||(i[2*u+1]!==h&&(e.opt_len+=(h-i[2*u+1])*i[2*u],i[2*u+1]=h),l--)}})(e,t),Rn(i,d,e.bl_count)},On=(e,t,i)=>{let n,r,a=-1,o=t[1],s=0,c=7,d=4;for(0===o&&(c=138,d=3),t[2*(i+1)+1]=65535,n=0;n<=i;n++)r=o,o=t[2*(n+1)+1],++s<c&&r===o||(s<d?e.bl_tree[2*r]+=s:0!==r?(r!==a&&e.bl_tree[2*r]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=r,0===o?(c=138,d=3):r===o?(c=6,d=3):(c=7,d=4))},Mn=(e,t,i)=>{let n,r,a=-1,o=t[1],s=0,c=7,d=4;for(0===o&&(c=138,d=3),n=0;n<=i;n++)if(r=o,o=t[2*(n+1)+1],!(++s<c&&r===o)){if(s<d)do{Cn(e,r,e.bl_tree)}while(0!=--s);else 0!==r?(r!==a&&(Cn(e,r,e.bl_tree),s--),Cn(e,16,e.bl_tree),kn(e,s-3,2)):s<=10?(Cn(e,17,e.bl_tree),kn(e,s-3,3)):(Cn(e,18,e.bl_tree),kn(e,s-11,7));s=0,a=r,0===o?(c=138,d=3):r===o?(c=6,d=3):(c=7,d=4)}};let Bn=!1;const Nn=(e,t,i,n)=>{kn(e,0+(n?1:0),3),Pn(e),Tn(e,i),Tn(e,~i),i&&e.pending_buf.set(e.window.subarray(t,t+i),e.pending),e.pending+=i};var Fn=e=>{Bn||((()=>{let e,t,i,n,r;const a=new Array(16);for(i=0,n=0;n<28;n++)for(fn[n]=i,e=0;e<1<<sn[n];e++)mn[i++]=n;for(mn[i-1]=n,r=0,n=0;n<16;n++)for(gn[n]=r,e=0;e<1<<cn[n];e++)pn[r++]=n;for(r>>=7;n<an;n++)for(gn[n]=r<<7,e=0;e<1<<cn[n]-7;e++)pn[256+r++]=n;for(t=0;t<=on;t++)a[t]=0;for(e=0;e<=143;)un[2*e+1]=8,e++,a[8]++;for(;e<=255;)un[2*e+1]=9,e++,a[9]++;for(;e<=279;)un[2*e+1]=7,e++,a[7]++;for(;e<=287;)un[2*e+1]=8,e++,a[8]++;for(Rn(un,287,a),e=0;e<an;e++)hn[2*e+1]=5,hn[2*e]=En(e,5);wn=new vn(un,sn,257,rn,on),yn=new vn(hn,cn,0,an,on),bn=new vn(new Array(0),dn,0,19,7)})(),Bn=!0),e.l_desc=new _n(e.dyn_ltree,wn),e.d_desc=new _n(e.dyn_dtree,yn),e.bl_desc=new _n(e.bl_tree,bn),e.bi_buf=0,e.bi_valid=0,xn(e)},jn=(e,t,i,n)=>{let r,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<nn;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),Ln(e,e.l_desc),Ln(e,e.d_desc),o=(e=>{let t;for(On(e,e.dyn_ltree,e.l_desc.max_code),On(e,e.dyn_dtree,e.d_desc.max_code),Ln(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*ln[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=r&&(r=a)):r=a=i+5,i+4<=r&&-1!==t?Nn(e,t,i,n):4===e.strategy||a===r?(kn(e,2+(n?1:0),3),Dn(e,un,hn)):(kn(e,4+(n?1:0),3),((e,t,i,n)=>{let r;for(kn(e,t-257,5),kn(e,i-1,5),kn(e,n-4,4),r=0;r<n;r++)kn(e,e.bl_tree[2*ln[r]+1],3);Mn(e,e.dyn_ltree,t-1),Mn(e,e.dyn_dtree,i-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Dn(e,e.dyn_ltree,e.dyn_dtree)),xn(e),n&&Pn(e)},zn=(e,t,i)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=i,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(mn[i]+nn+1)]++,e.dyn_dtree[2*Sn(t)]++),e.sym_next===e.sym_end),Vn={_tr_init:Fn,_tr_stored_block:Nn,_tr_flush_block:jn,_tr_tally:zn,_tr_align:e=>{kn(e,2,3),Cn(e,256,un),(e=>{16===e.bi_valid?(Tn(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var Gn=(e,t,i,n)=>{let r=65535&e,a=e>>>16&65535,o=0;for(;0!==i;){o=i>2e3?2e3:i,i-=o;do{r=r+t[n++]|0,a=a+r|0}while(--o);r%=65521,a%=65521}return r|a<<16};const Un=new Uint32Array((()=>{let e,t=[];for(var i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t})());var Wn=(e,t,i,n)=>{const r=Un,a=n+i;e^=-1;for(let i=n;i<a;i++)e=e>>>8^r[255&(e^t[i])];return~e},Zn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Hn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Xn,_tr_stored_block:Yn,_tr_flush_block:Jn,_tr_tally:Kn,_tr_align:$n}=Vn,{Z_NO_FLUSH:qn,Z_PARTIAL_FLUSH:Qn,Z_FULL_FLUSH:er,Z_FINISH:tr,Z_BLOCK:ir,Z_OK:nr,Z_STREAM_END:rr,Z_STREAM_ERROR:ar,Z_DATA_ERROR:or,Z_BUF_ERROR:sr,Z_DEFAULT_COMPRESSION:cr,Z_FILTERED:dr,Z_HUFFMAN_ONLY:lr,Z_RLE:ur,Z_FIXED:hr,Z_DEFAULT_STRATEGY:pr,Z_UNKNOWN:mr,Z_DEFLATED:fr}=Hn,gr=258,vr=262,wr=42,yr=113,br=666,_r=(e,t)=>(e.msg=Zn[t],t),Sr=e=>2*e-(e>4?9:0),Tr=e=>{let t=e.length;for(;--t>=0;)e[t]=0},kr=e=>{let t,i,n,r=e.w_size;t=e.hash_size,n=t;do{i=e.head[--n],e.head[n]=i>=r?i-r:0}while(--t);t=r,n=t;do{i=e.prev[--n],e.prev[n]=i>=r?i-r:0}while(--t)};let Cr=(e,t,i)=>(t<<e.hash_shift^i)&e.hash_mask;const Er=e=>{const t=e.state;let i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+i),e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))},Rr=(e,t)=>{Jn(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Er(e.strm)},xr=(e,t)=>{e.pending_buf[e.pending++]=t},Pr=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Ar=(e,t,i,n)=>{let r=e.avail_in;return r>n&&(r=n),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),i),1===e.state.wrap?e.adler=Gn(e.adler,t,r,i):2===e.state.wrap&&(e.adler=Wn(e.adler,t,r,i)),e.next_in+=r,e.total_in+=r,r)},Ir=(e,t)=>{let i,n,r=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match;const c=e.strstart>e.w_size-vr?e.strstart-(e.w_size-vr):0,d=e.window,l=e.w_mask,u=e.prev,h=e.strstart+gr;let p=d[a+o-1],m=d[a+o];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do{if(i=t,d[i+o]===m&&d[i+o-1]===p&&d[i]===d[a]&&d[++i]===d[a+1]){a+=2,i++;do{}while(d[++a]===d[++i]&&d[++a]===d[++i]&&d[++a]===d[++i]&&d[++a]===d[++i]&&d[++a]===d[++i]&&d[++a]===d[++i]&&d[++a]===d[++i]&&d[++a]===d[++i]&&a<h);if(n=gr-(h-a),a=h-gr,n>o){if(e.match_start=t,o=n,n>=s)break;p=d[a+o-1],m=d[a+o]}}}while((t=u[t&l])>c&&0!=--r);return o<=e.lookahead?o:e.lookahead},Dr=e=>{const t=e.w_size;let i,n,r;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-vr)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),kr(e),n+=t),0===e.strm.avail_in)break;if(i=Ar(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=i,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=Cr(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=Cr(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<vr&&0!==e.strm.avail_in)},Lr=(e,t)=>{let i,n,r,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(i=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r)break;if(r=e.strm.avail_out-r,n=e.strstart-e.block_start,i>n+e.strm.avail_in&&(i=n+e.strm.avail_in),i>r&&(i=r),i<a&&(0===i&&t!==tr||t===qn||i!==n+e.strm.avail_in))break;o=t===tr&&i===n+e.strm.avail_in?1:0,Yn(e,0,0,o),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,Er(e.strm),n&&(n>i&&(n=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,i-=n),i&&(Ar(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(0===o);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==qn&&t!==tr&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(Ar(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r,a=r>e.w_size?e.w_size:r,n=e.strstart-e.block_start,(n>=a||(n||t===tr)&&t!==qn&&0===e.strm.avail_in&&n<=r)&&(i=n>r?r:n,o=t===tr&&0===e.strm.avail_in&&i===n?1:0,Yn(e,e.block_start,i,o),e.block_start+=i,Er(e.strm)),o?3:1)},Or=(e,t)=>{let i,n;for(;;){if(e.lookahead<vr){if(Dr(e),e.lookahead<vr&&t===qn)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=Cr(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-vr&&(e.match_length=Ir(e,i)),e.match_length>=3)if(n=Kn(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Cr(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Cr(e,e.ins_h,e.window[e.strstart+1]);else n=Kn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Rr(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===tr?(Rr(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Rr(e,!1),0===e.strm.avail_out)?1:2},Mr=(e,t)=>{let i,n,r;for(;;){if(e.lookahead<vr){if(Dr(e),e.lookahead<vr&&t===qn)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=Cr(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-vr&&(e.match_length=Ir(e,i),e.match_length<=5&&(e.strategy===dr||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,n=Kn(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=Cr(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(Rr(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=Kn(e,0,e.window[e.strstart-1]),n&&Rr(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Kn(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===tr?(Rr(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Rr(e,!1),0===e.strm.avail_out)?1:2};function Br(e,t,i,n,r){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=r}const Nr=[new Br(0,0,0,0,Lr),new Br(4,4,8,4,Or),new Br(4,5,16,8,Or),new Br(4,6,32,32,Or),new Br(4,4,16,16,Mr),new Br(8,16,32,32,Mr),new Br(8,16,128,128,Mr),new Br(8,32,128,256,Mr),new Br(32,128,258,1024,Mr),new Br(32,258,258,4096,Mr)];function Fr(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=fr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Tr(this.dyn_ltree),Tr(this.dyn_dtree),Tr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Tr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Tr(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const jr=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==wr&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==yr&&t.status!==br?1:0},zr=e=>{if(jr(e))return _r(e,ar);e.total_in=e.total_out=0,e.data_type=mr;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?wr:yr,e.adler=2===t.wrap?0:1,t.last_flush=-2,Xn(t),nr},Vr=e=>{const t=zr(e);var i;return t===nr&&((i=e.state).window_size=2*i.w_size,Tr(i.head),i.max_lazy_match=Nr[i.level].max_lazy,i.good_match=Nr[i.level].good_length,i.nice_match=Nr[i.level].nice_length,i.max_chain_length=Nr[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0),t},Gr=(e,t,i,n,r,a)=>{if(!e)return ar;let o=1;if(t===cr&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),r<1||r>9||i!==fr||n<8||n>15||t<0||t>9||a<0||a>hr||8===n&&1!==o)return _r(e,ar);8===n&&(n=9);const s=new Fr;return e.state=s,s.strm=e,s.status=wr,s.wrap=o,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=r+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<r+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=a,s.method=i,Vr(e)};var Ur={deflateInit:(e,t)=>Gr(e,t,fr,15,8,pr),deflateInit2:Gr,deflateReset:Vr,deflateResetKeep:zr,deflateSetHeader:(e,t)=>jr(e)||2!==e.state.wrap?ar:(e.state.gzhead=t,nr),deflate:(e,t)=>{if(jr(e)||t>ir||t<0)return e?_r(e,ar):ar;const i=e.state;if(!e.output||0!==e.avail_in&&!e.input||i.status===br&&t!==tr)return _r(e,0===e.avail_out?sr:ar);const n=i.last_flush;if(i.last_flush=t,0!==i.pending){if(Er(e),0===e.avail_out)return i.last_flush=-1,nr}else if(0===e.avail_in&&Sr(t)<=Sr(n)&&t!==tr)return _r(e,sr);if(i.status===br&&0!==e.avail_in)return _r(e,sr);if(i.status===wr&&0===i.wrap&&(i.status=yr),i.status===wr){let t=fr+(i.w_bits-8<<4)<<8,n=-1;if(n=i.strategy>=lr||i.level<2?0:i.level<6?1:6===i.level?2:3,t|=n<<6,0!==i.strstart&&(t|=32),t+=31-t%31,Pr(i,t),0!==i.strstart&&(Pr(i,e.adler>>>16),Pr(i,65535&e.adler)),e.adler=1,i.status=yr,Er(e),0!==i.pending)return i.last_flush=-1,nr}if(57===i.status)if(e.adler=0,xr(i,31),xr(i,139),xr(i,8),i.gzhead)xr(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),xr(i,255&i.gzhead.time),xr(i,i.gzhead.time>>8&255),xr(i,i.gzhead.time>>16&255),xr(i,i.gzhead.time>>24&255),xr(i,9===i.level?2:i.strategy>=lr||i.level<2?4:0),xr(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(xr(i,255&i.gzhead.extra.length),xr(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=Wn(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(xr(i,0),xr(i,0),xr(i,0),xr(i,0),xr(i,0),xr(i,9===i.level?2:i.strategy>=lr||i.level<2?4:0),xr(i,3),i.status=yr,Er(e),0!==i.pending)return i.last_flush=-1,nr;if(69===i.status){if(i.gzhead.extra){let t=i.pending,n=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+n>i.pending_buf_size;){let r=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+r),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>t&&(e.adler=Wn(e.adler,i.pending_buf,i.pending-t,t)),i.gzindex+=r,Er(e),0!==i.pending)return i.last_flush=-1,nr;t=0,n-=r}let r=new Uint8Array(i.gzhead.extra);i.pending_buf.set(r.subarray(i.gzindex,i.gzindex+n),i.pending),i.pending+=n,i.gzhead.hcrc&&i.pending>t&&(e.adler=Wn(e.adler,i.pending_buf,i.pending-t,t)),i.gzindex=0}i.status=73}if(73===i.status){if(i.gzhead.name){let t,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(e.adler=Wn(e.adler,i.pending_buf,i.pending-n,n)),Er(e),0!==i.pending)return i.last_flush=-1,nr;n=0}t=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,xr(i,t)}while(0!==t);i.gzhead.hcrc&&i.pending>n&&(e.adler=Wn(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex=0}i.status=91}if(91===i.status){if(i.gzhead.comment){let t,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(e.adler=Wn(e.adler,i.pending_buf,i.pending-n,n)),Er(e),0!==i.pending)return i.last_flush=-1,nr;n=0}t=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,xr(i,t)}while(0!==t);i.gzhead.hcrc&&i.pending>n&&(e.adler=Wn(e.adler,i.pending_buf,i.pending-n,n))}i.status=103}if(103===i.status){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(Er(e),0!==i.pending))return i.last_flush=-1,nr;xr(i,255&e.adler),xr(i,e.adler>>8&255),e.adler=0}if(i.status=yr,Er(e),0!==i.pending)return i.last_flush=-1,nr}if(0!==e.avail_in||0!==i.lookahead||t!==qn&&i.status!==br){let n=0===i.level?Lr(i,t):i.strategy===lr?((e,t)=>{let i;for(;;){if(0===e.lookahead&&(Dr(e),0===e.lookahead)){if(t===qn)return 1;break}if(e.match_length=0,i=Kn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(Rr(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===tr?(Rr(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Rr(e,!1),0===e.strm.avail_out)?1:2})(i,t):i.strategy===ur?((e,t)=>{let i,n,r,a;const o=e.window;for(;;){if(e.lookahead<=gr){if(Dr(e),e.lookahead<=gr&&t===qn)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,n=o[r],n===o[++r]&&n===o[++r]&&n===o[++r])){a=e.strstart+gr;do{}while(n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&r<a);e.match_length=gr-(a-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(i=Kn(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=Kn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(Rr(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===tr?(Rr(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Rr(e,!1),0===e.strm.avail_out)?1:2})(i,t):Nr[i.level].func(i,t);if(3!==n&&4!==n||(i.status=br),1===n||3===n)return 0===e.avail_out&&(i.last_flush=-1),nr;if(2===n&&(t===Qn?$n(i):t!==ir&&(Yn(i,0,0,!1),t===er&&(Tr(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Er(e),0===e.avail_out))return i.last_flush=-1,nr}return t!==tr?nr:i.wrap<=0?rr:(2===i.wrap?(xr(i,255&e.adler),xr(i,e.adler>>8&255),xr(i,e.adler>>16&255),xr(i,e.adler>>24&255),xr(i,255&e.total_in),xr(i,e.total_in>>8&255),xr(i,e.total_in>>16&255),xr(i,e.total_in>>24&255)):(Pr(i,e.adler>>>16),Pr(i,65535&e.adler)),Er(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?nr:rr)},deflateEnd:e=>{if(jr(e))return ar;const t=e.state.status;return e.state=null,t===yr?_r(e,or):nr},deflateSetDictionary:(e,t)=>{let i=t.length;if(jr(e))return ar;const n=e.state,r=n.wrap;if(2===r||1===r&&n.status!==wr||n.lookahead)return ar;if(1===r&&(e.adler=Gn(e.adler,t,i,0)),n.wrap=0,i>=n.w_size){0===r&&(Tr(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(i-n.w_size,i),0),t=e,i=n.w_size}const a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=i,e.next_in=0,e.input=t,Dr(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=Cr(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,Dr(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,n.wrap=r,nr},deflateInfo:"pako deflate (from Nodeca project)"};const Wr=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Zr=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const t in i)Wr(i,t)&&(e[t]=i[t])}}return e},Hr=e=>{let t=0;for(let i=0,n=e.length;i<n;i++)t+=e[i].length;const i=new Uint8Array(t);for(let t=0,n=0,r=e.length;t<r;t++){let r=e[t];i.set(r,n),n+=r.length}return i};let Xr=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Xr=!1}const Yr=new Uint8Array(256);for(let e=0;e<256;e++)Yr[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Yr[254]=Yr[254]=1;var Jr=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,i,n,r,a,o=e.length,s=0;for(r=0;r<o;r++)i=e.charCodeAt(r),55296==(64512&i)&&r+1<o&&(n=e.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),s+=i<128?1:i<2048?2:i<65536?3:4;for(t=new Uint8Array(s),a=0,r=0;a<s;r++)i=e.charCodeAt(r),55296==(64512&i)&&r+1<o&&(n=e.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),i<128?t[a++]=i:i<2048?(t[a++]=192|i>>>6,t[a++]=128|63&i):i<65536?(t[a++]=224|i>>>12,t[a++]=128|i>>>6&63,t[a++]=128|63&i):(t[a++]=240|i>>>18,t[a++]=128|i>>>12&63,t[a++]=128|i>>>6&63,t[a++]=128|63&i);return t},Kr=(e,t)=>{const i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,r;const a=new Array(2*i);for(r=0,n=0;n<i;){let t=e[n++];if(t<128){a[r++]=t;continue}let o=Yr[t];if(o>4)a[r++]=65533,n+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&n<i;)t=t<<6|63&e[n++],o--;o>1?a[r++]=65533:t<65536?a[r++]=t:(t-=65536,a[r++]=55296|t>>10&1023,a[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Xr)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let i="";for(let n=0;n<t;n++)i+=String.fromCharCode(e[n]);return i})(a,r)},$r=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let i=t-1;for(;i>=0&&128==(192&e[i]);)i--;return i<0||0===i?t:i+Yr[e[i]]>t?i:t};var qr=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Qr=Object.prototype.toString,{Z_NO_FLUSH:ea,Z_SYNC_FLUSH:ta,Z_FULL_FLUSH:ia,Z_FINISH:na,Z_OK:ra,Z_STREAM_END:aa,Z_DEFAULT_COMPRESSION:oa,Z_DEFAULT_STRATEGY:sa,Z_DEFLATED:ca}=Hn;function da(e){this.options=Zr({level:oa,method:ca,chunkSize:16384,windowBits:15,memLevel:8,strategy:sa},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qr,this.strm.avail_out=0;let i=Ur.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==ra)throw new Error(Zn[i]);if(t.header&&Ur.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Jr(t.dictionary):"[object ArrayBuffer]"===Qr.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,i=Ur.deflateSetDictionary(this.strm,e),i!==ra)throw new Error(Zn[i]);this._dict_set=!0}}function la(e,t){const i=new da(t);if(i.push(e,!0),i.err)throw i.msg||Zn[i.err];return i.result}da.prototype.push=function(e,t){const i=this.strm,n=this.options.chunkSize;let r,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?na:ea,"string"==typeof e?i.input=Jr(e):"[object ArrayBuffer]"===Qr.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),(a===ta||a===ia)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(r=Ur.deflate(i,a),r===aa)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),r=Ur.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===ra;if(0!==i.avail_out){if(a>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},da.prototype.onData=function(e){this.chunks.push(e)},da.prototype.onEnd=function(e){e===ra&&(this.result=Hr(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ua={Deflate:da,deflate:la,deflateRaw:function(e,t){return(t=t||{}).raw=!0,la(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,la(e,t)},constants:Hn};const ha=16209;var pa=function(e,t){let i,n,r,a,o,s,c,d,l,u,h,p,m,f,g,v,w,y,b,_,S,T,k,C;const E=e.state;i=e.next_in,k=e.input,n=i+(e.avail_in-5),r=e.next_out,C=e.output,a=r-(t-e.avail_out),o=r+(e.avail_out-257),s=E.dmax,c=E.wsize,d=E.whave,l=E.wnext,u=E.window,h=E.hold,p=E.bits,m=E.lencode,f=E.distcode,g=(1<<E.lenbits)-1,v=(1<<E.distbits)-1;e:do{p<15&&(h+=k[i++]<<p,p+=8,h+=k[i++]<<p,p+=8),w=m[h&g];t:for(;;){if(y=w>>>24,h>>>=y,p-=y,y=w>>>16&255,0===y)C[r++]=65535&w;else{if(!(16&y)){if(64&y){if(32&y){E.mode=16191;break e}e.msg="invalid literal/length code",E.mode=ha;break e}w=m[(65535&w)+(h&(1<<y)-1)];continue t}for(b=65535&w,y&=15,y&&(p<y&&(h+=k[i++]<<p,p+=8),b+=h&(1<<y)-1,h>>>=y,p-=y),p<15&&(h+=k[i++]<<p,p+=8,h+=k[i++]<<p,p+=8),w=f[h&v];;){if(y=w>>>24,h>>>=y,p-=y,y=w>>>16&255,16&y){if(_=65535&w,y&=15,p<y&&(h+=k[i++]<<p,p+=8,p<y&&(h+=k[i++]<<p,p+=8)),_+=h&(1<<y)-1,_>s){e.msg="invalid distance too far back",E.mode=ha;break e}if(h>>>=y,p-=y,y=r-a,_>y){if(y=_-y,y>d&&E.sane){e.msg="invalid distance too far back",E.mode=ha;break e}if(S=0,T=u,0===l){if(S+=c-y,y<b){b-=y;do{C[r++]=u[S++]}while(--y);S=r-_,T=C}}else if(l<y){if(S+=c+l-y,y-=l,y<b){b-=y;do{C[r++]=u[S++]}while(--y);if(S=0,l<b){y=l,b-=y;do{C[r++]=u[S++]}while(--y);S=r-_,T=C}}}else if(S+=l-y,y<b){b-=y;do{C[r++]=u[S++]}while(--y);S=r-_,T=C}for(;b>2;)C[r++]=T[S++],C[r++]=T[S++],C[r++]=T[S++],b-=3;b&&(C[r++]=T[S++],b>1&&(C[r++]=T[S++]))}else{S=r-_;do{C[r++]=C[S++],C[r++]=C[S++],C[r++]=C[S++],b-=3}while(b>2);b&&(C[r++]=C[S++],b>1&&(C[r++]=C[S++]))}break}if(64&y){e.msg="invalid distance code",E.mode=ha;break e}w=f[(65535&w)+(h&(1<<y)-1)]}}break}}while(i<n&&r<o);b=p>>3,i-=b,p-=b<<3,h&=(1<<p)-1,e.next_in=i,e.next_out=r,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=r<o?o-r+257:257-(r-o),E.hold=h,E.bits=p};const ma=15,fa=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ga=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),va=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),wa=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ya=(e,t,i,n,r,a,o,s)=>{const c=s.bits;let d,l,u,h,p,m,f=0,g=0,v=0,w=0,y=0,b=0,_=0,S=0,T=0,k=0,C=null;const E=new Uint16Array(16),R=new Uint16Array(16);let x,P,A,I=null;for(f=0;f<=ma;f++)E[f]=0;for(g=0;g<n;g++)E[t[i+g]]++;for(y=c,w=ma;w>=1&&0===E[w];w--);if(y>w&&(y=w),0===w)return r[a++]=20971520,r[a++]=20971520,s.bits=1,0;for(v=1;v<w&&0===E[v];v++);for(y<v&&(y=v),S=1,f=1;f<=ma;f++)if(S<<=1,S-=E[f],S<0)return-1;if(S>0&&(0===e||1!==w))return-1;for(R[1]=0,f=1;f<ma;f++)R[f+1]=R[f]+E[f];for(g=0;g<n;g++)0!==t[i+g]&&(o[R[t[i+g]]++]=g);if(0===e?(C=I=o,m=20):1===e?(C=fa,I=ga,m=257):(C=va,I=wa,m=0),k=0,g=0,f=v,p=a,b=y,_=0,u=-1,T=1<<y,h=T-1,1===e&&T>852||2===e&&T>592)return 1;for(;;){x=f-_,o[g]+1<m?(P=0,A=o[g]):o[g]>=m?(P=I[o[g]-m],A=C[o[g]-m]):(P=96,A=0),d=1<<f-_,l=1<<b,v=l;do{l-=d,r[p+(k>>_)+l]=x<<24|P<<16|A}while(0!==l);for(d=1<<f-1;k&d;)d>>=1;if(0!==d?(k&=d-1,k+=d):k=0,g++,0==--E[f]){if(f===w)break;f=t[i+o[g]]}if(f>y&&(k&h)!==u){for(0===_&&(_=y),p+=v,b=f-_,S=1<<b;b+_<w&&(S-=E[b+_],!(S<=0));)b++,S<<=1;if(T+=1<<b,1===e&&T>852||2===e&&T>592)return 1;u=k&h,r[u]=y<<24|b<<16|p-a}}return 0!==k&&(r[p+k]=f-_<<24|64<<16),s.bits=y,0};const{Z_FINISH:ba,Z_BLOCK:_a,Z_TREES:Sa,Z_OK:Ta,Z_STREAM_END:ka,Z_NEED_DICT:Ca,Z_STREAM_ERROR:Ea,Z_DATA_ERROR:Ra,Z_MEM_ERROR:xa,Z_BUF_ERROR:Pa,Z_DEFLATED:Aa}=Hn,Ia=16180,Da=16190,La=16191,Oa=16192,Ma=16194,Ba=16199,Na=16200,Fa=16206,ja=16209,za=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Va(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ga=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Ia||t.mode>16211?1:0},Ua=e=>{if(Ga(e))return Ea;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Ia,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Ta},Wa=e=>{if(Ga(e))return Ea;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Ua(e)},Za=(e,t)=>{let i;if(Ga(e))return Ea;const n=e.state;return t<0?(i=0,t=-t):(i=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Ea:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,Wa(e))},Ha=(e,t)=>{if(!e)return Ea;const i=new Va;e.state=i,i.strm=e,i.window=null,i.mode=Ia;const n=Za(e,t);return n!==Ta&&(e.state=null),n};let Xa,Ya,Ja=!0;const Ka=e=>{if(Ja){Xa=new Int32Array(512),Ya=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ya(1,e.lens,0,288,Xa,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ya(2,e.lens,0,32,Ya,0,e.work,{bits:5}),Ja=!1}e.lencode=Xa,e.lenbits=9,e.distcode=Ya,e.distbits=5},$a=(e,t,i,n)=>{let r;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(i-a.wsize,i),0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>n&&(r=n),a.window.set(t.subarray(i-n,i-n+r),a.wnext),(n-=r)?(a.window.set(t.subarray(i-n,i),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0};var qa={inflateReset:Wa,inflateReset2:Za,inflateResetKeep:Ua,inflateInit:e=>Ha(e,15),inflateInit2:Ha,inflate:(e,t)=>{let i,n,r,a,o,s,c,d,l,u,h,p,m,f,g,v,w,y,b,_,S,T,k=0;const C=new Uint8Array(4);let E,R;const x=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ga(e)||!e.output||!e.input&&0!==e.avail_in)return Ea;i=e.state,i.mode===La&&(i.mode=Oa),o=e.next_out,r=e.output,c=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,d=i.hold,l=i.bits,u=s,h=c,T=Ta;e:for(;;)switch(i.mode){case Ia:if(0===i.wrap){i.mode=Oa;break}for(;l<16;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}if(2&i.wrap&&35615===d){0===i.wbits&&(i.wbits=15),i.check=0,C[0]=255&d,C[1]=d>>>8&255,i.check=Wn(i.check,C,2,0),d=0,l=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",i.mode=ja;break}if((15&d)!==Aa){e.msg="unknown compression method",i.mode=ja;break}if(d>>>=4,l-=4,S=8+(15&d),0===i.wbits&&(i.wbits=S),S>15||S>i.wbits){e.msg="invalid window size",i.mode=ja;break}i.dmax=1<<i.wbits,i.flags=0,e.adler=i.check=1,i.mode=512&d?16189:La,d=0,l=0;break;case 16181:for(;l<16;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}if(i.flags=d,(255&i.flags)!==Aa){e.msg="unknown compression method",i.mode=ja;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=ja;break}i.head&&(i.head.text=d>>8&1),512&i.flags&&4&i.wrap&&(C[0]=255&d,C[1]=d>>>8&255,i.check=Wn(i.check,C,2,0)),d=0,l=0,i.mode=16182;case 16182:for(;l<32;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}i.head&&(i.head.time=d),512&i.flags&&4&i.wrap&&(C[0]=255&d,C[1]=d>>>8&255,C[2]=d>>>16&255,C[3]=d>>>24&255,i.check=Wn(i.check,C,4,0)),d=0,l=0,i.mode=16183;case 16183:for(;l<16;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}i.head&&(i.head.xflags=255&d,i.head.os=d>>8),512&i.flags&&4&i.wrap&&(C[0]=255&d,C[1]=d>>>8&255,i.check=Wn(i.check,C,2,0)),d=0,l=0,i.mode=16184;case 16184:if(1024&i.flags){for(;l<16;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}i.length=d,i.head&&(i.head.extra_len=d),512&i.flags&&4&i.wrap&&(C[0]=255&d,C[1]=d>>>8&255,i.check=Wn(i.check,C,2,0)),d=0,l=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&i.flags&&(p=i.length,p>s&&(p=s),p&&(i.head&&(S=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(n.subarray(a,a+p),S)),512&i.flags&&4&i.wrap&&(i.check=Wn(i.check,n,p,a)),s-=p,a+=p,i.length-=p),i.length))break e;i.length=0,i.mode=16186;case 16186:if(2048&i.flags){if(0===s)break e;p=0;do{S=n[a+p++],i.head&&S&&i.length<65536&&(i.head.name+=String.fromCharCode(S))}while(S&&p<s);if(512&i.flags&&4&i.wrap&&(i.check=Wn(i.check,n,p,a)),s-=p,a+=p,S)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&i.flags){if(0===s)break e;p=0;do{S=n[a+p++],i.head&&S&&i.length<65536&&(i.head.comment+=String.fromCharCode(S))}while(S&&p<s);if(512&i.flags&&4&i.wrap&&(i.check=Wn(i.check,n,p,a)),s-=p,a+=p,S)break e}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&i.flags){for(;l<16;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}if(4&i.wrap&&d!==(65535&i.check)){e.msg="header crc mismatch",i.mode=ja;break}d=0,l=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=La;break;case 16189:for(;l<32;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}e.adler=i.check=za(d),d=0,l=0,i.mode=Da;case Da:if(0===i.havedict)return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,i.hold=d,i.bits=l,Ca;e.adler=i.check=1,i.mode=La;case La:if(t===_a||t===Sa)break e;case Oa:if(i.last){d>>>=7&l,l-=7&l,i.mode=Fa;break}for(;l<3;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}switch(i.last=1&d,d>>>=1,l-=1,3&d){case 0:i.mode=16193;break;case 1:if(Ka(i),i.mode=Ba,t===Sa){d>>>=2,l-=2;break e}break;case 2:i.mode=16196;break;case 3:e.msg="invalid block type",i.mode=ja}d>>>=2,l-=2;break;case 16193:for(d>>>=7&l,l-=7&l;l<32;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",i.mode=ja;break}if(i.length=65535&d,d=0,l=0,i.mode=Ma,t===Sa)break e;case Ma:i.mode=16195;case 16195:if(p=i.length,p){if(p>s&&(p=s),p>c&&(p=c),0===p)break e;r.set(n.subarray(a,a+p),o),s-=p,a+=p,c-=p,o+=p,i.length-=p;break}i.mode=La;break;case 16196:for(;l<14;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}if(i.nlen=257+(31&d),d>>>=5,l-=5,i.ndist=1+(31&d),d>>>=5,l-=5,i.ncode=4+(15&d),d>>>=4,l-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=ja;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;l<3;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}i.lens[x[i.have++]]=7&d,d>>>=3,l-=3}for(;i.have<19;)i.lens[x[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,E={bits:i.lenbits},T=ya(0,i.lens,0,19,i.lencode,0,i.work,E),i.lenbits=E.bits,T){e.msg="invalid code lengths set",i.mode=ja;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;k=i.lencode[d&(1<<i.lenbits)-1],g=k>>>24,v=k>>>16&255,w=65535&k,!(g<=l);){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}if(w<16)d>>>=g,l-=g,i.lens[i.have++]=w;else{if(16===w){for(R=g+2;l<R;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}if(d>>>=g,l-=g,0===i.have){e.msg="invalid bit length repeat",i.mode=ja;break}S=i.lens[i.have-1],p=3+(3&d),d>>>=2,l-=2}else if(17===w){for(R=g+3;l<R;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}d>>>=g,l-=g,S=0,p=3+(7&d),d>>>=3,l-=3}else{for(R=g+7;l<R;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}d>>>=g,l-=g,S=0,p=11+(127&d),d>>>=7,l-=7}if(i.have+p>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=ja;break}for(;p--;)i.lens[i.have++]=S}}if(i.mode===ja)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=ja;break}if(i.lenbits=9,E={bits:i.lenbits},T=ya(1,i.lens,0,i.nlen,i.lencode,0,i.work,E),i.lenbits=E.bits,T){e.msg="invalid literal/lengths set",i.mode=ja;break}if(i.distbits=6,i.distcode=i.distdyn,E={bits:i.distbits},T=ya(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,E),i.distbits=E.bits,T){e.msg="invalid distances set",i.mode=ja;break}if(i.mode=Ba,t===Sa)break e;case Ba:i.mode=Na;case Na:if(s>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,i.hold=d,i.bits=l,pa(e,h),o=e.next_out,r=e.output,c=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,d=i.hold,l=i.bits,i.mode===La&&(i.back=-1);break}for(i.back=0;k=i.lencode[d&(1<<i.lenbits)-1],g=k>>>24,v=k>>>16&255,w=65535&k,!(g<=l);){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}if(v&&!(240&v)){for(y=g,b=v,_=w;k=i.lencode[_+((d&(1<<y+b)-1)>>y)],g=k>>>24,v=k>>>16&255,w=65535&k,!(y+g<=l);){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}d>>>=y,l-=y,i.back+=y}if(d>>>=g,l-=g,i.back+=g,i.length=w,0===v){i.mode=16205;break}if(32&v){i.back=-1,i.mode=La;break}if(64&v){e.msg="invalid literal/length code",i.mode=ja;break}i.extra=15&v,i.mode=16201;case 16201:if(i.extra){for(R=i.extra;l<R;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}i.length+=d&(1<<i.extra)-1,d>>>=i.extra,l-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;k=i.distcode[d&(1<<i.distbits)-1],g=k>>>24,v=k>>>16&255,w=65535&k,!(g<=l);){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}if(!(240&v)){for(y=g,b=v,_=w;k=i.distcode[_+((d&(1<<y+b)-1)>>y)],g=k>>>24,v=k>>>16&255,w=65535&k,!(y+g<=l);){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}d>>>=y,l-=y,i.back+=y}if(d>>>=g,l-=g,i.back+=g,64&v){e.msg="invalid distance code",i.mode=ja;break}i.offset=w,i.extra=15&v,i.mode=16203;case 16203:if(i.extra){for(R=i.extra;l<R;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}i.offset+=d&(1<<i.extra)-1,d>>>=i.extra,l-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=ja;break}i.mode=16204;case 16204:if(0===c)break e;if(p=h-c,i.offset>p){if(p=i.offset-p,p>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=ja;break}p>i.wnext?(p-=i.wnext,m=i.wsize-p):m=i.wnext-p,p>i.length&&(p=i.length),f=i.window}else f=r,m=o-i.offset,p=i.length;p>c&&(p=c),c-=p,i.length-=p;do{r[o++]=f[m++]}while(--p);0===i.length&&(i.mode=Na);break;case 16205:if(0===c)break e;r[o++]=i.length,c--,i.mode=Na;break;case Fa:if(i.wrap){for(;l<32;){if(0===s)break e;s--,d|=n[a++]<<l,l+=8}if(h-=c,e.total_out+=h,i.total+=h,4&i.wrap&&h&&(e.adler=i.check=i.flags?Wn(i.check,r,h,o-h):Gn(i.check,r,h,o-h)),h=c,4&i.wrap&&(i.flags?d:za(d))!==i.check){e.msg="incorrect data check",i.mode=ja;break}d=0,l=0}i.mode=16207;case 16207:if(i.wrap&&i.flags){for(;l<32;){if(0===s)break e;s--,d+=n[a++]<<l,l+=8}if(4&i.wrap&&d!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=ja;break}d=0,l=0}i.mode=16208;case 16208:T=ka;break e;case ja:T=Ra;break e;case 16210:return xa;default:return Ea}return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,i.hold=d,i.bits=l,(i.wsize||h!==e.avail_out&&i.mode<ja&&(i.mode<Fa||t!==ba))&&$a(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,i.total+=h,4&i.wrap&&h&&(e.adler=i.check=i.flags?Wn(i.check,r,h,e.next_out-h):Gn(i.check,r,h,e.next_out-h)),e.data_type=i.bits+(i.last?64:0)+(i.mode===La?128:0)+(i.mode===Ba||i.mode===Ma?256:0),(0===u&&0===h||t===ba)&&T===Ta&&(T=Pa),T},inflateEnd:e=>{if(Ga(e))return Ea;let t=e.state;return t.window&&(t.window=null),e.state=null,Ta},inflateGetHeader:(e,t)=>{if(Ga(e))return Ea;const i=e.state;return 2&i.wrap?(i.head=t,t.done=!1,Ta):Ea},inflateSetDictionary:(e,t)=>{const i=t.length;let n,r,a;return Ga(e)?Ea:(n=e.state,0!==n.wrap&&n.mode!==Da?Ea:n.mode===Da&&(r=1,r=Gn(r,t,i,0),r!==n.check)?Ra:(a=$a(e,t,i,i),a?(n.mode=16210,xa):(n.havedict=1,Ta)))},inflateInfo:"pako inflate (from Nodeca project)"};var Qa=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const eo=Object.prototype.toString,{Z_NO_FLUSH:to,Z_FINISH:io,Z_OK:no,Z_STREAM_END:ro,Z_NEED_DICT:ao,Z_STREAM_ERROR:oo,Z_DATA_ERROR:so,Z_MEM_ERROR:co}=Hn;function lo(e){this.options=Zr({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qr,this.strm.avail_out=0;let i=qa.inflateInit2(this.strm,t.windowBits);if(i!==no)throw new Error(Zn[i]);if(this.header=new Qa,qa.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Jr(t.dictionary):"[object ArrayBuffer]"===eo.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=qa.inflateSetDictionary(this.strm,t.dictionary),i!==no)))throw new Error(Zn[i])}function uo(e,t){const i=new lo(t);if(i.push(e),i.err)throw i.msg||Zn[i.err];return i.result}lo.prototype.push=function(e,t){const i=this.strm,n=this.options.chunkSize,r=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(o=t===~~t?t:!0===t?io:to,"[object ArrayBuffer]"===eo.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),a=qa.inflate(i,o),a===ao&&r&&(a=qa.inflateSetDictionary(i,r),a===no?a=qa.inflate(i,o):a===so&&(a=ao));i.avail_in>0&&a===ro&&i.state.wrap>0&&0!==e[i.next_in];)qa.inflateReset(i),a=qa.inflate(i,o);switch(a){case oo:case so:case ao:case co:return this.onEnd(a),this.ended=!0,!1}if(s=i.avail_out,i.next_out&&(0===i.avail_out||a===ro))if("string"===this.options.to){let e=$r(i.output,i.next_out),t=i.next_out-e,r=Kr(i.output,e);i.next_out=t,i.avail_out=n-t,t&&i.output.set(i.output.subarray(e,e+t),0),this.onData(r)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(a!==no||0!==s){if(a===ro)return a=qa.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},lo.prototype.onData=function(e){this.chunks.push(e)},lo.prototype.onEnd=function(e){e===no&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Hr(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ho={Inflate:lo,inflate:uo,inflateRaw:function(e,t){return(t=t||{}).raw=!0,uo(e,t)},ungzip:uo,constants:Hn};const{Deflate:po,deflate:mo,deflateRaw:fo,gzip:go}=ua,{Inflate:vo,inflate:wo,inflateRaw:yo,ungzip:bo}=ho;var _o={Deflate:po,deflate:mo,deflateRaw:fo,gzip:go,Inflate:vo,inflate:wo,inflateRaw:yo,ungzip:bo,constants:Hn},So="1.2.5",To=o((function(e){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){var n={MOBILE:"mobile",TABLET:"tablet",SMART_TV:"smarttv",CONSOLE:"console",WEARABLE:"wearable",BROWSER:void 0};e.exports={BROWSER_TYPES:{CHROME:"Chrome",FIREFOX:"Firefox",OPERA:"Opera",YANDEX:"Yandex",SAFARI:"Safari",INTERNET_EXPLORER:"Internet Explorer",EDGE:"Edge",CHROMIUM:"Chromium",IE:"IE",MOBILE_SAFARI:"Mobile Safari",EDGE_CHROMIUM:"Edge Chromium"},DEVICE_TYPES:n,OS_TYPES:{IOS:"iOS",ANDROID:"Android",WINDOWS_PHONE:"Windows Phone",WINDOWS:"Windows",MAC_OS:"Mac OS"},defaultData:{isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1}}},function(e,t,i){var n,r=i(2),a=i(0),o=a.BROWSER_TYPES,s=a.OS_TYPES,c=a.DEVICE_TYPES,d=i(4),l=d.checkType,u=d.broPayload,h=d.mobilePayload,p=d.wearPayload,m=d.consolePayload,f=d.stvPayload,g=d.getNavigatorInstance,v=d.isIOS13Check,w=new r,y=w.getBrowser(),b=w.getDevice(),_=w.getEngine(),S=w.getOS(),T=w.getUA(),k=o.CHROME,C=o.CHROMIUM,E=o.IE,R=o.INTERNET_EXPLORER,x=o.OPERA,P=o.FIREFOX,A=o.SAFARI,I=o.EDGE,D=o.YANDEX,L=o.MOBILE_SAFARI,O=c.MOBILE,M=c.TABLET,B=c.SMART_TV,N=c.BROWSER,F=c.WEARABLE,j=c.CONSOLE,z=s.ANDROID,V=s.WINDOWS_PHONE,G=s.IOS,U=s.WINDOWS,W=s.MAC_OS,Z=function(){return S.name===s.WINDOWS&&"10"===S.version&&("string"==typeof T&&-1!==T.indexOf("Edg/"))},H=function(){return y.name===I},X=function(){return v("iPad")},Y=b.type===B,J=b.type===j,K=b.type===F,$=y.name===L||X(),q=y.name===C,Q=function(){switch(b.type){case O:case M:return!0;default:return!1}}()||X(),ee=b.type===O,te=b.type===M||X(),ie=b.type===N,ne=S.name===z,re=S.name===V,ae=S.name===G||X(),oe=y.name===k,se=y.name===P,ce=y.name===A||y.name===L,de=y.name===x,le=y.name===R||y.name===E,ue=S.version?S.version:"none",he=S.name?S.name:"none",pe=y.major,me=y.version,fe=y.name,ge=b.vendor?b.vendor:"none",ve=b.model?b.model:"none",we=_.name,ye=_.version,be=T,_e=H()||Z(),Se=y.name===D,Te=b.type,ke=(n=g())&&(/iPad|iPhone|iPod/.test(n.platform)||"MacIntel"===n.platform&&n.maxTouchPoints>1)&&!window.MSStream,Ce=X(),Ee=v("iPhone"),Re=v("iPod"),xe=function(){var e=g(),t=e&&e.userAgent.toLowerCase();return"string"==typeof t&&/electron/.test(t)}(),Pe=Z(),Ae=H(),Ie=S.name===U,De=S.name===W,Le=l(b.type);e.exports={deviceDetect:function(){var e=Le.isBrowser,t=Le.isMobile,i=Le.isTablet,n=Le.isSmartTV,r=Le.isConsole,a=Le.isWearable;return e?u(e,y,_,S,T):n?f(n,_,S,T):r?m(r,_,S,T):t||i?h(Le,b,S,T):a?p(a,_,S,T):void 0},isSmartTV:Y,isConsole:J,isWearable:K,isMobileSafari:$,isChromium:q,isMobile:Q,isMobileOnly:ee,isTablet:te,isBrowser:ie,isAndroid:ne,isWinPhone:re,isIOS:ae,isChrome:oe,isFirefox:se,isSafari:ce,isOpera:de,isIE:le,osVersion:ue,osName:he,fullBrowserVersion:pe,browserVersion:me,browserName:fe,mobileVendor:ge,mobileModel:ve,engineName:we,engineVersion:ye,getUA:be,isEdge:_e,isYandex:Se,deviceType:Te,isIOS13:ke,isIPad13:Ce,isIPhone13:Ee,isIPod13:Re,isElectron:xe,isEdgeChromium:Pe,isLegacyEdge:Ae,isWindows:Ie,isMacOs:De}},function(e,t,i){var n;
/*!
     * UAParser.js v0.7.18
     * Lightweight JavaScript-based User-Agent string parser
     * https://github.com/faisalman/ua-parser-js
     *
     * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
     * Dual licensed under GPLv2 or MIT
     */!function(r,a){var o="function",s="undefined",c="object",d="model",l="name",u="type",h="vendor",p="version",m="architecture",f="console",g="mobile",v="tablet",w="smarttv",y="wearable",b={extend:function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:a},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},_={rgx:function(e,t){for(var i,n,r,s,d,l,u=0;u<t.length&&!d;){var h=t[u],p=t[u+1];for(i=n=0;i<h.length&&!d;)if(d=h[i++].exec(e))for(r=0;r<p.length;r++)l=d[++n],typeof(s=p[r])===c&&s.length>0?2==s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3==s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):a:this[s[0]]=l?s[1].call(this,l,s[2]):a:4==s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):a):this[s]=l||a;u+=2}},str:function(e,t){for(var i in t)if(typeof t[i]===c&&t[i].length>0){for(var n=0;n<t[i].length;n++)if(b.has(t[i][n],e))return"?"===i?a:i}else if(b.has(t[i],e))return"?"===i?a:i;return e}},S={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},T={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[l,p],[/(opios)[\/\s]+([\w\.]+)/i],[[l,"Opera Mini"],p],[/\s(opr)\/([\w\.]+)/i],[[l,"Opera"],p],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[l,p],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[l,"IE"],p],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[l,"Edge"],p],[/(yabrowser)\/([\w\.]+)/i],[[l,"Yandex"],p],[/(puffin)\/([\w\.]+)/i],[[l,"Puffin"],p],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[l,"UCBrowser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],p],[/(micromessenger)\/([\w\.]+)/i],[[l,"WeChat"],p],[/(qqbrowserlite)\/([\w\.]+)/i],[l,p],[/(QQ)\/([\d\.]+)/i],[l,p],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[l,p],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[l,p],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[l,p],[/(MetaSr)[\/\s]?([\w\.]+)/i],[l],[/(LBBROWSER)/i],[l],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[p,[l,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[p,[l,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[p,[l,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[l,/(.+)/,"$1 WebView"],p],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[l,/(.+(?:g|us))(.+)/,"$1 $2"],p],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[p,[l,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[l,p],[/(dolfin)\/([\w\.]+)/i],[[l,"Dolphin"],p],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[l,"Chrome"],p],[/(coast)\/([\w\.]+)/i],[[l,"Opera Coast"],p],[/fxios\/([\w\.-]+)/i],[p,[l,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[p,[l,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[p,l],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[l,"GSA"],p],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[l,[p,_.str,S.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[l,p],[/(navigator|netscape)\/([\w\.-]+)/i],[[l,"Netscape"],p],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[l,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,b.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[m,/ower/,"",b.lowerize]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[m,b.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[d,h,[u,v]],[/applecoremedia\/[\w\.]+ \((ipad)/],[d,[h,"Apple"],[u,v]],[/(apple\s{0,1}tv)/i],[[d,"Apple TV"],[h,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[h,d,[u,v]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[d,[h,"Amazon"],[u,v]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[d,_.str,S.device.amazon.model],[h,"Amazon"],[u,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[d,h,[u,g]],[/\((ip[honed|\s\w*]+);/i],[d,[h,"Apple"],[u,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[h,d,[u,g]],[/\(bb10;\s(\w+)/i],[d,[h,"BlackBerry"],[u,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[d,[h,"Asus"],[u,v]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[h,"Sony"],[d,"Xperia Tablet"],[u,v]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[d,[h,"Sony"],[u,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[h,d,[u,f]],[/android.+;\s(shield)\sbuild/i],[d,[h,"Nvidia"],[u,f]],[/(playstation\s[34portablevi]+)/i],[d,[h,"Sony"],[u,f]],[/(sprint\s(\w+))/i],[[h,_.str,S.device.sprint.vendor],[d,_.str,S.device.sprint.model],[u,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[h,d,[u,v]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[h,[d,/_/g," "],[u,g]],[/(nexus\s9)/i],[d,[h,"HTC"],[u,v]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[d,[h,"Huawei"],[u,g]],[/(microsoft);\s(lumia[\s\w]+)/i],[h,d,[u,g]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[d,[h,"Microsoft"],[u,f]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[h,"Microsoft"],[u,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[d,[h,"Motorola"],[u,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[d,[h,"Motorola"],[u,v]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[h,b.trim],[d,b.trim],[u,w]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[h,"Samsung"],[u,w]],[/\(dtv[\);].+(aquos)/i],[d,[h,"Sharp"],[u,w]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[h,"Samsung"],d,[u,v]],[/smart-tv.+(samsung)/i],[h,[u,w],d],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[h,"Samsung"],d,[u,g]],[/sie-(\w*)/i],[d,[h,"Siemens"],[u,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[h,"Nokia"],d,[u,g]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[d,[h,"Acer"],[u,v]],[/android.+([vl]k\-?\d{3})\s+build/i],[d,[h,"LG"],[u,v]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[h,"LG"],d,[u,v]],[/(lg) netcast\.tv/i],[h,d,[u,w]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[d,[h,"LG"],[u,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[d,[h,"Lenovo"],[u,v]],[/linux;.+((jolla));/i],[h,d,[u,g]],[/((pebble))app\/[\d\.]+\s/i],[h,d,[u,y]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[h,d,[u,g]],[/crkey/i],[[d,"Chromecast"],[h,"Google"]],[/android.+;\s(glass)\s\d/i],[d,[h,"Google"],[u,y]],[/android.+;\s(pixel c)\s/i],[d,[h,"Google"],[u,v]],[/android.+;\s(pixel xl|pixel)\s/i],[d,[h,"Google"],[u,g]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[d,/_/g," "],[h,"Xiaomi"],[u,g]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[d,/_/g," "],[h,"Xiaomi"],[u,v]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[d,[h,"Meizu"],[u,v]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[d,[h,"OnePlus"],[u,g]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[d,[h,"RCA"],[u,v]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[d,[h,"Dell"],[u,v]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[d,[h,"Verizon"],[u,v]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[h,"Barnes & Noble"],d,[u,v]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[d,[h,"NuVision"],[u,v]],[/android.+;\s(k88)\sbuild/i],[d,[h,"ZTE"],[u,v]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[d,[h,"Swiss"],[u,g]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[d,[h,"Swiss"],[u,v]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[d,[h,"Zeki"],[u,v]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[h,"Dragon Touch"],d,[u,v]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[d,[h,"Insignia"],[u,v]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[d,[h,"NextBook"],[u,v]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[h,"Voice"],d,[u,g]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[h,"LvTel"],d,[u,g]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[d,[h,"Envizen"],[u,v]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[h,d,[u,v]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[d,[h,"MachSpeed"],[u,v]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[h,d,[u,v]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[d,[h,"Rotor"],[u,v]],[/android.+(KS(.+))\s+build/i],[d,[h,"Amazon"],[u,v]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[h,d,[u,v]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,b.lowerize],h,d],[/(android[\w\.\s\-]{0,9});.+build/i],[d,[h,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[p,[l,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[l,p],[/rv\:([\w\.]{1,9}).+(gecko)/i],[p,l]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[l,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[l,[p,_.str,S.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[l,"Windows"],[p,_.str,S.os.windows.version]],[/\((bb)(10);/i],[[l,"BlackBerry"],p],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[l,p],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[l,"Symbian"],p],[/\((series40);/i],[l],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[l,"Firefox OS"],p],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[l,p],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[l,"Chromium OS"],p],[/(sunos)\s?([\w\.\d]*)/i],[[l,"Solaris"],p],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[l,p],[/(haiku)\s(\w+)/i],[l,p],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[p,/_/g,"."],[l,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[l,"Mac OS"],[p,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[l,p]]},k=function(e,t){if("object"==typeof e&&(t=e,e=a),!(this instanceof k))return new k(e,t).getResult();var i=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),n=t?b.extend(T,t):T;return this.getBrowser=function(){var e={name:a,version:a};return _.rgx.call(e,i,n.browser),e.major=b.major(e.version),e},this.getCPU=function(){var e={architecture:a};return _.rgx.call(e,i,n.cpu),e},this.getDevice=function(){var e={vendor:a,model:a,type:a};return _.rgx.call(e,i,n.device),e},this.getEngine=function(){var e={name:a,version:a};return _.rgx.call(e,i,n.engine),e},this.getOS=function(){var e={name:a,version:a};return _.rgx.call(e,i,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this};k.VERSION="0.7.18",k.BROWSER={NAME:l,MAJOR:"major",VERSION:p},k.CPU={ARCHITECTURE:m},k.DEVICE={MODEL:d,VENDOR:h,TYPE:u,CONSOLE:f,MOBILE:g,SMARTTV:w,TABLET:v,WEARABLE:y,EMBEDDED:"embedded"},k.ENGINE={NAME:l,VERSION:p},k.OS={NAME:l,VERSION:p},typeof t!==s?(typeof e!==s&&e.exports&&(t=e.exports=k),t.UAParser=k):i(3)?(n=function(){return k}.call(t,i,t,e))===a||(e.exports=n):r&&(r.UAParser=k);var C=r&&(r.jQuery||r.Zepto);if(typeof C!==s){var E=new k;C.ua=E.getResult(),C.ua.get=function(){return E.getUA()},C.ua.set=function(e){E.setUA(e);var t=E.getResult();for(var i in t)C.ua[i]=t[i]}}}("object"==typeof window?window:this)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},r=i(0),a=r.DEVICE_TYPES,o=r.defaultData,s=t.getNavigatorInstance=function(){return!("undefined"==typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},c=t.isIOS13Check=function(e){var t=s();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)};e.exports={checkType:function(e){switch(e){case a.MOBILE:return{isMobile:!0};case a.TABLET:return{isTablet:!0};case a.SMART_TV:return{isSmartTV:!0};case a.CONSOLE:return{isConsole:!0};case a.WEARABLE:return{isWearable:!0};case a.BROWSER:return{isBrowser:!0};default:return o}},broPayload:function(e,t,i,n,r){return{isBrowser:e,browserMajorVersion:t.major,browserFullVersion:t.version,browserName:t.name,engineName:i.name||!1,engineVersion:i.version,osName:n.name,osVersion:n.version,userAgent:r}},mobilePayload:function(e,t,i,r){return n({},e,{vendor:t.vendor,model:t.model,os:i.name,osVersion:i.version,ua:r})},stvPayload:function(e,t,i,n){return{isSmartTV:e,engineName:t.name,engineVersion:t.version,osName:i.name,osVersion:i.version,userAgent:n}},consolePayload:function(e,t,i,n){return{isConsole:e,engineName:t.name,engineVersion:t.version,osName:i.name,osVersion:i.version,userAgent:n}},wearPayload:function(e,t,i,n){return{isWearable:e,engineName:t.name,engineVersion:t.version,osName:i.name,osVersion:i.version,userAgent:n}},getNavigatorInstance:s,isIOS13Check:c}}])}));class ko{constructor(){this.canvas=null,this.gl=null,this.glRenderer=null,this.models=null,this.devices=[["a7","640x1136",["iPhone 5","iPhone 5s"]],["a7","1536x2048",["iPad Air","iPad Mini 2","iPad Mini 3"]],["a8","640x1136",["iPod touch (6th gen)"]],["a8","750x1334",["iPhone 6"]],["a8","1242x2208",["iPhone 6 Plus"]],["a8","1536x2048",["iPad Air 2","iPad Mini 4"]],["a9","640x1136",["iPhone SE"]],["a9","750x1334",["iPhone 6s"]],["a9","1242x2208",["iPhone 6s Plus"]],["a9x","1536x2048",["iPad Pro (1st gen 9.7-inch)"]],["a9x","2048x2732",["iPad Pro (1st gen 12.9-inch)"]],["a10","750x1334",["iPhone 7"]],["a10","1242x2208",["iPhone 7 Plus"]],["a10x","1668x2224",["iPad Pro (2th gen 10.5-inch)"]],["a10x","2048x2732",["iPad Pro (2th gen 12.9-inch)"]],["a11","750x1334",["iPhone 8"]],["a11","1242x2208",["iPhone 8 Plus"]],["a11","1125x2436",["iPhone X"]],["a12","828x1792",["iPhone Xr"]],["a12","1125x2436",["iPhone Xs"]],["a12","1242x2688",["iPhone Xs Max"]],["a12x","1668x2388",["iPad Pro (3rd gen 11-inch)"]],["a12x","2048x2732",["iPad Pro (3rd gen 12.9-inch)"]]]}getCanvas(){return null==this.canvas&&(this.canvas=document.createElement("canvas")),this.canvas}getGl(){return null==this.gl&&(this.gl=this.getCanvas().getContext("experimental-webgl")),this.gl}getResolution(){let e=window.devicePixelRatio||1;return Math.min(screen.width,screen.height)*e+"x"+Math.max(screen.width,screen.height)*e}getGlRenderer(){if(null==this.glRenderer){const e=this.getGl().getExtension("WEBGL_debug_renderer_info");this.glRenderer=null==e?"unknown":this.getGl().getParameter(e.UNMASKED_RENDERER_WEBGL)}return this.glRenderer}getModels(){if(null==this.models){const e=this.getGlRenderer().match(/^apple\s+([_a-z0-9-]+)\s+gpu$/i),t=this.getResolution();if(this.models=["iPhone"],e)for(let i=0;i<this.devices.length;i++){let n=this.devices[i];if(e[1].toLowerCase()==n[0]&&t==n[1]){this.models=n[2];break}}}return this.models[0]}}const Co="unknown",Eo="qnrtcqosevents";const Ro=new class{constructor(){this.base={version:So,device_id:"",browser_version:"",os:"",host_vendor:"",host_model:"",url:"",stream_name:"",app_name:"",uid:"",type:"sdk-player",session_id:"",jitter_buffer_support:!1,timestamp:Date.now(),request_id:"",userAgent:navigator.userAgent,userIp:"",uuid:""},this.events=[],this.lastSubmitTime=Date.now(),this.submitQueue=new en("qos_submit"),this.emitterId=""}init(e,t){return i(this,void 0,void 0,(function*(){this.emitterId=e,this.base.uid=t,this.submitQueue.off("exec"),this.initSubmitQueue(),this.submitQueue.push("resume").catch(it);try{const e=yield new Promise((e=>{e()})).then((()=>new Promise(((e,t)=>{try{qi.get((t=>{const i=t.sort(((e,t)=>e.key.localeCompare(t.key)));e(i)}))}catch(e){t(e)}})))).then((e=>{try{return Qi(JSON.stringify(e))}catch(e){return Promise.reject(new Error("Failed to generate device ID"))}}));this.base.device_id=e}catch(e){e instanceof Error&&Je.error(e.message,this.emitterId),this.base.device_id=Co}this.base.browser_version=`${To.browserName} ${To.browserVersion}`,this.base.os=`${To.osName} ${To.osVersion}`,To.isMobile?(this.base.host_vendor=To.mobileVendor,To.isIOS?this.base.host_model=(new ko).getModels():this.base.host_model=To.mobileModel):To.isMacOs?(this.base.host_vendor="Apple",this.base.host_model="Mac"):To.isWindows?(this.base.host_vendor="Microsoft",this.base.host_model="Windows"):(this.base.host_vendor=Co,this.base.host_model=Co)}))}addUrl(e){this.base.url=e;try{let t=new URL(e).pathname.slice(1).split("/");const i=t.pop(),n=t.pop(),r=i.split(".")[0];this.base.app_name=null!=n?n:"",this.base.stream_name=null!=r?r:""}catch(e){}}addSessionId(e){this.base.session_id=e}addRequestId(e){this.base.request_id=e}addJitterBufferTarget(e){this.base.jitter_buffer_support=e}addEvent(e,t,i){this.submitQueue.push("add",Object.assign(Object.assign({},t),this.base)).catch(it)}submit(e=!1){this.submitQueue.push("submit",e).catch(it)}initSubmitQueue(){this.submitQueue.on("exec",((e,t)=>{switch(e.method){case"submit":return void(t.promise=this._submit(e.data));case"add":return void(t.promise=this._addEvent(e.data));case"resume":return void(t.promise=this._recoverStoredEvents())}}))}_recoverStoredEvents(){return i(this,void 0,void 0,(function*(){const e=localStorage.getItem(Eo);localStorage.removeItem(Eo),e&&(this.events=JSON.parse(window.atob(decodeURIComponent(e))))}))}_addEvent(e){return i(this,void 0,void 0,(function*(){return this.events.push(Object.assign(Object.assign({},e),{timestamp:Date.now(),uuid:`${at()}-${Date.now()}`})),this.submit(),Promise.resolve()}))}loggather(e){return i(this,arguments,void 0,(function*(e,t=1){if(!(yield fetch("https://pili-sdk-transport.qnsdk.com/v1/loggather/",{method:"POST",headers:{"Content-Type":"application/json"},body:e})).ok)throw new pt("rtcevent error");this.lastSubmitTime=Date.now()}))}_submit(){return i(this,arguments,void 0,(function*(e=!1){if(!(!!e||this.submitCheck()))return void this.saveEvents();const t=this.encodeQosSubmitData();try{yield this.loggather(t)}catch(e){e instanceof Error&&(Je.error(e.message,this.emitterId),yield this.loggather(t))}finally{this.events=[],localStorage.removeItem(Eo)}}))}saveEvents(){const e=encodeURIComponent(window.btoa(JSON.stringify(this.events)));localStorage.setItem(Eo,e)}submitCheck(){return!(!this.base.device_id||!this.base.uid)&&this.events.length>=60}encodeQosSubmitData(){let e="",t=[];for(let i of this.events)i.session_id?(t.forEach(((t,n,r)=>{i.request_id===r[n].request_id&&(r[n].session_id=i.session_id),e+=JSON.stringify(r[n])+"\n"})),t=[],e+=JSON.stringify(i)+"\n"):i.event_name===Ki.Error?e+=JSON.stringify(i)+"\n":t.push(i);return e}encodeQosSubmitData2(){let e="";for(let t of this.events)e+=JSON.stringify(t)+"\n";return new Uint8Array(_o.gzip(function(e){const t=[];for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(i++,n=65536+((1023&n)<<10|1023&e.charCodeAt(i)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return new Uint8Array(t)}(e)))}};const xo={[e.PlayerState.STATE_IDLE]:"Idle",[e.PlayerState.STATE_INIT]:"Initialized",[e.PlayerState.STATE_READY]:"Ready",[e.PlayerState.STATE_PLAYING]:"Playing",[e.PlayerState.STATE_STOP]:"Stopped",[e.PlayerState.STATE_ERROR]:"Error"},Po="qn_media_element_reset";function Ao(e,t){e.addEventListener(Po,t,{once:!0})}function Io(e){e.dispatchEvent(new Event(Po))}e.QNRTPlayer=class extends s{constructor(){super(),this.playerEmitterId="",this.uid="",this.lagDuration=[],this.isVideoContainer=!1,this.lastTimeupdateTime=0,this.deferred=ot(),this.timeupdateCallback=e=>{0===this.lastTimeupdateTime||e.timeStamp-this.lastTimeupdateTime>=450&&(Je.debug(`wait duration: ${e.timeStamp-this.lastTimeupdateTime-250} time: ${this.lastTimeupdateTime}`,this.playerEmitterId),this.emit("wait",this.lastTimeupdateTime,e.timeStamp-this.lastTimeupdateTime-250)),this.lastTimeupdateTime=e.timeStamp},this.loadedmetadataHandler=()=>{Je.log("media element loadedmetadata.",this.playerEmitterId),this.deferred.resolve(null)};const{emitterId:t,emitter:i}=(()=>{const e=new s,t=ct();return st[t]=e,{emitterId:t,emitter:e}})();this.qnPC=new Ji(t),this.playerEmitterId=t,this.handleEvent(i),this.setState(e.PlayerState.STATE_IDLE),this.getPlayerSupportPm=new Promise(((e,i)=>{Oi().then((i=>{this.playerSupport=i,i.peerConnection||yt("RTC not supported!",t),i.H264||yt("H264 not supported!",t),e()}))}))}static setLogLevel(e){Je.setLevel(e)}get version(){return v}init(e){this.uid=e.uid?e.uid.toString():`qn_${at()}-${Date.now()}`,Ro.init(this.playerEmitterId,this.uid),this.config=Object.assign(Object.assign({},c),e),this.qnPC.setJitterBuffer(this.config.jitterBuffer)}getUID(){return this.uid}getConfig(){if(!this.config)throw Je.error("config is not initialized, try init() first.",this.playerEmitterId),new pt("config is not initialized");return this.config}setConfig(e){if(!this.config)throw Je.error("config is not initialized, try init() first.",this.playerEmitterId),new pt("config is not initilized");if(!this.mediaElement)throw Je.error("media is not initialized, try play() first.",this.playerEmitterId),new pt("media is not initialized");void 0!==e.className&&(this.config.className=e.className,this.mediaElement.className=this.config.className),void 0!==e.controls&&(this.config.controls=e.controls,this.mediaElement.controls=this.config.controls),void 0!==e.width&&(this.config.width=e.width,this.mediaElement.style.width=this.config.width),void 0!==e.height&&(this.config.height=e.height,this.mediaElement.style.height=this.config.height),void 0!==e.objectFit&&(this.config.objectFit=e.objectFit,this.mediaElement.style.objectFit=this.config.objectFit),void 0!==e.playsinline&&(this.config.playsinline=e.playsinline,this.mediaElement.playsInline=this.config.playsinline,this.mediaElement.setAttribute("webkit-playsinline",String(e.playsinline))),void 0!==e.volumn&&(this.config.volumn=e.volumn,this.mediaElement.volume=this.config.volumn);const{muted:t=!1}=e;this.config.muted=t,this.mediaElement.muted=t}play(t,n){return i(this,void 0,void 0,(function*(){const r=this;if(!this.config)throw Je.error("config is not initialized, try init() first.",this.playerEmitterId),new pt("config is not initialized");if(yield this.getPlayerSupportPm,this.playerSupport&&Ro.addJitterBufferTarget(this.playerSupport.jitterBufferTarget),Ro.addSessionId(""),Ro.addRequestId(`${at()}-${Date.now()}`),Ro.addUrl(t.trim()),this.setState(e.PlayerState.STATE_INIT),this.lastTimeupdateTime=0,Ro.addEvent(Ki.Config,{event_name:Ki.Config,width:this.config.width,height:this.config.height,object_fit:this.config.objectFit,volumn:this.config.volumn,audio_only:this.config.audioOnly,muted:this.config.muted,jitter_buffer:null==this.config.jitterBuffer?-1:this.config.jitterBuffer}),n instanceof HTMLVideoElement?(this.isVideoContainer=!0,this.mediaElement=n,this.mediaElement.removeEventListener("timeupdate",this.timeupdateCallback)):this.isVideoContainer=!1,!this.isVideoContainer&&this.mediaElement||(this.mediaElement||(this.mediaElement=document.createElement("video")),this.mediaElement.addEventListener("timeupdate",this.timeupdateCallback),Ao(this.mediaElement,(()=>{this.mediaElement&&this.mediaElement.removeEventListener("timeupdate",this.timeupdateCallback)})),this.mediaElement.setAttribute("x5-video-player-type","h5"),this.setConfig(this.config)),this.mediaElement.removeEventListener("loadedmetadata",this.loadedmetadataHandler),this.url=yield Je.initUpload(t),this.mediaStream=yield this.qnPC.pullStream(this.url,this.config.audioOnly),Ro.addSessionId(this.qnPC.getSessionId()),this.setState(e.PlayerState.STATE_READY),this.mediaElement.srcObject=this.mediaStream,this.isVideoContainer||(this.mediaElement&&this.container&&this.mediaElement.parentElement&&this.mediaElement.parentElement!==this.container&&this.mediaElement.parentElement.removeChild(this.mediaElement),this.container&&this.container===n||(this.container=n,this.container.appendChild(this.mediaElement))),Fi&&function(){return i(this,arguments,void 0,(function*(e=5e3){const t=new Promise((e=>{"WeixinJSBridge"in window?window.WeixinJSBridge.invoke("getNetworkType",{},(()=>{e()}),!1):document.addEventListener("WeixinJSBridgeReady",(()=>{window.WeixinJSBridge.invoke("getNetworkType",{},(()=>{e()}),!1)}),{once:!0})}));return Promise.race([t,tt(e,"WeChatAutoplayReady")]).catch((e=>{console.debug(e.message)}))}))}().then((()=>{this.playerState!=e.PlayerState.STATE_IDLE&&(Je.debug("Try autoplay in WeChat browser.",this.playerEmitterId),this.resume())})),this.deferred=ot(),this.mediaElement.addEventListener("loadedmetadata",this.loadedmetadataHandler),Ao(this.mediaElement,(()=>{r.mediaElement.removeEventListener("loadedmetadata",this.loadedmetadataHandler)})),yield Promise.race([tt(g,"loadedmetadata"),this.deferred.promise]).catch((()=>{Je.debug("media element loadedmetadata timeout: 8s.",this.playerEmitterId)})),this.playerState!=e.PlayerState.STATE_IDLE)return this.resume()}))}pause(){if(!this.config)throw Je.error("config is not initialized, try init() first.",this.playerEmitterId),new pt("config is not initialized");if(!this.mediaElement)throw Je.error("media is not initialized, try play() first.",this.playerEmitterId),new pt("media is not initialized");this.mediaElement.pause()}resume(){return new Promise(((t,i)=>{if(!this.config)throw Je.error("config is not initialized, try init() first.",this.playerEmitterId),new pt("config is not initialized");if(!this.mediaElement)throw Je.error("media is not initialized, try play() first.",this.playerEmitterId),new pt("media is not initialized");this.isPlaying()&&t();try{const n=this.mediaElement.play();n?n.then((()=>{this.playerState!==e.PlayerState.STATE_STOP&&this.setState(e.PlayerState.STATE_PLAYING),t()})).catch((e=>{if("NotAllowedError"===e.name){const t=`play fail, ${e.name}, ${e.message}`;Je.error(t,this.playerEmitterId),i(new pt(t))}else t()})):(this.playerState!==e.PlayerState.STATE_STOP&&this.setState(e.PlayerState.STATE_PLAYING),t())}catch(e){const t=e instanceof Error?`play error, ${e.name}, ${e.message}`:String(e);Je.error(t,this.playerEmitterId),i(new pt(t))}}))}hasAudio(){if(!this.config)throw Je.error("config is not initialized, try init() first.",this.playerEmitterId),new pt("config is not initialized");if(!this.mediaElement)throw Je.error("media is not initialized, try play() first.",this.playerEmitterId),new pt("media is not initialized");return!!this.mediaStream&&this.mediaStream.getAudioTracks().length>0}hasVideo(){if(!this.config)throw Je.error("config is not initialized, try init() first.",this.playerEmitterId),new pt("config is not initialized");if(!this.mediaElement)throw Je.error("media is not initialized, try play() first.",this.playerEmitterId),new pt("media is not initialized");return!!this.mediaStream&&this.mediaStream.getVideoTracks().length>0}setAudioVolume(e){if(!this.config)throw Je.error("config is not initialized, try init() first.",this.playerEmitterId),new pt("config is not initialized");if(!this.mediaElement)throw Je.error("media is not initialized, try play() first.",this.playerEmitterId),new pt("media is not initialized");this.mediaElement.volume=e}getAudioVolume(){if(!this.config)throw Je.error("config is not initialized, try init() first.",this.playerEmitterId),new pt("config is not initialized");if(!this.mediaElement)throw Je.error("media is not initialized, try play() first.",this.playerEmitterId),new pt("media is not initialized");return this.mediaElement.volume}muteAudio(){if(!this.config)throw Je.error("config is not initialized, try init() first.",this.playerEmitterId),new pt("config is not initialized");if(!this.mediaElement)throw Je.error("media is not initialized, try play() first.",this.playerEmitterId),new pt("media is not initialized");this.mediaElement.muted=!0}unmuteAudio(){if(!this.config)throw Je.error("config is not initialized, try init() first.",this.playerEmitterId),new pt("config is not initialized");if(!this.mediaElement)throw Je.error("media is not initialized, try play() first.",this.playerEmitterId),new pt("media is not initialized");this.mediaElement.muted=!1}muteVideo(){var e;if(!this.config)throw Je.error("config is not initialized, try init() first.",this.playerEmitterId),new pt("config is not initialized");if(!this.mediaElement)throw Je.error("media is not initialized, try play() first.",this.playerEmitterId),new pt("media is not initialized");const t=null===(e=this.mediaStream)||void 0===e?void 0:e.getAudioTracks();t&&t.length>0?this.mediaElement.srcObject=new MediaStream(t):this.mediaElement.srcObject=null,this.resume()}unmuteVideo(){if(!this.config)throw Je.error("config is not initialized, try init() first.",this.playerEmitterId),new pt("config is not initialized");if(!this.mediaElement)throw Je.error("media is not initialized, try play() first.",this.playerEmitterId),new pt("media is not initialized");if(!this.mediaStream)throw Je.error("mediaStream is empty",this.playerEmitterId),new pt("mediaStream is empty");this.mediaElement.srcObject=this.mediaStream,this.resume()}isPlaying(){return!!this.mediaElement&&!this.mediaElement.paused}stop(){if(!this.config)throw Je.error("config is not initialized, try init() first.",this.playerEmitterId),new pt("config is not initialized");if(!this.mediaElement)throw Je.error("media is not initialized, try play() first.",this.playerEmitterId),new pt("media is not initialized");this._stop()}release(){if(!this.config)throw Je.error("config is not initialized, try init() first.",this.playerEmitterId),new pt("config is not initialized");this.setState(e.PlayerState.STATE_IDLE),this.config=void 0,this.mediaElement&&Io(this.mediaElement),this.mediaElement&&this.mediaElement.parentElement&&!this.isVideoContainer&&this.mediaElement.parentElement.removeChild(this.mediaElement),this.qnPC.release(),this.url=void 0,this.mediaElement=void 0,this.isVideoContainer=!1,this.container=void 0,this.mediaStream=void 0}getPlayerSupport(){return i(this,void 0,void 0,(function*(){return yield this.getPlayerSupportPm,this.playerSupport}))}getBrowserReport(){return Ni}setState(e){this.playerState!==e&&(this.playerState=e,Je.log(`player state changed: ${e} ${xo[e]}`,this.playerEmitterId),((e,t)=>{dt("playerStateChanged",e,t)})(e,this.playerEmitterId))}handleEvent(t){t.on("log",(e=>{this.emit("log",e)})),t.on("stats",(e=>{let t=-1,i=-1,n=1e3*e.videoTotalFreezesDuration.reduce(((e,t)=>e+t),0);if("RTCRtpScriptTransform"in window||"MediaStreamTrackGenerator"in window)t=this.lagDuration.reduce(((e,t)=>e+t),0),i=this.lagDuration.length;else if(-4!=n){i=e.videoTotalFreezesDuration.filter((e=>e>0)).length}this.lagDuration=[];let r="";if(e.ip)r=e.ip;else{const e=this.qnPC.getIps();e&&(a=e).every((e=>e===a[0]))&&(r=e[0])}var a;Ro.addEvent(Ki.VideoStatistics,{ip:r,trans_protocol:e.protocol,event_name:Ki.VideoStatistics,decoder_name:e.videoDecoderName,rtt:rt(e.rtt),bps:rt(e.videoBitrate),width:rt(e.videoFrameWidth),fps:rt(e.videoFps),height:rt(e.videoFrameHeight),avg_packet_processing_delay:rt(e.videoAvgPacketProcessingDelay),avg_jitter_buffer_delay:rt(e.videoAvgJitterBufferDelay),avg_jitter_buffer_Target_delay:rt(e.videoAvgJitterBufferTargetDelay),packet_lost_rate:rt(e.videoPacketLostRate),nack_count:rt(e.videoNackCount),pli_count:rt(e.videoPliCount),fir_count:rt(e.videoFirCount),frame_decoded:rt(e.videoFrameDecoded),frame_received:rt(e.videoFrameReceived),decode_cost_ms:rt(e.videoDecodeCostMs),key_frames_decoded:rt(e.videoKeyFramesDecoded),dropped_frames:rt(e.videoDroppedFrames),packets_received:rt(e.videoPacketReceived),bytes_received:rt(e.videoBytesReceived),total_freezes_duration:rt(n),fec_pkts_received:rt(e.videoFecPacketReceived),avg_interframe_delay:rt(e.videoAvgInterframeDelay),estimatedPlayoutTimestamp:rt(e.videoEstimatedPlayoutTimestamp),lastPacketReceivedTimestamp:rt(e.videoLastPacketReceivedTimestamp),lag_count:rt(i),lag_duration:rt(t),const_time:rt(e.constTime),frame_decoded_list:JSON.stringify(e.videoFrameDecodedList)}),Ro.addEvent(Ki.AudioStatistics,{ip:r,trans_protocol:e.protocol,event_name:Ki.AudioStatistics,decoder_name:e.audioDecoderName,bps:rt(e.audioBitrate),rtt:rt(e.rtt),avg_packet_processing_delay:rt(e.audioAvgPacketProcessingDelay),avg_jitter_buffer_delay:rt(e.audioAvgJitterBufferDelay),avg_jitter_buffer_Target_delay:rt(e.audioAvgJitterBufferTargetDelay),packet_lost_rate:rt(e.audioPacketLostRate),total_samples_received:rt(e.audioTotalSamplesReceived),packets_discarded:rt(e.audioPacketDiscarded),packets_lost:rt(e.audioPacketLost),packets_received:rt(e.audioPacketReceived),bytes_received:rt(e.audioBytesReceived),avg_interframe_delay:rt(e.audioAvgInterframeDelay),fps:rt(e.audioFps),estimatedPlayoutTimestamp:rt(e.audioEstimatedPlayoutTimestamp),lastPacketReceivedTimestamp:rt(e.audioLastPacketReceivedTimestamp),const_time:rt(e.constTime)}),this.emit("stats",{audioBitrate:e.audioBitrate,videoBitrate:e.videoBitrate,frameWidth:e.videoFrameWidth,frameHeight:e.videoFrameHeight,frameRate:e.videoFps})})),t.on("error",(t=>{Ro.addEvent(Ki.Error,{event_name:Ki.Error,error_code:t.code,error_info:t.errorType,error_detail:t.msg}),this.setState(e.PlayerState.STATE_ERROR),this._stop(),this.emit("error",t)})),t.on("freezeing",(e=>{this.lagDuration.push(e)})),t.on("playerStateChanged",(t=>{let i=$i.init;switch(t){case e.PlayerState.STATE_IDLE:i=$i.idle;break;case e.PlayerState.STATE_INIT:i=$i.init;break;case e.PlayerState.STATE_READY:i=$i.ready;break;case e.PlayerState.STATE_PLAYING:i=$i.playing;break;case e.PlayerState.STATE_STOP:i=$i.stop;break;case e.PlayerState.STATE_ERROR:i=$i.error}Ro.addEvent(Ki.PlayerStateChanged,{event_name:Ki.PlayerStateChanged,state:i}),this.emit("playerStateChanged",t)}))}_stop(){this.mediaElement&&Io(this.mediaElement),this.qnPC.release(),this.url=void 0,this.setState(e.PlayerState.STATE_STOP)}},Object.defineProperty(e,"__esModule",{value:!0})}));
